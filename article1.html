<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduction to Coaching & Leadership</title>
    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            margin: 0;
            padding: 0;
            line-height: 1.6;
            background-color: #f9f9f9;
            color: #333;
        }

        /* User Bar Styles */
        .user-bar {
            background-color: #34495e;
            padding: 10px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            font-size: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            font-size: 15px;
        }

        .user-email {
            font-size: 13px;
            opacity: 0.8;
        }

        .logout-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .logout-button:hover {
            background-color: #c0392b;
            transform: translateY(-1px);
        }

        .logout-button:active {
            transform: translateY(0);
        }

        /* Navigation Tabs */
        .nav-tab {
            background-color: #2c3e50;
            padding: 10px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-tab a {
            color: white;
            text-decoration: none;
            margin: 0 10px;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        .nav-tab a:hover {
            background-color: #34495e;
        }

        /* Main Content Styles */
        h1 {
            color: white;
            background-color: #e67e22;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            margin: 20px auto;
            max-width: 800px;
        }

        .container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .quote {
            font-style: italic;
            border-left: 4px solid #e67e22;
            padding: 15px;
            background-color: #f9f9f9;
            margin: 15px 0;
        }

        .image-container {
            text-align: center;
            margin: 20px 0;
        }

        .image-container img {
            max-width: 100%;
            height: auto;
            border-radius: 6px;
        }

        .tip-box, .action-box {
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            color: white;
        }

        .tip-box {
            background-color: #3498db;
        }

        .action-box {
            background-color: #e67e22;
        }

        .question-box {
            background-color: rgba(230, 126, 34, 0.1);
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 8px 0;
            resize: vertical;
            min-height: 80px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 14px;
        }

        table, th, td {
            border: 1px solid #ddd;
            padding: 8px;
        }

        th {
            background-color: #f2f2f2;
        }

        .highlight-section {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 20px;
            border-left: 4px solid #3498db;
            border-radius: 6px;
            margin: 20px 0;
        }

        .skills-list {
            background-color: rgba(46, 204, 113, 0.1);
            padding: 20px;
            border-left: 4px solid #2ecc71;
            border-radius: 6px;
            margin: 20px 0;
        }

        .skills-list ul {
            margin-left: 20px;
        }

        .ei-elements {
            background-color: rgba(155, 89, 182, 0.1);
            padding: 20px;
            border-left: 4px solid #9b59b6;
            border-radius: 6px;
            margin: 20px 0;
        }

        .trust-methods {
            background-color: rgba(41, 128, 185, 0.1);
            padding: 20px;
            border-left: 4px solid #2980b9;
            border-radius: 6px;
            margin: 20px 0;
        }

        .save-button {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 8px;
            transition: background-color 0.2s;
        }
        .save-button:hover {
            background-color: #2ecc71;
        }

        .delete-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 8px;
            margin-left: 8px;
            transition: background-color 0.2s;
        }
        .delete-button:hover {
            background-color: #c0392b;
        }

        .button-group {
            display: flex;
            align-items: center;
            margin-top: 8px;
        }

        .save-status {
            font-size: 12px;
            color: #27ae60;
            margin-left: 8px; /* Changed from margin-top */
            display: none;
        }

        .error-message {
            color: #e74c3c;
            font-size: 12px;
            margin-left: 8px;
            display: none;
        }

        .required-field {
            border: 2px solid #e74c3c !important;
            background-color: #ffeeee !important;
            animation: pulse 1s infinite alternate;
        }

        @keyframes pulse {
            from { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.4); }
            to { box-shadow: 0 0 0 6px rgba(231, 76, 60, 0); }
        }

        input[type="text"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 8px 0;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 20px;
        }

        .navigation-buttons a {
            text-decoration: none;
            padding: 10px 20px;
            color: white;
            background-color: #e67e22;
            border-radius: 4px;
            font-weight: bold;
            flex: 1;
            text-align: center;
            transition: background-color 0.3s;
        }

        .navigation-buttons a:hover {
            background-color: #d35400;
        }

        .floating-warning {
            background-color: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 12px 20px;
            color: #333;
            display: none;
            position: fixed;
            top: 70px; /* Adjusted top position */
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            border-radius: 4px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            animation: fadeIn 0.3s ease-in-out;
            font-weight: 500;
        }

        @keyframes fadeIn {
            from { opacity: 0; top: 50px; }
            to { opacity: 1; top: 70px; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        .highlight {
            color: #e67e22;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- User Info Bar -->
    <div class="user-bar">
        <div class="user-info">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.8;">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <div class="user-details">
                <span class="user-name" id="userName">Welcome back</span>
                <span class="user-email" id="userEmail">user@example.com</span>
            </div>
        </div>
        <button class="logout-button" onclick="logout()">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            Logout
        </button>
    </div>

    <!-- Navigation Tabs -->
    <nav class="nav-tab">
        <a href="index.html">Home</a>
        <a href="article1.html">Article 1</a>
        <a href="coaching-skills.html">Coaching Skills</a>
        <a href="coaching-individuals.html">Coaching Individuals</a>
        <a href="coaching-team.html">Team Coaching</a>
        <a href="coaching-yourself.html">Self Coaching</a>
    </nav>

    <h1>Introduction to Coaching & Leadership</h1>

    <div class="floating-warning" id="warningMessage">
        <strong>Action Required:</strong> Please complete all mandatory questions before proceeding.
    </div>

    <div class="container">
        <div class="highlight-section">
            <p>Coaching skills are a valuable asset for any manager. A study by Deloitte found that leaders who frequently coached their teams improved their business results by 21 percent. So, it's no surprise that an increasing number of workplaces consider coaching to be a worthwhile investment. In a survey by the Conference Board Council, 61 percent of the participating organizations used some form of internal coaching.</p>
        </div>

        <div class="quote">
            "I haven't got time for coaching! And who needs it, anyway?" If this is your first reaction to what might feel like just another burdensome task, read on.
        </div>

        <div class="image-container">
            <img src="new-coaching-image.jpg"
                 alt="Coaching Illustration"
                 onerror="this.onerror=null; this.src='https://via.placeholder.com/800x450/ffa726/ffffff?text=Coaching+Illustration';">
            <p>Coaching improves team performance and individual growth</p>
        </div>

        <p>One reason for this increase is that people who receive coaching can reap considerable benefits. Research by PwC found that, of the participants who had received coaching:</p>

        <ul>
            <li>80 percent had increased self-confidence.</li>
            <li>73 percent had improved relationships.</li>
            <li>72 percent had improved communication skills.</li>
            <li>67 percent reported a better work-life balance.</li>
        </ul>

        <p>Numbers like these will likely appeal to any leader, in any industry! But, despite the evidence that effective coaching can make a difference, most managers have very little training in how to do it. The good news is that coaching is a skill that you can learn.</p>

        <h2 class="highlight">What Will Coaching Do for Me?</h2>

        <p>We'll tell you right now, coaching isn't easy - at least, not if you want to do it well. However, it can be a rewarding and inspiring experience, especially when you see your team racing ahead. When you coach your team members, you may find that your job satisfaction increases, too, and you have a deeper sense of purpose and meaning at work. What's more, you'll likely strengthen your relationship with your team.</p>

        <div class="skills-list">
            <p>But first, you need to gain the knowledge and confidence to be an effective coach. This workbook will guide you through the essential coaching skills. You will learn:</p>
            <ul>
                <li>How to develop good listening skills, emotional intelligence and trust, so that you can establish strong coaching relationships.</li>
                <li>How to coach individual team members.</li>
                <li>How to coach your whole team.</li>
                <li>How to coach yourself.</li>
            </ul>
        </div>

        <p>And, by working through the exercises in each chapter, you'll gain a deeper understanding of the topic and reinforce what you've learned. But first, let's deal with those time pressures and To-Do Lists that dominate your life. Consider how a small investment now in effective, targeted coaching can save you and your team large amounts of time and effort in the future. Purpose and enthusiasm will grow, errors will decrease, and loyalty and collaboration will build. And you'll likely find yourself dealing with less conflict, and delegating more.</p>

        <div class="tip-box">
            <strong>TIP</strong><br>
            For more insight into your coaching skills, and for advice and guidance on how to develop your people effectively, take our quiz, <em>How Good Are Your Coaching Skills?</em>
        </div>

        <div class="action-box">
            <strong>ACTION</strong><br>
            Take a look at our Time Management resources for help with heavy workloads, prioritizing, having better meetings, and more. Practice protecting your time for the really important stuff - including coaching!
        </div>

        <!-- Question 1 -->
        <div class="question-box">
            <h3>1. What makes a great coach? Write down your ideas, below.</h3>
            <textarea placeholder="Write your answer here..." class="required-answer" data-question="q1"></textarea>
            <div class="button-group">
                <button class="save-button" onclick="saveAnswer('q1', 'save-status-q1', 'error-q1')">Save Answer</button>
                <button class="delete-button" onclick="deleteAnswer('q1', 'save-status-q1', 'error-q1')">Delete Answer</button>
                <span class="save-status" id="save-status-q1">✓ Saved</span>
                <span class="error-message" id="error-q1">Please enter an answer before saving.</span>
            </div>
        </div>

        <!-- Question 2 -->
        <div class="question-box">
            <h3>2. Which of these skills do you already have?</h3>
            <textarea placeholder="Write your answer here..." class="required-answer" data-question="q2"></textarea>
            <div class="button-group">
                <button class="save-button" onclick="saveAnswer('q2', 'save-status-q2', 'error-q2')">Save Answer</button>
                <button class="delete-button" onclick="deleteAnswer('q2', 'save-status-q2', 'error-q2')">Delete Answer</button>
                <span class="save-status" id="save-status-q2">✓ Saved</span>
                <span class="error-message" id="error-q2">Please enter an answer before saving.</span>
            </div>
        </div>

        <!-- Question 3 -->
        <div class="question-box">
            <h3>3. Which of these skills do you need to develop?</h3>
            <textarea placeholder="Write your answer here..." class="required-answer" data-question="q3"></textarea>
            <div class="button-group">
                <button class="save-button" onclick="saveAnswer('q3', 'save-status-q3', 'error-q3')">Save Answer</button>
                <button class="delete-button" onclick="deleteAnswer('q3', 'save-status-q3', 'error-q3')">Delete Answer</button>
                <span class="save-status" id="save-status-q3">✓ Saved</span>
                <span class="error-message" id="error-q3">Please enter an answer before saving.</span>
            </div>
        </div>

        <div class="navigation-buttons">
            <a href="index.html" class="nav-button">← Back to Home</a>
            <a href="coaching-skills.html" class="nav-button" id="nextButton">Next: Coaching Skills →</a>
        </div>
    </div>

    <script>
        // --- Configuration ---
        const formspreeEndpoint = 'https://formspree.io/f/xzzeqvea'; // Your Formspree Endpoint URL
        const localStorageKey = 'allUserAnswers_article1'; // Specific key for this page's answers
        const userEmailKey = 'userEmail'; // Key used for storing user email during login
        const currentUserKey = 'currentUser'; // Key for storing the whole user object

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', function() {
            const userEmail = getUserEmail();

            if (!userEmail) {
                alert('User session not found. Please log in again.');
                window.location.href = 'login.html';
                return;
            }

            displayUserInfo(userEmail);
            loadUserAnswers(userEmail);
            setupEventListeners(userEmail);
        });

        // --- User Info & Authentication ---
        function getUserEmail() {
            const userData = JSON.parse(localStorage.getItem(currentUserKey));
            return userData?.email || localStorage.getItem(userEmailKey);
        }

        function displayUserInfo(userEmail) {
            const userData = JSON.parse(localStorage.getItem(currentUserKey)) || {};
            document.getElementById('userName').textContent = `Welcome, ${userData.name || 'User'}`;
            document.getElementById('userEmail').textContent = userEmail;
        }

        function logout() {
            localStorage.removeItem('loggedIn'); // Assuming you use this key
            localStorage.removeItem(currentUserKey);
            localStorage.removeItem(userEmailKey);
            // Optionally clear specific answers for this page on logout
            // localStorage.removeItem(localStorageKey);
            window.location.href = 'login.html';
        }

        // --- Answer Handling (Local Storage) ---
        function loadUserAnswers(userEmail) {
            const allAnswers = JSON.parse(localStorage.getItem(localStorageKey)) || {};
            const userAnswers = allAnswers[userEmail] || {};

            document.querySelectorAll('.required-answer').forEach(field => {
                const questionId = field.getAttribute('data-question');
                if (userAnswers[questionId] !== undefined) { // Check for undefined to handle empty strings
                    field.value = userAnswers[questionId];
                    // Ensure required styling is removed if a saved answer exists (even if empty)
                    field.classList.remove('required-field');
                } else {
                    // Ensure field is empty if no answer is saved
                    field.value = '';
                }
                // Update status if answer exists
                if(userAnswers[questionId] !== undefined && userAnswers[questionId].trim() !== '') {
                     const statusId = `save-status-${questionId}`;
                     const statusElement = document.getElementById(statusId);
                     if (statusElement) statusElement.style.display = 'inline';
                }

            });
        }

        function saveAnswerToStorage(userEmail, questionId, answer) {
            const allAnswers = JSON.parse(localStorage.getItem(localStorageKey)) || {};
            if (!allAnswers[userEmail]) {
                allAnswers[userEmail] = {};
            }
            allAnswers[userEmail][questionId] = answer; // Save the answer (even if empty)
            localStorage.setItem(localStorageKey, JSON.stringify(allAnswers));
        }

         function deleteAnswerFromStorage(userEmail, questionId) {
            const allAnswers = JSON.parse(localStorage.getItem(localStorageKey)) || {};
            if (allAnswers[userEmail]) {
                delete allAnswers[userEmail][questionId];
                // Optional: remove user entry if no answers left
                if (Object.keys(allAnswers[userEmail]).length === 0) {
                    delete allAnswers[userEmail];
                }
            }
            localStorage.setItem(localStorageKey, JSON.stringify(allAnswers));
        }

        // --- Event Listeners Setup ---
        function setupEventListeners(userEmail) {
            // Auto-save on input (optional but can be useful)
            /*
            document.querySelectorAll('.required-answer').forEach(field => {
                field.addEventListener('input', function() {
                    const questionId = this.getAttribute('data-question');
                    saveAnswerToStorage(userEmail, questionId, this.value);
                    // Remove required field styling if content exists
                    if (this.value.trim() !== '') {
                        this.classList.remove('required-field');
                        document.getElementById(`error-${questionId}`).style.display = 'none';
                    }
                });
            });
            */

            // Next button validation
            document.getElementById('nextButton').addEventListener('click', function(e) {
                if (!validateAllAnswers()) {
                    e.preventDefault(); // Stop navigation
                    showWarningMessage();
                }
            });
        }

        // --- UI Feedback & Validation ---
        function validateAllAnswers() {
            let allAnswered = true;
            document.querySelectorAll('.required-answer').forEach(field => {
                if (field.value.trim() === '') {
                    allAnswered = false;
                    field.classList.add('required-field');
                    // Optionally show error message next to the field immediately
                    // document.getElementById(`error-${field.getAttribute('data-question')}`).style.display = 'inline';
                } else {
                    field.classList.remove('required-field');
                    // Optionally hide error message if field is now filled
                    // document.getElementById(`error-${field.getAttribute('data-question')}`).style.display = 'none';
                }
            });
            return allAnswered;
        }

        function showWarningMessage() {
            const warningElement = document.getElementById('warningMessage');
            warningElement.style.display = 'block';
            warningElement.style.animation = 'fadeIn 0.3s ease-in-out'; // Ensure fadeIn animation plays

            // Scroll to the first empty field for better UX
            const firstEmptyField = document.querySelector('.required-field');
            if (firstEmptyField) {
                firstEmptyField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                firstEmptyField.focus();
            }

            // Auto-hide the warning message after a few seconds
            setTimeout(() => {
                warningElement.style.animation = 'fadeOut 0.5s ease-in-out forwards'; // Use forwards to keep final state
                // Use a second timeout matching the fadeOut duration to set display: none
                 setTimeout(() => {
                      warningElement.style.display = 'none';
                      warningElement.style.animation = ''; // Reset animation property
                 }, 500);
            }, 3500); // Display for 3.5 seconds
        }

        function showSaveStatus(statusId, message = '✓ Saved') {
             const statusElement = document.getElementById(statusId);
             statusElement.textContent = message;
             statusElement.style.display = 'inline';
             // Hide after 3 seconds
             setTimeout(() => {
                 statusElement.style.display = 'none';
             }, 3000);
        }

        function showError(errorId, field, message = 'Please enter an answer before saving.') {
             document.getElementById(errorId).textContent = message;
             document.getElementById(errorId).style.display = 'inline';
             field.classList.add('required-field');
             field.focus();
        }

        function hideMessages(statusId, errorId, field) {
             document.getElementById(statusId).style.display = 'none';
             document.getElementById(errorId).style.display = 'none';
             field.classList.remove('required-field');
        }


        // --- Actions (Save, Delete) ---
        function saveAnswer(questionId, statusId, errorId) {
            const userEmail = getUserEmail();
            if (!userEmail) {
                alert('Session expired. Please login again.');
                window.location.href = 'login.html';
                return;
            }

            const field = document.querySelector(`.required-answer[data-question="${questionId}"]`);
            const answer = field.value.trim();

            hideMessages(statusId, errorId, field);

            // Validate answer - Now mandatory
            if (!answer) {
                showError(errorId, field);
                return;
            }

            // 1. Save to Local Storage
            saveAnswerToStorage(userEmail, questionId, answer);

            // 2. Send to Formspree
            submitToFormspree(userEmail, questionId, answer); // Call the new function

            // 3. Show confirmation
            showSaveStatus(statusId);
        }

        function deleteAnswer(questionId, statusId, errorId) {
            const userEmail = getUserEmail();
             if (!userEmail) {
                alert('Session expired. Please login again.');
                window.location.href = 'login.html';
                return;
            }

            const field = document.querySelector(`.required-answer[data-question="${questionId}"]`);
            hideMessages(statusId, errorId, field);

            // Clear the field
            field.value = '';

            // Remove from Local Storage
            deleteAnswerFromStorage(userEmail, questionId);

             // Note: We typically DON'T send a "delete" action to Formspree.
             // Formspree is for collecting submissions, not managing state.

            // Show delete confirmation
             showSaveStatus(statusId, 'Answer deleted!');
        }

        // --- Formspree Submission ---
        function submitToFormspree(userEmail, questionId, answer) {
            const formData = new FormData();
            formData.append('email', userEmail);
            formData.append('page', document.title); // Add page title for context
            formData.append('question_id', questionId);
            formData.append('answer_text', answer);

            fetch(formspreeEndpoint, {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            })
            .then(response => {
                if (response.ok) {
                    console.log(`Answer for ${questionId} submitted successfully to Formspree.`);
                    // Optional: Add subtle UI feedback for successful cloud sync if needed
                } else {
                    response.json().then(data => {
                        console.error(`Formspree submission error for ${questionId}:`, data.errors ? data.errors.map(e => e.message).join(', ') : response.statusText);
                    }).catch(() => {
                        console.error(`Non-OK response from Formspree for ${questionId}. Status: ${response.status}`);
                    });
                    // Optional: Inform user if submission failed critically? Usually console log is enough.
                }
            })
            .catch(error => {
                console.error(`Network error submitting form to Formspree for ${questionId}:`, error);
                 // Optional: Inform user about network issue?
            });
        }

    </script>
</body>
</html>
