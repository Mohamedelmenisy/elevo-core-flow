<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Your existing head content remains the same -->
    <!-- ... -->
</head>
<body>
    <!-- Your existing HTML remains the same -->
    <!-- ... -->

    <script>
        // Login form handling
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value.trim().toLowerCase();
            const password = document.getElementById('password').value;
            const emailError = document.getElementById('emailError');
            const passwordError = document.getElementById('passwordError');
            const loginSuccess = document.getElementById('loginSuccess');
            
            // Reset messages
            emailError.style.display = 'none';
            passwordError.style.display = 'none';
            loginSuccess.style.display = 'none';
            
            // Validate email
            if (!email || !email.includes('@') || !email.includes('.')) {
                emailError.textContent = 'Please enter a valid email address';
                emailError.style.display = 'block';
                return;
            }
            
            // Validate password
            if (!password || password.length < 6) {
                passwordError.textContent = 'Password must be at least 6 characters';
                passwordError.style.display = 'block';
                return;
            }
            
            // Get users from localStorage
            const users = JSON.parse(localStorage.getItem('users')) || [];
            
            // Find matching user
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                loginSuccess.style.display = 'block';
                localStorage.setItem('loggedIn', 'true');
                localStorage.setItem('userEmail', email);
                sessionStorage.setItem('currentUser', JSON.stringify(user));
                
                // Redirect after 1 second
                setTimeout(function() {
                    window.location.href = 'index.html';
                }, 1000);
            } else {
                passwordError.textContent = 'Invalid email or password combination';
                passwordError.style.display = 'block';
            }
        });

        // Forgot password functionality (updated to check localStorage)
        document.getElementById('sendResetBtn').addEventListener('click', function() {
            const resetEmail = document.getElementById('resetEmail').value.trim().toLowerCase();
            const resetError = document.getElementById('resetError');
            const resetSuccess = document.getElementById('resetSuccess');
            
            resetError.style.display = 'none';
            resetSuccess.style.display = 'none';
            
            if (!resetEmail || !resetEmail.includes('@') || !resetEmail.includes('.')) {
                resetError.textContent = 'Please enter a valid email address';
                resetError.style.display = 'block';
                return;
            }
            
            // Check if email exists in localStorage
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const userExists = users.some(u => u.email === resetEmail);
            
            if (userExists) {
                resetSuccess.textContent = 'Password reset instructions sent to ' + resetEmail;
                resetSuccess.style.display = 'block';
                
                // In a real app, you would send an email here
                console.log('Password reset requested for:', resetEmail);
                
                // Close modal after 3 seconds
                setTimeout(function() {
                    document.getElementById('forgotPasswordModal').style.display = 'none';
                    resetSuccess.style.display = 'none';
                    document.getElementById('resetEmail').value = '';
                }, 3000);
            } else {
                resetError.textContent = 'No account found with that email address';
                resetError.style.display = 'block';
            }
        });

        // Check if user is already logged in
        if (localStorage.getItem('loggedIn') === 'true') {
            window.location.href = 'index.html';
        }

        // Your other existing event listeners remain the same
        // ...
    </script>
</body>
</html>
