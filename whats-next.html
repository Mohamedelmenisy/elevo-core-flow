<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>What's Next? - Coaching Strategy</title>
    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <style>
        /* --- Global Styles (Consistent) --- */
        * {
            margin: 0; padding: 0; box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        html { scroll-behavior: smooth; }
        body {
            margin: 0; padding: 0; line-height: 1.7; /* Adjusted */
            background-color: #f9f9f9; color: #333;
        }

        /* --- User Bar Styles (Consistent) --- */
        .user-bar {
            background-color: #34495e; padding: 10px 20px; /* Adjusted */
            display: flex; justify-content: space-between; align-items: center;
            color: white; font-size: 14px; /* Adjusted */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .user-info { display: flex; align-items: center; gap: 12px; /* Adjusted */ }
        .user-info svg { opacity: 0.8; }
        .user-details { display: flex; flex-direction: column; }
        .user-name { font-weight: 600; font-size: 14px; /* Adjusted */ }
        .user-email { font-size: 12px; /* Adjusted */ opacity: 0.8; }
        .logout-button {
            background-color: #e74c3c; color: white; border: none;
            padding: 8px 15px; /* Adjusted */ border-radius: 6px; cursor: pointer;
            font-weight: 500; transition: all 0.3s ease; display: flex;
            align-items: center; gap: 6px; font-size: 13px; /* Adjusted */
        }
        .logout-button:hover { background-color: #c0392b; transform: translateY(-1px); }
        .logout-button:active { transform: translateY(0); }

        /* --- Navigation Tabs (Consistent) --- */
        .nav-tab {
            background-color: #2c3e50; padding: 12px 10px; /* Adjusted */
            text-align: center; position: sticky; top: 0; z-index: 100;
            overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch;
            scrollbar-width: thin; scrollbar-color: #556a80 #2c3e50;
        }
        .nav-tab::-webkit-scrollbar { height: 6px; }
        .nav-tab::-webkit-scrollbar-track { background: #2c3e50; }
        .nav-tab::-webkit-scrollbar-thumb { background-color: #556a80; border-radius: 10px; border: 1px solid #2c3e50; }
        .nav-tab a {
            color: white; text-decoration: none; margin: 0 8px; /* Adjusted */
            padding: 8px 12px; /* Adjusted */ border-radius: 6px; /* Adjusted */
            transition: background-color 0.3s, color 0.3s; font-size: 14px; /* Adjusted */
            display: inline-block;
        }
        .nav-tab a:hover, .nav-tab a.active { background-color: #34495e; color: #fff; }


        /* --- Main Content Styles --- */
         .container {
            max-width: 800px; margin: 30px auto; /* Adjusted margin */
            background: white; padding: 35px; /* Increased padding */
            box-shadow: 0 0 15px rgba(0,0,0,0.1); border-radius: 8px;
        }

        h1 { /* Consistent with Action Plan H1 */
            color: #fff; background-color: #27ae60; /* Green for completion/next steps */
            padding: 20px; border-radius: 8px; text-align: center;
            margin: 0 auto 35px; /* Center and add bottom margin */
            max-width: 700px; /* Slightly narrower */
            font-size: 26px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            font-weight: 600; /* Slightly less bold than default H1 */
        }

        h2 { /* Consistent styling for section titles */
            color: #34495e; /* Dark Blue/Grey */
            text-align: center; margin: 40px 0 20px;
            font-size: 1.8em; font-weight: 600;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1; /* Light underline */
        }

        p {
            margin-bottom: 1.2rem; /* Slightly reduced margin */
            font-size: 1.05rem; /* Slightly smaller default text */
            line-height: 1.7;
            text-align: center; /* Keep text centered for this page */
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            color: #34495e; /* Consistent text color */
        }

        .italic {
            font-style: italic;
            color: #555;
            display: block; /* Make it block for centering */
            margin-top: 10px;
        }

        .signature-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid #eee; /* Separator line */
        }

        .signature {
            text-align: center;
            margin-bottom: 30px;
        }

        .signature p {
            margin: 5px 0; /* Tighter spacing in signature */
            font-size: 1.05rem;
            line-height: 1.5;
             color: #34495e;
        }
        .signature p.author-name { /* Specific style for name */
            font-weight: 600;
            color: #e67e22; /* Orange highlight */
            font-size: 1.1em;
            margin-top: 10px;
        }
         .signature p.title { /* Style for title */
              font-size: 0.95em;
              color: #7f8c8d; /* Lighter grey */
         }

        /* Navigation Buttons (Consistent with Action Plan) */
        .navigation-buttons {
            display: flex; justify-content: center; /* Center single button */
            margin-top: 20px; /* Reduced margin */
            gap: 20px;
        }
        .navigation-buttons a.nav-button { /* Use class */
            text-decoration: none; padding: 12px 30px; /* Adjusted padding */
            color: white; border-radius: 4px; font-weight: 600;
            text-align: center; transition: all 0.3s ease; font-size: 15px;
            border: none; cursor: pointer;
            background-color: #6c757d; /* Grey for back button */
            flex: 0 1 auto; /* Don't grow, basis auto */
            max-width: 250px; /* Limit width */
        }
        .navigation-buttons a.nav-button:hover {
             transform: translateY(-1px); filter: brightness(110%);
        }
        .navigation-buttons a.nav-button:active {
             transform: translateY(0); filter: brightness(100%);
        }


        /* Success Modal Styles (Consistent with index.html) */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.7); z-index: 1000;
            justify-content: center; align-items: center;
        }
        .modal-content {
            background: white; padding: 30px 35px; /* Adjusted padding */
            border-radius: 12px; max-width: 450px; width: 90%;
            text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative; animation: modalFadeIn 0.3s ease-out;
        }
        @keyframes modalFadeIn { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }

        .modal-content h3 { /* Modal Title */
            color: #27ae60; /* Green for success */
            margin-bottom: 15px; font-size: 1.5em; font-weight: 600;
        }
        .modal-content p { /* Modal Text */
             color: #34495e; margin-bottom: 10px; font-size: 1em; text-align: center;
        }
        .modal-button { /* Modal Button */
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            color: white; border: none; padding: 12px 25px; border-radius: 8px;
            cursor: pointer; margin-top: 25px; font-weight: 600;
            transition: all 0.3s; box-shadow: 0 4px 6px rgba(46, 204, 113, 0.1);
        }
        .modal-button:hover {
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            box-shadow: 0 6px 8px rgba(46, 204, 113, 0.15);
            transform: translateY(-1px);
        }
        .modal-button:active { transform: translateY(0); }

        .close-modal { /* Modal Close Button */
            position: absolute; top: 15px; right: 15px; background: none;
            border: none; font-size: 22px; cursor: pointer; color: #95a5a6;
            transition: color 0.3s; line-height: 1;
        }
        .close-modal:hover { color: #7f8c8d; }


        /* Responsive Adjustments (Consistent) */
        @media (max-width: 768px) {
             h1 { font-size: 22px; padding: 15px; margin-bottom: 25px;}
             h2 { font-size: 1.6em; margin-top: 30px; }
             .container { padding: 25px; margin: 20px 15px; }
             p { font-size: 1rem; }
             .navigation-buttons { flex-direction: column; align-items: center; }
             .navigation-buttons a.nav-button { width: 100%; max-width: 300px; padding: 12px 15px; }
             .modal-content { padding: 25px 20px; }
             .modal-content h3 { font-size: 1.3em; }
        }

        @media (max-width: 480px) {
            h1 { font-size: 20px; }
            h2 { font-size: 1.4em; }
            .container { padding: 20px; margin: 15px 10px; }
            .modal-content { width: 95%; }
        }
    </style>
</head>
<body>
    <!-- User Info Bar -->
    <div class="user-bar">
        <div class="user-info">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <div class="user-details">
                <span class="user-name" id="userName">Welcome back</span>
                <span class="user-email" id="userEmail">user@example.com</span>
            </div>
        </div>
        <button class="logout-button" onclick="logout()">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            Logout
        </button>
    </div>

    <!-- Navigation Tabs -->
    <nav class="nav-tab">
        <a href="index.html">Home</a>
        <a href="article1.html">Article 1</a>
        <a href="coaching-skills.html">Coaching Skills</a>
        <a href="coaching-individuals.html">Coaching Individuals</a>
        <a href="coaching-team.html">Team Coaching</a>
        <a href="coaching-yourself.html">Self Coaching</a>
        <a href="action-plan.html">Action Plan</a>
        <a href="whats-next.html" class="active">What's Next</a> <!-- Added link and marked active -->
    </nav>

    <!-- Success Modal -->
    <div id="successModal" class="modal-overlay">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()" aria-label="Close Modal">×</button>
            <h3>Course Complete!</h3>
            <p>Congratulations on successfully finishing the Coaching & Leadership course content and your action plan!</p>
            <p>Remember to revisit your plan and continue practicing these valuable skills.</p>
            <button class="modal-button" onclick="closeModal()">OK</button> <!-- Simple OK button -->
        </div>
    </div>

    <div class="container">
        <h1>What's Next?</h1> <!-- Changed H1 Content slightly -->

        <h2>Congratulations on Your Achievement!</h2> <!-- Changed H2 Content -->

        <p>You've successfully navigated the core concepts and practical exercises of this Coaching & Leadership course. You now possess a strong foundation for becoming an even more effective and impactful coach.</p>

        <p>We've explored the essential skills, models for individual and team coaching, and the importance of self-reflection. Your completed Action Plan provides a personalized roadmap for applying these learnings.</p>

        <p class="italic">The key now is consistent practice. The more you engage in coaching conversations – formal and informal – the more natural and effective your skills will become.</p>

        <p>Coaching is a rewarding journey of continuous learning and growth, both for you and those you coach. Embrace the process!</p>

        <!-- Signature -->
        <div class="signature-container">
            <div class="signature">
                <p>Best wishes on your continued development,</p>
                <p class="author-name">Mohamed Elmenisy</p>
                <p class="title">Learning And Development</p>
            </div>

            <!-- Navigation Buttons -->
            <div class="navigation-buttons">
                 <a href="action-plan.html" class="nav-button">← Review Your Action Plan</a>
                 <!-- Optional: Add a link back to Home -->
                 <!-- <a href="index.html" class="nav-button" style="background-color:#3498db;">Back to Course Home</a> -->
            </div>
        </div>
    </div>

    <script>
        // --- Configuration ---
        const currentUserKey = 'currentUser'; // Consistent key for user object
        const completionModalKey = 'completionModalShown_whatsNext'; // Specific key for this modal

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', function() {
             // --- 1. Basic Login Check ---
             if (localStorage.getItem('loggedIn') !== 'true') {
                 console.log("Not logged in, redirecting...");
                 window.location.href = `login.html?redirect=${encodeURIComponent(window.location.pathname)}`;
                 return;
             }

             // --- 2. Get User Data ---
             const currentUser = getCurrentUser();

             // --- 3. Display User Info ---
             displayUserInfo(); // Reads from localStorage

             // --- 4. Validate User Session ---
             if (!currentUser || !currentUser.email) {
                 console.error("User session invalid or email missing. Logging out...");
                 alert('Your session data seems invalid. Please log in again.');
                 logout();
                 return;
             }

             // --- 5. Show Completion Modal Once ---
             checkAndShowCompletionModal();

             // --- 6. Highlight Active Nav ---
             highlightActiveNav();
        });

        // --- User Info & Authentication (Consistent Functions) ---
        function getCurrentUser() {
             try {
                 const data = localStorage.getItem(currentUserKey);
                 if (data) {
                     const parsedData = JSON.parse(data);
                     if (parsedData && typeof parsedData === 'object' && parsedData.email) {
                         return parsedData;
                     } else {
                         console.warn("currentUser data found but invalid.", parsedData);
                         localStorage.removeItem(currentUserKey);
                         localStorage.removeItem('loggedIn');
                         return null;
                     }
                 }
                 return null;
             } catch (e) {
                 console.error("Error parsing currentUser data:", e);
                  localStorage.removeItem(currentUserKey);
                  localStorage.removeItem('loggedIn');
                 return null;
             }
        }

        function displayUserInfo() {
            const userNameElement = document.getElementById('userName');
            const userEmailElement = document.getElementById('userEmail');
            let userName = 'User';
            let userEmail = 'user@example.com';

            try {
                const userDataString = localStorage.getItem(currentUserKey);
                if (userDataString) {
                    const userData = JSON.parse(userDataString);
                    if (userData && typeof userData === 'object') {
                       userName = userData.name || userName;
                       userEmail = userData.email || userEmail;
                    }
                }
            } catch (error) {
                console.error("Error displaying user info:", error);
            }

            if (userNameElement) userNameElement.textContent = `Welcome, ${userName}`;
            if (userEmailElement) userEmailElement.textContent = userEmail;
        }

        function logout() {
            console.log("Logging out...");
            localStorage.removeItem('loggedIn');
            localStorage.removeItem(currentUserKey);
             // Optionally clear modal shown flag if you want it to show again on next login
            // localStorage.removeItem(completionModalKey);
            window.location.href = 'login.html';
        }

        function highlightActiveNav() {
             const currentPath = window.location.pathname.split('/').pop() || 'index.html';
             document.querySelectorAll('.nav-tab a').forEach(link => {
                 const linkPath = (link.getAttribute('href') || '').split('/').pop();
                 // Ensure comparison handles cases like "whats-next.html" vs "whats-next"
                 link.classList.toggle('active', linkPath === currentPath || linkPath === currentPath.replace('.html',''));
             });
         }

        // --- Completion Modal Logic ---
        function checkAndShowCompletionModal() {
            const modalShown = localStorage.getItem(completionModalKey);
            const successModal = document.getElementById('successModal');

            if (modalShown !== 'true' && successModal) {
                console.log("Showing completion modal for the first time.");
                successModal.style.display = 'flex';
                try {
                    localStorage.setItem(completionModalKey, 'true');
                } catch (e) {
                     console.error("Failed to set completion modal flag in localStorage:", e);
                     // Modal will show again next time, which is acceptable fallback
                }
            } else {
                 console.log("Completion modal already shown or not found.");
            }
        }

        function closeModal() {
            const successModal = document.getElementById('successModal');
            if (successModal) {
                successModal.style.display = 'none';
            }
        }

    </script>
</body>
</html>
