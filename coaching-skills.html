<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Core Coaching Skills</title> <!-- Title Updated -->
    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <style>
        /* --- Global Styles --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            margin: 0;
            padding: 0;
            line-height: 1.7; /* Slightly increased line-height for readability */
            background-color: #f8f9fa; /* Lighter background */
            color: #343a40; /* Darker text */
        }

        /* Accessibility: Style for visually hidden labels */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* --- User Bar Styles --- */
        .user-bar {
            background-color: #34495e;
            padding: 10px 20px; /* Adjusted padding */
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            font-size: 14px; /* Slightly smaller base font */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px; /* Adjusted gap */
        }
        .user-info svg {
             opacity: 0.8; /* Moved from inline style */
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            font-size: 14px;
        }

        .user-email {
            font-size: 12px;
            opacity: 0.8;
        }

        .logout-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 8px 15px; /* Adjusted padding */
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px; /* Adjusted font size */
        }
        .logout-button:hover {
            background-color: #c0392b;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .logout-button:active {
            transform: translateY(0);
        }

        /* --- Navigation Tabs --- */
        .nav-tab {
            background-color: #2c3e50;
            padding: 12px 10px; /* Increased padding slightly */
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            overflow-x: auto; /* Allow horizontal scrolling on small screens */
            white-space: nowrap; /* Prevent tabs from wrapping */
            -webkit-overflow-scrolling: touch; /* Smoother scrolling on iOS */
            scrollbar-width: thin; /* Firefox scrollbar */
            scrollbar-color: #556a80 #2c3e50; /* Firefox scrollbar color */
        }
        /* Webkit scrollbar styles */
        .nav-tab::-webkit-scrollbar { height: 6px; }
        .nav-tab::-webkit-scrollbar-track { background: #2c3e50; }
        .nav-tab::-webkit-scrollbar-thumb { background-color: #556a80; border-radius: 10px; border: 1px solid #2c3e50; }

        .nav-tab a {
            color: white;
            text-decoration: none;
            margin: 0 8px; /* Adjusted margin */
            padding: 8px 12px; /* Adjusted padding */
            border-radius: 6px;
            transition: background-color 0.3s, color 0.3s;
            font-size: 14px; /* Consistent font size */
            display: inline-block; /* Ensure padding and margin work correctly */
        }
        .nav-tab a:hover,
        .nav-tab a.active { /* Add an 'active' class potentially */
            background-color: #4e6a85;
            color: #fff;
        }

        /* --- Main Content Styles --- */
        h1 {
            color: #fff;
            /* Keeping original H1 background color as requested implicitly by keeping original code */
            background-color: #e67e22;
            /* background: linear-gradient(90deg, #3498db, #2980b9); */ /* Removed gradient change */
            padding: 20px; /* Adjusted padding */
            border-radius: 8px; /* Adjusted radius */
            text-align: center;
            margin: 25px auto; /* Consistent margin */
            max-width: 800px;
            font-size: 26px; /* Adjusted font size */
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        h2 {
             margin-top: 35px; /* Space above H2 */
             margin-bottom: 15px;
             color: #2c3e50; /* Darker heading color */
             font-size: 22px;
             border-bottom: 2px solid #e9ecef; /* Subtle separator */
             padding-bottom: 8px;
        }

        .container {
            max-width: 800px;
            margin: 25px auto; /* Consistent margin */
            background: white;
            padding: 30px; /* Increased padding */
            box-shadow: 0 4px 15px rgba(0,0,0,0.07); /* Softer shadow */
            border-radius: 8px; /* Rounded corners */
        }

        .quote {
            font-style: italic;
            border-left: 5px solid #e67e22; /* Thicker border, original color */
            padding: 15px 20px;
            background-color: #fef9e7; /* Lighter yellow/orange background for quote */
            margin: 25px 0; /* Consistent vertical margin */
            color: #555;
            font-size: 15px; /* Adjusted font size */
        }

        .image-container {
            text-align: center;
            margin: 30px 0; /* Increased margin */
        }
        .image-container img {
            max-width: 100%;
            height: auto; /* Let height adjust automatically */
            max-height: 450px; /* ** Limit max height for images slightly ** */
            object-fit: contain; /* ** Use contain to ensure whole image is visible ** */
            border-radius: 8px; /* Match container radius */
            border: 1px solid #eee; /* Subtle border */
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            background-color: #f0f0f0; /* Light grey background for placeholder area */
            display: block; /* Prevent extra space below */
            margin: 0 auto; /* Center if max-width is less than container */
        }
        .image-container p { /* Caption style */
             font-size: 14px;
             color: #777;
             margin-top: 10px;
             font-style: italic;
        }

        .tip-box, .action-box {
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
            color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .tip-box strong, .action-box strong {
            display: block;
            margin-bottom: 8px;
            font-size: 16px;
        }
        .tip-box { background-color: #3498db; } /* Original Tip Box Color */
        .action-box { background-color: #e67e22; } /* Original Action Box Color */


        .question-box {
            /* Original light orange background */
            background-color: rgba(230, 126, 34, 0.1);
            padding: 25px; /* Increased padding */
            border-radius: 8px; /* Consistent radius */
            margin: 25px 0; /* Consistent margin */
            border: 1px solid rgba(230, 126, 34, 0.2); /* Subtle border */
            box-shadow: 0 2px 5px rgba(0,0,0,0.03);
        }
        .question-box h3 {
            margin-bottom: 15px;
            color: #34495e;
            font-size: 18px;
        }

        textarea, input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ced4da; /* Slightly darker border */
            border-radius: 6px;
            margin-top: 8px;
            margin-bottom: 10px; /* Space below input */
            resize: vertical;
            min-height: 100px; /* Default min height */
            font-size: 15px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        textarea:focus, input[type="text"]:focus {
             border-color: #80bdff; /* Standard focus blue */
             outline: 0;
             box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
         }
        /* Adjust min-height for table inputs */
        td input[type="text"] {
             min-height: auto;
             margin-bottom: 0; /* Remove margin inside table */
        }


        /* --- Table Styles --- */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0; /* Consistent margin */
            font-size: 14px;
            background-color: #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        table th, table td {
            border: 1px solid #dee2e6; /* Slightly darker border */
            padding: 12px;
            text-align: left;
            vertical-align: top; /* Align content top */
        }
        table th {
            background-color: #f8f9fa; /* Light grey header */
            font-weight: 600;
            color: #495057;
        }
        /* Metaphor Table Header */
        .metaphor-table thead th {
            background-color: #e67e22; /* Original color */
            color: white;
        }
        table tr:nth-child(even) td {
            background-color: #f8f9fa; /* Zebra striping */
        }
        /* Ensure buttons align well within table cell */
        td .button-group {
            margin-top: 5px; /* Small space above buttons in table */
            justify-content: flex-start; /* Align buttons left */
        }


        /* Highlighted Sections */
        .highlight-section, .skills-list, .ei-elements, .trust-methods {
            padding: 25px;
            border-left-width: 5px; /* Thicker border */
            border-radius: 8px;
            margin: 25px 0; /* Consistent margin */
            font-size: 15px;
        }
        .highlight-section { background-color: rgba(52, 152, 219, 0.1); border-left-color: #3498db; }
        .skills-list { background-color: rgba(46, 204, 113, 0.1); border-left-color: #2ecc71; }
        .skills-list ul { margin-top: 10px; margin-left: 20px; list-style: disc; }
        .skills-list li { margin-bottom: 8px; }
        .ei-elements { background-color: rgba(155, 89, 182, 0.1); border-left-color: #9b59b6; }
        .ei-elements ol { margin-top: 10px; margin-left: 20px; }
        .ei-elements li { margin-bottom: 8px; }
        .trust-methods { background-color: rgba(41, 128, 185, 0.1); border-left-color: #2980b9; }
        .trust-methods ul { margin-top: 10px; margin-left: 20px; list-style: disc; }
        .trust-methods li { margin-bottom: 8px; }


        /* Buttons */
        .save-button, .delete-button {
            color: white;
            border: none;
            padding: 8px 15px; /* Slightly larger padding */
            border-radius: 6px;
            cursor: pointer;
            margin-top: 8px; /* Reset margin-top here */
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .save-button { background-color: #27ae60; } /* Original green */
        .delete-button { background-color: #e74c3c; margin-left: 10px;} /* Original red */

        .save-button:hover { background-color: #2ecc71; transform: translateY(-1px); } /* Original hover */
        .delete-button:hover { background-color: #c0392b; transform: translateY(-1px); } /* Original hover */

        .button-group {
            display: flex;
            align-items: center;
            margin-top: 10px; /* Space above button group */
        }

        /* Feedback Messages */
        .save-status {
            font-size: 13px; /* Adjusted size */
            color: #27ae60; /* Original green */
            margin-left: 10px; /* Adjusted spacing */
            font-weight: 500;
            display: none; /* Hidden by default */
        }
        .save-status.deleted {
             color: #6c757d; /* Grey color for delete */
        }
        .error-message {
            color: #e74c3c; /* Original red */
            font-size: 13px; /* Adjusted size */
            margin-left: 10px; /* Adjusted spacing */
            font-weight: 500;
            display: none; /* Hidden by default */
        }

        /* Required Field Indication */
        .required-field {
            border: 2px solid #e74c3c !important;
            background-color: #ffeeee !important;
            /* Removing pulse animation as requested implicitly by reverting to original CSS */
            /* animation: pulse 1s infinite alternate; */
        }
        /* Original pulse animation if needed
        @keyframes pulse {
            from { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.4); }
            to { box-shadow: 0 0 0 6px rgba(231, 76, 60, 0); }
        }
        */


        /* Navigation Buttons (Bottom) */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px; /* Increased space */
            gap: 15px; /* Gap between buttons */
            border-top: 1px solid #eee; /* Separator line */
            padding-top: 25px;
        }
        .navigation-buttons a {
            text-decoration: none;
            padding: 12px 20px; /* Increased padding */
            color: white;
            background-color: #e67e22; /* Original color */
            border-radius: 6px; /* Adjusted radius */
            font-weight: 600; /* Bold text */
            flex: 1;
            text-align: center;
            transition: all 0.3s ease; /* Smooth transition */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 15px;
        }
        .navigation-buttons a:hover {
            background-color: #d35400; /* Original hover */
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
         .navigation-buttons a:first-child { /* Style for back button */
            background-color: #6c757d; /* Grey background for back */
         }
         .navigation-buttons a:first-child:hover {
            background-color: #5a6268;
         }


        /* Floating Warning Message */
        .floating-warning {
            background-color: #fff8e1; /* Original color */
            border-left: 4px solid #ffc107; /* Original border */
            padding: 15px 25px; /* Adjusted padding */
            color: #856404; /* Adjusted text color for contrast */
            display: none; /* Hidden by default */
            position: fixed;
            top: 75px; /* Adjusted position */
            left: 50%;
            transform: translateX(-50%);
            z-index: 1001; /* Ensure it's above sticky nav */
            border-radius: 8px; /* Consistent radius */
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            animation: slideDownFadeIn 0.4s ease-out;
            font-weight: 500;
            max-width: 90%; /* Limit width on mobile */
            text-align: center;
        }
        /* Reverted to original fadeIn/fadeOut */
        @keyframes fadeIn { from { opacity: 0; top: 50px; } to { opacity: 1; top: 70px; } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
        /* Keep slideDownFadeIn/fadeOutUp for warning specifically */
        @keyframes slideDownFadeIn { from { opacity: 0; top: 50px; } to { opacity: 1; top: 75px; } }
        @keyframes fadeOutUp { from { opacity: 1; top: 75px;} to { opacity: 0; top: 50px;} }

        /* Highlight class for text */
        .highlight {
            color: #e67e22;
            font-weight: bold;
        }

        /* --- Responsive Adjustments --- */
        @media (max-width: 768px) {
            h1 { font-size: 22px; padding: 15px; margin: 20px 15px; }
            h2 { font-size: 20px; }
            .container { padding: 20px; margin: 20px 15px; }
             .user-bar { padding: 10px 15px; font-size: 13px; }
             .user-name { font-size: 13px; } .user-email { font-size: 11px; }
             .logout-button { padding: 7px 12px; font-size: 12px; }
             .nav-tab { padding: 10px 5px; }
             .nav-tab a { margin: 0 5px; padding: 7px 10px; font-size: 13px;}
             .quote, .tip-box, .action-box, .question-box, .highlight-section, .skills-list, .ei-elements, .trust-methods { padding: 15px; margin: 20px 0; }
             .question-box h3 { font-size: 16px;}
             textarea, input[type="text"] { font-size: 14px; min-height: 80px;}
             td input[type="text"] { min-height: auto; }
             .navigation-buttons { flex-direction: column; padding-top: 20px; margin-top: 30px; }
             .navigation-buttons a { font-size: 14px; padding: 12px 15px;}
             .floating-warning { padding: 12px 20px; font-size: 14px; top: 65px; width: calc(100% - 30px); max-width: 400px; }
              @keyframes slideDownFadeIn { from { opacity: 0; top: 45px; } to { opacity: 1; top: 65px; } }
              @keyframes fadeOutUp { from { opacity: 1; top: 65px;} to { opacity: 0; top: 45px;} }
              table td { padding: 8px; }
              .button-group { flex-wrap: wrap; }
              .image-container img { max-height: 300px; /* Further reduce height on mobile */ }
        }

    </style>
</head>
<body>
    <!-- User Info Bar -->
    <header class="user-bar">
        <div class="user-info">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <div class="user-details">
                <span class="user-name" id="userName">Welcome back</span>
                <span class="user-email" id="userEmail">user@example.com</span>
            </div>
        </div>
        <button class="logout-button" onclick="logout()">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            Logout
        </button>
    </header>

    <!-- Navigation Tabs -->
    <nav class="nav-tab">
        <a href="index.html">Home</a>
        <a href="article1.html">Article 1</a>
        <a href="coaching-skills.html" class="active">Coaching Skills</a>
        <a href="coaching-individuals.html">Coaching Individuals</a>
        <a href="coaching-team.html">Team Coaching</a>
        <a href="coaching-yourself.html">Self Coaching</a>
        <a href="action-plan.html">Action Plan</a>
    </nav>

    <main>
        <!-- Original H1 -->
        <h1>1. Coaching Skills</h1>

        <div class="floating-warning" id="warningMessage">
            <strong>Action Required:</strong> Please complete all mandatory questions before proceeding.
        </div>

        <div class="container">

            <div class="highlight-section">
                <p>Feedback from people who have received coaching suggests that a coach's most important attributes are personal rapport, confidence, and a sense of humor.</p>
                <p>A report by the International Coaching Federation shows that thousands of coaching clients valued rapport and compatibility more highly than a coach's formal education, or his or her years of experience.</p>
                <p>This gives you an advantage – because, as a manager, you already have good working relationships with your team members.</p>
            </div>

            <div class="skills-list">
                <p>But coaching requires other important skills, too. These include:</p>
                <ul>
                    <li>Listening</li>
                    <li>Communicating</li>
                    <li>Questioning</li>
                    <li>Emotional intelligence</li>
                    <li>Developing trust</li>
                </ul>
                <p>In this chapter, we'll look at these skills in more detail, and discuss how you can improve each one.</p>
            </div>

            <div class="quote">
                "A coach is someone who tells you what you don't want to hear, and has you see what you don't want to see, so you can be who you have always known you can be."
            </div>

            <!-- Section 1: Listening Skills -->
            <h2>1.1. Improving Your Listening Skills</h2>

             <div class="image-container">
                 <!-- ** ORIGINAL IMAGE 1: Listening Skills ** -->
                 <img src="Active Listening.jpg"
                      alt="Active listening illustration showing two people engaged in conversation with listening cues"
                      onerror="this.onerror=null; this.src='https://via.placeholder.com/800x450/1abc9c/ffffff?text=Active+Listening+Placeholder';">
                 <p>Developing active listening skills is crucial for effective coaching</p>
            </div>

            <p>The ability to listen well is the most important coaching skill. It's key to understanding what the other person is saying on the surface, and to finding out what he or she means on a deeper level.</p>
            <p>Specifically, you need good active listening skills. This means that you give your full attention to the other person, and that you're not distracted by thinking of follow-up questions or counter-arguments. You also need to be aware of the person's body language, and how it aligns with (or differs from) what he says.</p>
            <p>When you're listening actively, give subtle clues to show that you're paying attention. For example, nod your head and use words like "Yes," or agree with an "Uh huh," when the person is talking. You can also paraphrase what you've just heard to confirm that you've understood it. For example, you might say, "What I'm hearing is..." or, "If I understand what you're saying...."</p>
            <p>Another useful skill is empathic listening. This is similar to active listening, but it also requires you to make a concerted effort to understand what the speaker is saying on an emotional level, as well as an intellectual level.</p>
            <p>To listen empathically, pay attention to what's being said – and what isn't. Keep in mind that what the speaker holds back is sometimes as important as what she communicates.</p>
            <p>Try to keep your own thoughts and opinions out of the conversation, and to focus on the other person. Listen carefully to his vocal tone and inflection, and watch his facial expressions closely. Ask yourself, "How is this person feeling about what he's telling me?"</p>
            <p>Mindful listening takes this a stage further, as it enables you to listen without judgment or criticism. The key is to listen "in the moment" – to be aware of your own thoughts and reactions to what is being said without allowing them to distract you from the speaker's message. This ensures that you remain open and receptive to other people's ideas.</p>

            <div class="tip-box">
                <strong>TIP</strong><br>
                Take this quiz, <em>How Good Are Your Listening Skills?</em>, to gain a better understanding of how well you listen, and to learn ways to improve.
            </div>
            <div class="action-box">
                <strong>ACTION</strong><br>
                Practice active listening and answer the questions below.
            </div>
            <div class="question-box">
                <h3>1. Did the other person's body language align with what she said? <span class="highlight">*</span></h3>
                <label for="listen-q1" class="sr-only">Answer for question 1 (body language alignment)</label>
                <textarea id="listen-q1" placeholder="Write your answer here..." class="required-answer" data-question="listen-q1" aria-describedby="error-listen-q1"></textarea>
                <div class="button-group">
                    <button class="save-button" onclick="saveAnswer('listen-q1', 'save-status-listen-q1', 'error-listen-q1')">Save Answer</button>
                    <button class="delete-button" onclick="deleteAnswer('listen-q1', 'save-status-listen-q1', 'error-listen-q1')">Delete Answer</button>
                    <span class="save-status" id="save-status-listen-q1">✓ Saved</span>
                    <span class="error-message" id="error-listen-q1">Please enter an answer before saving.</span>
                </div>
            </div>
            <div class="question-box">
                <h3>2. Did active listening help you to understand the other person? If so, how? <span class="highlight">*</span></h3>
                <label for="listen-q2" class="sr-only">Answer for question 2 (understanding improvement)</label>
                <textarea id="listen-q2" placeholder="Write your answer here..." class="required-answer" data-question="listen-q2" aria-describedby="error-listen-q2"></textarea>
                <div class="button-group">
                    <button class="save-button" onclick="saveAnswer('listen-q2', 'save-status-listen-q2', 'error-listen-q2')">Save Answer</button>
                    <button class="delete-button" onclick="deleteAnswer('listen-q2', 'save-status-listen-q2', 'error-listen-q2')">Delete Answer</button>
                    <span class="save-status" id="save-status-listen-q2">✓ Saved</span>
                    <span class="error-message" id="error-listen-q2">Please enter an answer before saving.</span>
                </div>
            </div>
            <div class="question-box">
                <h3>3. How could active listening improve your relationships in your personal and professional lives? <span class="highlight">*</span></h3>
                <label for="listen-q3" class="sr-only">Answer for question 3 (relationship improvement)</label>
                <textarea id="listen-q3" placeholder="Write your answer here..." class="required-answer" data-question="listen-q3" aria-describedby="error-listen-q3"></textarea>
                <div class="button-group">
                    <button class="save-button" onclick="saveAnswer('listen-q3', 'save-status-listen-q3', 'error-listen-q3')">Save Answer</button>
                    <button class="delete-button" onclick="deleteAnswer('listen-q3', 'save-status-listen-q3', 'error-listen-q3')">Delete Answer</button>
                    <span class="save-status" id="save-status-listen-q3">✓ Saved</span>
                    <span class="error-message" id="error-listen-q3">Please enter an answer before saving.</span>
                </div>
            </div>

            <!-- Section 2: Communication Skills -->
            <h2>1.2. Developing Good Communication Skills</h2>
            <p>To be an effective coach, you need to know how to communicate your thoughts and ideas clearly...</p>
             <div class="image-container">
                 <!-- ** ORIGINAL IMAGE 2: Communication Skills ** -->
                 <img src="https://images.unsplash.com/photo-1434030216411-0b793f4b4173?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                      alt="Two people communicating effectively in a professional setting"
                      onerror="this.onerror=null; this.src='https://via.placeholder.com/800x400/f39c12/ffffff?text=Communication+Placeholder';">
                 <p>Effective communication is key to successful coaching</p>
             </div>
            <p>Here's an example...</p>
            <div class="quote"> ... </div>
            <p>At first, it might seem...</p>
            <p>By asking a different set of questions...</p>
            <p>This simple example shows...</p>
            <p>You can avoid this in your coaching conversations by learning to use Clean Language...</p>
            <p>The Clean Language technique is useful...</p>
            <p>Try to limit your own use of metaphors...</p>
            <p>Here are a few examples of common metaphors:</p>
            <ul> ... </ul>
            <p>It can be a challenge to identify metaphors...</p>
            <p>When your coachee uses a metaphor, you can ask a series of Clean Language questions...</p>
            <ul> ... </ul>
            <p>When you use Clean Language, speak more slowly...</p>
            <p>Using Clean Language takes practice...</p>
            <div class="tip-box"> ... </div>
            <div class="action-box"> ... </div>
            <table class="metaphor-table">
                <thead> <tr> <th>Metaphors You Use</th> </tr> </thead>
                <tbody>
                     <tr> <td> <label for="m1" class="sr-only">Metaphor 1</label> <input id="m1" type="text" class="required-answer" placeholder="Enter your metaphor here..." data-question="m1" aria-describedby="error-m1"> <div class="button-group"> <button class="save-button" onclick="saveAnswer('m1', 'save-status-m1', 'error-m1')">Save</button> <button class="delete-button" onclick="deleteAnswer('m1', 'save-status-m1', 'error-m1')">Delete</button> <span class="save-status" id="save-status-m1">✓ Saved</span> <span class="error-message" id="error-m1">Please enter text.</span> </div> </td> </tr>
                     <tr> <td> <label for="m2" class="sr-only">Metaphor 2</label> <input id="m2" type="text" class="required-answer" placeholder="Enter your metaphor here..." data-question="m2" aria-describedby="error-m2"> <div class="button-group"> <button class="save-button" onclick="saveAnswer('m2', 'save-status-m2', 'error-m2')">Save</button> <button class="delete-button" onclick="deleteAnswer('m2', 'save-status-m2', 'error-m2')">Delete</button> <span class="save-status" id="save-status-m2">✓ Saved</span> <span class="error-message" id="error-m2">Please enter text.</span> </div> </td> </tr>
                     <tr> <td> <label for="m3" class="sr-only">Metaphor 3</label> <input id="m3" type="text" class="required-answer" placeholder="Enter your metaphor here..." data-question="m3" aria-describedby="error-m3"> <div class="button-group"> <button class="save-button" onclick="saveAnswer('m3', 'save-status-m3', 'error-m3')">Save</button> <button class="delete-button" onclick="deleteAnswer('m3', 'save-status-m3', 'error-m3')">Delete</button> <span class="save-status" id="save-status-m3">✓ Saved</span> <span class="error-message" id="error-m3">Please enter text.</span> </div> </td> </tr>
                     <tr> <td> <label for="m4" class="sr-only">Metaphor 4</label> <input id="m4" type="text" class="required-answer" placeholder="Enter your metaphor here..." data-question="m4" aria-describedby="error-m4"> <div class="button-group"> <button class="save-button" onclick="saveAnswer('m4', 'save-status-m4', 'error-m4')">Save</button> <button class="delete-button" onclick="deleteAnswer('m4', 'save-status-m4', 'error-m4')">Delete</button> <span class="save-status" id="save-status-m4">✓ Saved</span> <span class="error-message" id="error-m4">Please enter text.</span> </div> </td> </tr>
                     <tr> <td> <label for="m5" class="sr-only">Metaphor 5</label> <input id="m5" type="text" class="required-answer" placeholder="Enter your metaphor here..." data-question="m5" aria-describedby="error-m5"> <div class="button-group"> <button class="save-button" onclick="saveAnswer('m5', 'save-status-m5', 'error-m5')">Save</button> <button class="delete-button" onclick="deleteAnswer('m5', 'save-status-m5', 'error-m5')">Delete</button> <span class="save-status" id="save-status-m5">✓ Saved</span> <span class="error-message" id="error-m5">Please enter text.</span> </div> </td> </tr>
                     <tr> <td> <label for="m6" class="sr-only">Metaphor 6</label> <input id="m6" type="text" class="required-answer" placeholder="Enter your metaphor here..." data-question="m6" aria-describedby="error-m6"> <div class="button-group"> <button class="save-button" onclick="saveAnswer('m6', 'save-status-m6', 'error-m6')">Save</button> <button class="delete-button" onclick="deleteAnswer('m6', 'save-status-m6', 'error-m6')">Delete</button> <span class="save-status" id="save-status-m6">✓ Saved</span> <span class="error-message" id="error-m6">Please enter text.</span> </div> </td> </tr>
                </tbody>
            </table>
            <div class="action-box"> ... </div>

            <!-- Section 3: Questioning Skills -->
            <h2>1.3. Asking Better Questions</h2>
             <p>Great coaches listen more than they talk...</p>
             <p>Concentrate on asking open-ended questions...</p>
             <p>Then, probe for more information...</p>
             <p>Good questioners also give people adequate time...</p>
             <div class="tip-box"> ... </div>

            <!-- Section 4: Emotional Intelligence -->
            <h2>1.4. Learning Emotional Intelligence</h2>
            <p>Emotional intelligence is about recognizing your emotions...</p>
            <p>When you have emotional intelligence...</p>
            <div class="ei-elements"> ... </div>
            <div class="action-box"> ... </div>
             <!-- EI Question 1 -->
             <div class="question-box">
                 <h3>1. Think about how you react...<span class="highlight">*</span></h3>
                 <label for="eq1" class="sr-only">Answer for EI question 1 (stress reaction)</label>
                 <textarea id="eq1" placeholder="Write your answer here..." class="required-answer" data-question="eq1" aria-describedby="error-eq1"></textarea>
                 <div class="button-group">
                     <button class="save-button" onclick="saveAnswer('eq1', 'save-status-eq1', 'error-eq1')">Save Answer</button>
                     <button class="delete-button" onclick="deleteAnswer('eq1', 'save-status-eq1', 'error-eq1')">Delete Answer</button>
                     <span class="save-status" id="save-status-eq1">✓ Saved</span>
                     <span class="error-message" id="error-eq1">Please enter an answer before saving.</span>
                 </div>
             </div>
             <!-- EI Question 2 -->
             <div class="question-box">
                 <h3>2. Think back to the last time...<span class="highlight">*</span></h3>
                 <label for="eq2" class="sr-only">Answer for EI question 2 (emotional control reflection)</label>
                 <textarea id="eq2" placeholder="Write your answer here..." class="required-answer" data-question="eq2" aria-describedby="error-eq2"></textarea>
                 <div class="button-group">
                     <button class="save-button" onclick="saveAnswer('eq2', 'save-status-eq2', 'error-eq2')">Save Answer</button>
                     <button class="delete-button" onclick="deleteAnswer('eq2', 'save-status-eq2', 'error-eq2')">Delete Answer</button>
                     <span class="save-status" id="save-status-eq2">✓ Saved</span>
                     <span class="error-message" id="error-eq2">Please enter an answer before saving.</span>
                 </div>
             </div>
             <!-- SWOT Analysis Questions -->
             <div class="question-box">
                 <h3>3. Conduct a Personal SWOT Analysis...<span class="highlight">*</span></h3>
                 <p>Strengths:</p>
                 <label for="swot-strengths" class="sr-only">SWOT Strengths</label>
                 <textarea id="swot-strengths" placeholder="Write your strengths here..." class="required-answer" data-question="swot-strengths" aria-describedby="error-swot-strengths"></textarea>
                 <div class="button-group">
                     <button class="save-button" onclick="saveAnswer('swot-strengths', 'save-status-swot-strengths', 'error-swot-strengths')">Save Answer</button>
                     <button class="delete-button" onclick="deleteAnswer('swot-strengths', 'save-status-swot-strengths', 'error-swot-strengths')">Delete Answer</button>
                     <span class="save-status" id="save-status-swot-strengths">✓ Saved</span>
                     <span class="error-message" id="error-swot-strengths">Please enter an answer before saving.</span>
                 </div>
                 <h3>Take a look at your list...<span class="highlight">*</span></h3>
                 <label for="swot-ideas" class="sr-only">SWOT Ideas for coaching relationships</label>
                 <textarea id="swot-ideas" placeholder="Write your ideas here..." class="required-answer" data-question="swot-ideas" aria-describedby="error-swot-ideas"></textarea>
                 <div class="button-group">
                     <button class="save-button" onclick="saveAnswer('swot-ideas', 'save-status-swot-ideas', 'error-swot-ideas')">Save Answer</button>
                     <button class="delete-button" onclick="deleteAnswer('swot-ideas', 'save-status-swot-ideas', 'error-swot-ideas')">Delete Answer</button>
                     <span class="save-status" id="save-status-swot-ideas">✓ Saved</span>
                     <span class="error-message" id="error-swot-ideas">Please enter an answer before saving.</span>
                 </div>
                 <h3>Now, list your weaknesses.<span class="highlight">*</span></h3>
                 <p>Weaknesses:</p>
                 <label for="swot-weaknesses" class="sr-only">SWOT Weaknesses</label>
                 <textarea id="swot-weaknesses" placeholder="Write your weaknesses here..." class="required-answer" data-question="swot-weaknesses" aria-describedby="error-swot-weaknesses"></textarea>
                 <div class="button-group">
                     <button class="save-button" onclick="saveAnswer('swot-weaknesses', 'save-status-swot-weaknesses', 'error-swot-weaknesses')">Save Answer</button>
                     <button class="delete-button" onclick="deleteAnswer('swot-weaknesses', 'save-status-swot-weaknesses', 'error-swot-weaknesses')">Delete Answer</button>
                     <span class="save-status" id="save-status-swot-weaknesses">✓ Saved</span>
                     <span class="error-message" id="error-swot-weaknesses">Please enter an answer before saving.</span>
                 </div>
                 <h3>How might these weaknesses affect you...<span class="highlight">*</span></h3>
                 <label for="swot-thoughts" class="sr-only">SWOT Thoughts on weaknesses</label>
                 <textarea id="swot-thoughts" placeholder="Write your thoughts here..." class="required-answer" data-question="swot-thoughts" aria-describedby="error-swot-thoughts"></textarea>
                 <div class="button-group">
                     <button class="save-button" onclick="saveAnswer('swot-thoughts', 'save-status-swot-thoughts', 'error-swot-thoughts')">Save Answer</button>
                     <button class="delete-button" onclick="deleteAnswer('swot-thoughts', 'save-status-swot-thoughts', 'error-swot-thoughts')">Delete Answer</button>
                     <span class="save-status" id="save-status-swot-thoughts">✓ Saved</span>
                     <span class="error-message" id="error-swot-thoughts">Please enter an answer before saving.</span>
                 </div>
             </div>

            <!-- Section 5: Building Trust -->
            <h2>1.5. Building Trust</h2>
            <p>Your coaching relationships with your team members are built on confidentiality and trust...</p>
            <div class="trust-methods"> ... </div>
            <div class="tip-box"> ... </div>
            <div class="action-box"> ... </div>
            <div class="action-box"> ... </div>
             <!-- Final Question 1 -->
             <div class="question-box">
                 <h3>1. Which of the skills... struggle with the most? Why?<span class="highlight">*</span></h3>
                 <label for="final-q1" class="sr-only">Answer for final question 1 (biggest struggle)</label>
                 <textarea id="final-q1" placeholder="Write your answer here..." class="required-answer" data-question="final-q1" aria-describedby="error-final-q1"></textarea>
                 <div class="button-group">
                     <button class="save-button" onclick="saveAnswer('final-q1', 'save-status-final-q1', 'error-final-q1')">Save Answer</button>
                     <button class="delete-button" onclick="deleteAnswer('final-q1', 'save-status-final-q1', 'error-final-q1')">Delete Answer</button>
                     <span class="save-status" id="save-status-final-q1">✓ Saved</span>
                     <span class="error-message" id="error-final-q1">Please enter an answer before saving.</span>
                 </div>
             </div>
             <!-- Final Question 2 -->
             <div class="question-box">
                 <h3>2. What can you do to improve these skills?<span class="highlight">*</span></h3>
                 <label for="final-q2" class="sr-only">Answer for final question 2 (improvement steps)</label>
                 <textarea id="final-q2" placeholder="Write your answer here..." class="required-answer" data-question="final-q2" aria-describedby="error-final-q2"></textarea>
                 <div class="button-group">
                     <button class="save-button" onclick="saveAnswer('final-q2', 'save-status-final-q2', 'error-final-q2')">Save Answer</button>
                     <button class="delete-button" onclick="deleteAnswer('final-q2', 'save-status-final-q2', 'error-final-q2')">Delete Answer</button>
                     <span class="save-status" id="save-status-final-q2">✓ Saved</span>
                     <span class="error-message" id="error-final-q2">Please enter an answer before saving.</span>
                 </div>
             </div>

            <!-- Section 6: Drawing This Together -->
            <h2>1.6. Drawing This Together</h2>
            <p>In this chapter, we learned about the skills that you need to be a great coach...</p>
            <p>In the next chapter, we'll look at the coaching process itself.</p>
            <div class="image-container">
                 <!-- ** ORIGINAL IMAGE 3: Coaching Relationship ** -->
                 <img src="https://images.unsplash.com/photo-1552664730-d307ca884978?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                      alt="Coach and coachee having a discussion in a professional setting"
                      onerror="this.onerror=null; this.src='https://via.placeholder.com/800x400/e67e22/ffffff?text=Coaching+Relationship+Placeholder';">
                 <p>Building strong coaching relationships through trust and communication</p>
            </div>
            <p style="font-size: 13px; color: #6c757d; margin-top: 5px;"><span class="highlight">*</span> Required field</p>

            <!-- Navigation Buttons -->
            <div class="navigation-buttons">
                <a href="article1.html" class="nav-button">← Back: Intro</a>
                <a href="coaching-individuals.html" class="nav-button" id="nextButton">Next: Coaching Individuals →</a>
            </div>
        </div> <!-- /.container -->
    </main>

    <script>
        // --- Configuration ---
        const formspreeEndpoint = 'https://formspree.io/f/xzzeqvea'; // Your Formspree Endpoint URL
        const localStorageKeyPrefix = 'courseAnswers_';
        const currentPageKey = 'coachingSkills'; // Unique key for this page
        const localStorageKey = `${localStorageKeyPrefix}${currentPageKey}`;
        const currentUserKey = 'currentUser';

        // --- Combined Save/Delete Functionality ---
        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = getCurrentUser();
            if (!currentUser || !currentUser.email) {
                console.error("User not logged in or email missing.");
                window.location.href = `login.html?redirect=${encodeURIComponent(window.location.pathname)}`;
                return;
            }
            displayUserInfo(currentUser);
            loadUserAnswers(currentUser.email);
            setupEventListeners(currentUser.email);
            highlightActiveNav();
        });

        // --- User Info & Authentication ---
        function getCurrentUser() {
            try {
                const userDataString = localStorage.getItem(currentUserKey);
                return userDataString ? JSON.parse(userDataString) : null;
            } catch (error) {
                console.error("Error parsing user data from localStorage:", error);
                return null;
            }
        }
        function displayUserInfo(user) {
            document.getElementById('userName').textContent = `Welcome, ${user.name || 'User'}`;
            document.getElementById('userEmail').textContent = user.email;
        }
        function logout() {
            localStorage.removeItem('loggedIn');
            localStorage.removeItem(currentUserKey);
            window.location.href = 'login.html';
        }
        function highlightActiveNav() {
             const currentPath = window.location.pathname.split('/').pop();
             const navLinks = document.querySelectorAll('.nav-tab a');
             navLinks.forEach(link => {
                 link.classList.toggle('active', link.getAttribute('href') === currentPath);
             });
         }

        // --- Answer Handling (Local Storage - Page Specific) ---
        function loadUserAnswers(userEmail) {
             if (!userEmail) return;
             const allPageAnswers = JSON.parse(localStorage.getItem(localStorageKey)) || {};
             const userAnswers = allPageAnswers[userEmail] || {};
             document.querySelectorAll('.required-answer').forEach(field => {
                 const questionId = field.getAttribute('data-question');
                 const savedAnswer = userAnswers[questionId];
                 const statusId = getStatusIdForField(field); // Use helper
                 const statusElement = document.getElementById(statusId);

                 if (savedAnswer !== undefined) {
                     field.value = savedAnswer;
                     field.classList.remove('required-field');
                     hideError(getErrorIdForField(field)); // Use helper
                     if (savedAnswer.trim() !== '' && statusElement) {
                         showSaveStatus(statusId, '✓ Saved');
                     } else if (statusElement) {
                         statusElement.style.display = 'none';
                     }
                 } else {
                     field.value = '';
                     if (statusElement) statusElement.style.display = 'none';
                 }
             });
        }
        function saveAnswerToStorage(userEmail, questionId, answer) {
            if (!userEmail) return false;
            const allPageAnswers = JSON.parse(localStorage.getItem(localStorageKey)) || {};
            if (!allPageAnswers[userEmail]) allPageAnswers[userEmail] = {};
            allPageAnswers[userEmail][questionId] = answer;
            try {
                localStorage.setItem(localStorageKey, JSON.stringify(allPageAnswers));
                return true;
            } catch (error) {
                 console.error("Error saving to localStorage:", error);
                 alert("Could not save answer. Browser storage might be full.");
                 return false;
            }
        }
        function deleteAnswerFromStorage(userEmail, questionId) {
             if (!userEmail) return false;
             const allPageAnswers = JSON.parse(localStorage.getItem(localStorageKey)) || {};
             let updated = false;
             if (allPageAnswers[userEmail] && allPageAnswers[userEmail][questionId] !== undefined) {
                 delete allPageAnswers[userEmail][questionId];
                 updated = true;
                 if (Object.keys(allPageAnswers[userEmail]).length === 0) delete allPageAnswers[userEmail];
             }
             if(updated) {
                try {
                    localStorage.setItem(localStorageKey, JSON.stringify(allPageAnswers));
                    return true;
                } catch (error) {
                    console.error("Error saving to localStorage after delete:", error);
                    alert("Could not update storage after deleting answer.");
                    return false;
                }
             }
             return false;
        }

        // --- Event Listeners Setup ---
        function setupEventListeners(userEmail) {
             document.querySelectorAll('.required-answer').forEach(field => {
                field.addEventListener('input', function() {
                    if (this.value.trim() !== '') {
                        this.classList.remove('required-field');
                        hideError(getErrorIdForField(this)); // Use helper
                    }
                 });
             });
            const nextButton = document.getElementById('nextButton');
             if(nextButton) {
                 nextButton.addEventListener('click', function(e) {
                    if (!validateAllAnswers(true)) {
                        e.preventDefault();
                        showWarningMessage();
                    }
                 });
             }
        }

        // --- UI Feedback & Validation ---
        function validateAllAnswers(showErrors = false) {
             let allAnswered = true;
            document.querySelectorAll('.required-answer').forEach(field => {
                const errorId = getErrorIdForField(field); // Use helper
                if (field.value.trim() === '') {
                    allAnswered = false;
                    if (showErrors) {
                        field.classList.add('required-field');
                        // Pass field to showError to allow focus
                        showError(errorId, field, 'This field is required.');
                    }
                } else {
                    field.classList.remove('required-field');
                    hideError(errorId); // Use helper
                }
            });
            return allAnswered;
        }
        function showWarningMessage() {
             const warningElement = document.getElementById('warningMessage');
             if (!warningElement) return; // Exit if warning element doesn't exist
            warningElement.style.display = 'block';
            warningElement.style.animation = 'slideDownFadeIn 0.4s ease-out';
            const firstEmptyField = document.querySelector('.required-answer.required-field');
            if (firstEmptyField) {
                firstEmptyField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                setTimeout(() => firstEmptyField.focus({ preventScroll: true }), 500);
            }
            // Auto-hide
            clearTimeout(warningElement.timer); // Clear previous timer if any
            warningElement.timer = setTimeout(() => {
                warningElement.style.animation = 'fadeOutUp 0.5s ease-out forwards';
                 setTimeout(() => {
                      warningElement.style.display = 'none';
                      warningElement.style.animation = '';
                 }, 500);
            }, 4000);
        }
        function showSaveStatus(statusId, message = '✓ Saved') {
             const statusElement = document.getElementById(statusId);
             if (!statusElement) return;
             statusElement.textContent = message;
             statusElement.classList.remove('deleted');
             if (message.includes('deleted')) statusElement.classList.add('deleted');
             statusElement.style.display = 'inline-block';
             clearTimeout(statusElement.timer); // Clear previous timer
             statusElement.timer = setTimeout(() => { statusElement.style.display = 'none'; }, 3000);
        }
        function showError(errorId, field, message = 'This field is required.') {
              const errorElement = document.getElementById(errorId);
             if (!errorElement) return;
             errorElement.textContent = message;
             errorElement.style.display = 'inline-block';
             // Add required class to the field passed, if provided
             if (field) field.classList.add('required-field');
        }
        function hideError(errorId) {
              const errorElement = document.getElementById(errorId);
              if (!errorElement) return;
             errorElement.style.display = 'none';
             // Note: We don't remove 'required-field' class here,
             // it's removed on input or successful validation/save.
        }

        // --- Helper functions to get related element IDs ---
        // (These helpers assume a naming convention: error-*, save-status-*)
        // (And that grouped actions pass the base ID part in the onclick call)
        function getStatusIdForField(field) {
             const questionId = field.getAttribute('data-question');
             // Check closest button group for a grouped save ID
             const groupButton = field.closest('.question-box, td')?.querySelector('.save-button[onclick*="saveAnswer("]');
             if (groupButton) {
                 const match = groupButton.getAttribute('onclick').match(/saveAnswer\(.*?,\s*'([^']*)'/);
                 if (match && match[1]) return match[1]; // Found shared status ID
             }
             // Fallback to individual ID pattern
             return `save-status-${questionId}`;
        }
        function getErrorIdForField(field) {
              const questionId = field.getAttribute('data-question');
               // Check closest button group for a grouped error ID
              const groupButton = field.closest('.question-box, td')?.querySelector('.save-button[onclick*="saveAnswer("]');
              if (groupButton) {
                  const match = groupButton.getAttribute('onclick').match(/saveAnswer\(.*?,\s*'.*?',\s*'([^']*)'/);
                   if (match && match[1]) return match[1]; // Found shared error ID
              }
              // Fallback to individual ID pattern
              return `error-${questionId}`;
        }

        // --- Actions (Save, Delete) ---
        function saveAnswer(questionIds, statusId, errorId) {
            const currentUser = getCurrentUser();
            if (!currentUser || !currentUser.email) { alert('Session expired.'); window.location.href = 'login.html'; return; }
            const ids = Array.isArray(questionIds) ? questionIds : [questionIds];
            let allValid = true; const answersToSave = {}; let firstInvalidField = null;
            const generalErrorElement = document.getElementById(errorId);
            if(generalErrorElement) generalErrorElement.style.display = 'none'; // Hide general error first

            ids.forEach(id => {
                const field = document.querySelector(`.required-answer[data-question="${id}"]`);
                if (!field) { console.error(`Field not found: ${id}`); allValid = false; return; }
                const answer = field.value.trim();
                const specificErrorId = getErrorIdForField(field); // Get specific ID for this field

                field.classList.remove('required-field'); // Always remove red border first
                hideError(specificErrorId); // Hide specific error first

                if (!answer) { // If it's empty after trimming
                    allValid = false;
                    // Show specific error and mark field
                    showError(specificErrorId, field, 'This field is required.');
                    if (!firstInvalidField) firstInvalidField = field; // Track first invalid field for focus
                } else {
                    answersToSave[id] = field.value; // Store original value if valid
                }
            });

            if (!allValid) {
                 // Show general error message only if multiple fields were involved AND an error occurred
                 if(generalErrorElement && ids.length > 1) {
                      generalErrorElement.textContent = "Please complete all required parts.";
                      generalErrorElement.style.display = 'inline-block';
                 }
                 if(firstInvalidField) firstInvalidField.focus(); // Focus the first field that failed validation
                return;
            }

            // Proceed to save if all valid
            let saveSuccess = true;
            Object.keys(answersToSave).forEach(id => {
                if (!saveAnswerToStorage(currentUser.email, id, answersToSave[id])) {
                    saveSuccess = false; // Track if any save failed (e.g., storage full)
                }
                // Submit each valid answer individually to Formspree
                submitToFormspree(currentUser.email, id, answersToSave[id]);
            });

            if (saveSuccess) {
                 showSaveStatus(statusId); // Show general save status
            }
            // If save failed, message is shown by saveAnswerToStorage
        }

        function deleteAnswer(questionIds, statusId, errorId) {
             const currentUser = getCurrentUser();
             if (!currentUser || !currentUser.email) { alert('Session expired.'); window.location.href = 'login.html'; return; }
             const ids = Array.isArray(questionIds) ? questionIds : [questionIds];
             let deletedSomething = false;

             // Hide general status/error messages first
             const generalStatusElement = document.getElementById(statusId);
             const generalErrorElement = document.getElementById(errorId);
             if(generalStatusElement) generalStatusElement.style.display = 'none';
             if(generalErrorElement) generalErrorElement.style.display = 'none';

             ids.forEach(id => {
                 const field = document.querySelector(`.required-answer[data-question="${id}"]`);
                 if (!field) return; // Skip if field not found

                 // Clear specific messages/styles for this field
                 hideError(getErrorIdForField(field));
                 const specificStatusElement = document.getElementById(getStatusIdForField(field));
                 if (specificStatusElement) specificStatusElement.style.display = 'none';
                 field.classList.remove('required-field');

                 // Clear the field value
                 field.value = '';

                 // Attempt to remove from Local Storage
                 if (deleteAnswerFromStorage(currentUser.email, id)) {
                     deletedSomething = true;
                 }
             });

            if (deletedSomething) {
                 showSaveStatus(statusId, 'Answer(s) deleted'); // Show general delete confirmation
            } else {
                 console.log("Nothing to delete from storage for these IDs.");
                 // Optionally show a message like "No answer saved to delete" using showSaveStatus
                 // showSaveStatus(statusId, 'No answer to delete');
            }
        }

        // --- Formspree Submission ---
        function submitToFormspree(userEmail, questionId, answer) {
             if (!formspreeEndpoint || !userEmail) return;
            const formData = new FormData();
            formData.append('email', userEmail);
            formData.append('page_key', currentPageKey);
            formData.append('question_id', questionId);
            formData.append('answer_text', answer);
            const currentUser = getCurrentUser();
            if (currentUser?.name) formData.append('user_name', currentUser.name);
            fetch(formspreeEndpoint, { method: 'POST', body: formData, headers: { 'Accept': 'application/json' } })
            .then(response => {
                if (response.ok) console.log(`Formspree: ${currentPageKey}/${questionId} submitted.`);
                else response.json().then(data => console.error(`Formspree Error (${currentPageKey}/${questionId}):`, data.errors?.map(e => e.message).join(', ') || `Status ${response.status}`))
                                    .catch(() => console.error(`Formspree Error (${currentPageKey}/${questionId}): Status ${response.status}`));
            })
            .catch(error => console.error(`Formspree Network Error (${currentPageKey}/${questionId}):`, error));
        }

    </script>

</body>
</html>
