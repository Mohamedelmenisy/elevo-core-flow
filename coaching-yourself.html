<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self Coaching</title>
    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            margin: 0;
            padding: 0;
            line-height: 1.6;
            background-color: #f9f9f9;
            color: #333;
        }

        /* User Bar Styles */
        .user-bar {
            background-color: #34495e;
            padding: 10px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            font-size: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            font-size: 15px;
        }

        .user-email {
            font-size: 13px;
            opacity: 0.8;
        }

        .logout-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .logout-button:hover {
            background-color: #c0392b;
            transform: translateY(-1px);
        }

        .logout-button:active {
            transform: translateY(0);
        }

        /* Navigation Tabs */
        .nav-tab {
            background-color: #2c3e50;
            padding: 10px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-tab a {
            color: white;
            text-decoration: none;
            margin: 0 10px;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        .nav-tab a:hover {
            background-color: #34495e;
        }

        /* Main Content Styles */
        header {
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto 30px;
            background: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
             border-radius: 8px;
        }

        .section-title {
            color: #3498db;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
            border-bottom: 2px solid #3498db;
            padding-bottom: 8px;
        }

        .highlight-section {
            background-color: rgba(230, 126, 34, 0.1);
            padding: 15px;
            border-left: 4px solid #e67e22;
            border-radius: 0 4px 4px 0;
            margin: 15px 0;
        }

        .action-card {
            background-color: #e67e22;
            color: white;
            padding: 20px;
            border-radius: 6px;
            margin: 20px 0;
        }
         .action-card h3 { color: white; } /* Make h3 white inside action card */

        .media-container {
            text-align: center;
            margin: 20px 0;
        }

        .media-container img {
            max-width: 100%;
            height: auto;
            border-radius: 6px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .caption {
            font-style: italic;
            color: #777;
            margin-top: 8px;
            font-size: 14px;
        }

        .question-item {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }

        .question-text {
            color: #2c3e50;
            font-weight: bold;
            margin-bottom: 10px;
        }

        /* Unified class for all answer fields */
        .editable-answer {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 5px 0;
            background-color: white;
            min-height: 40px;
            line-height: 1.5;
            display: block;
            font-size: 14px;
        }

        /* Specific styles for textareas */
        textarea.editable-answer {
            min-height: 80px;
            resize: vertical;
        }

        .editable-answer:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        .save-btn {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-right: 5px;
            font-size: 13px;
        }

        .delete-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 13px;
        }

        .save-btn:hover { background-color: #219653; }
        .delete-btn:hover { background-color: #c0392b; }

        .saved-message {
            color: #27ae60;
            font-size: 12px;
            margin-left: 10px;
            display: none;
            font-style: italic;
        }
         .inline-error-message {
             color: #e74c3c;
             font-size: 12px;
             margin-left: 10px;
             display: none;
             font-style: italic;
             font-weight: 500;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 14px;
        }

        table, th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
            font-weight: 600;
        }

        .action-table {
            width: 100%;
            margin: 20px 0;
            background-color: #f8f9fa;
            border-radius: 6px;
            overflow: hidden;
            border: 1px solid #ddd;
        }
        .action-table th { background-color: #3498db; color: white; text-align: center; }
        .action-table td { vertical-align: top; }

        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 20px;
        }

        .button {
            background-color: #3498db;
            color: white;
            padding: 12px 20px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: bold;
            border: none;
            cursor: pointer;
            flex: 1;
            text-align: center;
            transition: all 0.3s;
            font-size: 15px;
        }
        .button:hover { background-color: #2980b9; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .button:active { transform: translateY(0); box-shadow: none; }
        .button.back { background-color: #95a5a6; }
        .button.back:hover { background-color: #7f8c8d; }

        .warning-message { /* General warning */
            background-color: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            color: #333;
            display: none;
            font-size: 14px;
            line-height: 1.6;
            border-radius: 4px;
            font-weight: 500;
        }

        .required-field { /* Style for required fields needing input */
            border: 2px solid #e74c3c !important;
            background-color: #fff2f2 !important;
            animation: pulse 1.5s infinite alternate ease-in-out;
        }
        @keyframes pulse {
            from { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.3); }
            to { box-shadow: 0 0 0 5px rgba(231, 76, 60, 0); }
        }

        @media (max-width: 600px) {
            .button-container { flex-direction: column; }
        }

        /* Section specific styles */
        .model-section, .trust-section, .rapport-section, .informal-tips {
            padding: 20px;
            border-radius: 6px;
            margin: 20px 0;
        }
        .model-section { background-color: rgba(52, 152, 219, 0.08); border-left: 4px solid #3498db; }
        .trust-section { background-color: rgba(46, 204, 113, 0.08); border-left: 4px solid #2ecc71; }
        .rapport-section { background-color: rgba(155, 89, 182, 0.08); border-left: 4px solid #9b59b6; }
        .informal-tips { background-color: rgba(241, 196, 15, 0.08); border-left: 4px solid #f1c40f; }

        .orange-header {
            background-color: #e67e22;
            color: white;
            padding: 10px;
            text-align: center;
            border-radius: 4px 4px 0 0;
            font-size: 14px;
            font-weight: bold;
        }
         .orange-row td { background-color: rgba(230, 126, 34, 0.05); }
         .orange-row .editable-answer { margin: 5px 0; }

        .drawing-together {
            display: flex; align-items: center; gap: 20px;
            background-color: rgba(155, 89, 182, 0.08); padding: 20px;
            border-radius: 8px; margin: 20px 0; border-left: 4px solid #9b59b6;
        }
        .drawing-icon { font-size: 30px; color: #9b59b6; flex-shrink: 0; }

        .answer-buttons { /* Container for save/delete/status/error */
            display: flex; gap: 8px; align-items: center;
            margin-top: 8px; flex-wrap: wrap;
        }
         /* Styles for table action buttons */
        .table-action-buttons {
             margin-top: 15px; text-align: right;
        }

         /* Custom styles for the Explore Options table */
        .options-table th { color: white; text-align: center; }
        .options-table th:nth-child(1) { background-color: #3498db; } /* Blue */
        .options-table th:nth-child(2) { background-color: #2ecc71; } /* Green */
        .options-table th:nth-child(3) { background-color: #e74c3c; } /* Red */

        /* Custom styles for the Establish the Will table */
        .will-table th { color: white; text-align: center;}
        .will-table th:nth-child(1) { background-color: #3498db; } /* Blue */
        .will-table th:nth-child(2) { background-color: #9b59b6; } /* Purple */
        .will-table th:nth-child(3) { background-color: #e67e22; } /* Orange */

        /* Modal Styles */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.6); z-index: 1000; justify-content: center; align-items: center;
            animation: modalFadeInBackground 0.3s ease-out;
        }
        @keyframes modalFadeInBackground { from { background: rgba(0,0,0,0); } to { background: rgba(0,0,0,0.6); } }
        .modal-content {
            background: white; padding: 30px 40px; border-radius: 8px; max-width: 450px;
            text-align: center; box-shadow: 0 5px 20px rgba(0,0,0,0.2); position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }
        @keyframes modalSlideIn { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
        .modal-button {
            background-color: #27ae60; color: white; border: none; padding: 12px 25px;
            border-radius: 5px; cursor: pointer; margin-top: 25px; font-weight: bold;
            transition: all 0.3s; font-size: 15px;
        }
        .modal-button:hover { background-color: #219653; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
        .close-modal {
            position: absolute; top: 15px; right: 15px; background: none; border: none;
            font-size: 24px; cursor: pointer; color: #aaa; transition: color 0.3s;
        }
        .close-modal:hover { color: #555; }
    </style>
</head>
<body>
    <!-- User Info Bar -->
    <div class="user-bar">
        <div class="user-info">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.8;">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <div class="user-details">
                <span class="user-name" id="userName">Welcome back</span>
                <span class="user-email" id="userEmail">user@example.com</span>
            </div>
        </div>
        <button class="logout-button" onclick="logout()">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            Logout
        </button>
    </div>

    <!-- Navigation Tabs -->
    <nav class="nav-tab">
        <a href="index.html">Home</a>
        <a href="article1.html">Article 1</a>
        <a href="coaching-skills.html">Coaching Skills</a>
        <a href="coaching-individuals.html">Coaching Individuals</a>
        <a href="coaching-team.html">Team Coaching</a>
        <a href="coaching-yourself.html">Self Coaching</a>
    </nav>

    <header>
        <h1>Self Coaching</h1>
        <p>Applying coaching techniques for personal development</p>
    </header>

    <div class="container">
        <h2 class="section-title">4. Coaching Yourself</h2>

        <div class="highlight-section">
            <p>A coach's role is to solve problems, identify goals and put action plans into place. Once you've learned to use these skills, you can apply them to yourself, too.</p>
        </div>

        <p>As we've seen, the coaching process can boost your team members' confidence, build their self- awareness, and help to keep them motivated. So why stop there?</p>
        <p>Using the skills you've learned to coach yourself is a great way to "practice what you preach" with your team. And, as a role model, your people will be inspired to achieve their goals when they see you fulfilling yours.</p>

        <div class="media-container">
            <img src="https://images.unsplash.com/photo-1600880292203-757bb62b4baf?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                 alt="Woman reviewing her personal development plan with coaching techniques"
                 loading="lazy">
            <p class="caption">Applying coaching techniques to your own development</p>
        </div>

        <h2 class="section-title">4.1. Identifying Your Strengths and Weaknesses</h2>
        <p>Before you begin any journey, you need to know your starting point. It's the same with coaching. When you begin to coach yourself, you have to understand your strengths and weaknesses.</p>
        <p>When you know what you're good at, you can use those strengths to achieve your goals. And when you identify your weakest areas, you can come up with strategies to address them, or to minimize their impact.</p>

        <!-- SWOT Analysis Action Card -->
        <div class="action-card">
            <h3>ACTION: Perform a personal SWOT analysis</h3>

             <table>
                 <thead>
                    <tr>
                        <th style="background-color: #27ae60; color: white;">My Strengths</th>
                        <th style="background-color: #e74c3c; color: white;">My Weaknesses</th>
                    </tr>
                 </thead>
                 <tbody>
                    <!-- Row 1 -->
                    <tr class="orange-row">
                        <td>
                            <!-- Added required-answer and data-question -->
                            <textarea class="editable-answer required-answer" data-question="strength1" placeholder="Enter your biggest strength..."></textarea>
                             <div class="answer-buttons">
                                <button class="save-btn" onclick="saveAnswer('strength1')">Save</button>
                                <button class="delete-btn" onclick="deleteAnswer('strength1')">Delete</button>
                                <span class="saved-message" id="save-status-strength1">✓ Saved</span>
                                <span class="inline-error-message" id="error-strength1">Required.</span>
                            </div>
                        </td>
                        <td>
                             <!-- Added required-answer and data-question -->
                            <textarea class="editable-answer required-answer" data-question="weakness1" placeholder="Enter your biggest weakness..."></textarea>
                            <div class="answer-buttons">
                                <button class="save-btn" onclick="saveAnswer('weakness1')">Save</button>
                                <button class="delete-btn" onclick="deleteAnswer('weakness1')">Delete</button>
                                <span class="saved-message" id="save-status-weakness1">✓ Saved</span>
                                <span class="inline-error-message" id="error-weakness1">Required.</span>
                            </div>
                        </td>
                    </tr>
                    <!-- Row 2 -->
                    <tr class="orange-row">
                        <td>
                             <!-- Added data-question -->
                            <textarea class="editable-answer" data-question="strength2" placeholder="Enter another strength (optional)..."></textarea>
                              <div class="answer-buttons">
                                <button class="save-btn" onclick="saveAnswer('strength2')">Save</button>
                                <button class="delete-btn" onclick="deleteAnswer('strength2')">Delete</button>
                                <span class="saved-message" id="save-status-strength2">✓ Saved</span>
                                <!-- No error message for optional field -->
                            </div>
                        </td>
                        <td>
                             <!-- Added data-question -->
                            <textarea class="editable-answer" data-question="weakness2" placeholder="Enter another weakness (optional)..."></textarea>
                             <div class="answer-buttons">
                                <button class="save-btn" onclick="saveAnswer('weakness2')">Save</button>
                                <button class="delete-btn" onclick="deleteAnswer('weakness2')">Delete</button>
                                <span class="saved-message" id="save-status-weakness2">✓ Saved</span>
                            </div>
                        </td>
                    </tr>
                     <!-- Row 3 -->
                    <tr class="orange-row">
                        <td>
                             <!-- Added data-question -->
                            <textarea class="editable-answer" data-question="strength3" placeholder="Enter another strength (optional)..."></textarea>
                            <div class="answer-buttons">
                                <button class="save-btn" onclick="saveAnswer('strength3')">Save</button>
                                <button class="delete-btn" onclick="deleteAnswer('strength3')">Delete</button>
                                <span class="saved-message" id="save-status-strength3">✓ Saved</span>
                             </div>
                        </td>
                        <td>
                             <!-- Added data-question -->
                            <textarea class="editable-answer" data-question="weakness3" placeholder="Enter another weakness (optional)..."></textarea>
                             <div class="answer-buttons">
                                <button class="save-btn" onclick="saveAnswer('weakness3')">Save</button>
                                <button class="delete-btn" onclick="deleteAnswer('weakness3')">Delete</button>
                                <span class="saved-message" id="save-status-weakness3">✓ Saved</span>
                            </div>
                        </td>
                    </tr>
                 </tbody>
            </table>
            <!-- Removed table-wide save/delete -->
        </div>

        <!-- Reflection Question -->
        <div class="question-item">
            <div class="question-text">Reflection Questions: How do these strengths and weaknesses impact your professional development?</div>
            <!-- Replaced contenteditable div with textarea, added required-answer and data-question -->
            <textarea class="editable-answer required-answer" data-question="reflection1" placeholder="Enter your reflection here..."></textarea>
            <div class="answer-buttons">
                <button class="save-btn" onclick="saveAnswer('reflection1')">Save</button>
                <button class="delete-btn" onclick="deleteAnswer('reflection1')">Delete</button>
                <span class="saved-message" id="save-status-reflection1">✓ Saved</span>
                <span class="inline-error-message" id="error-reflection1">Please enter your reflection.</span>
            </div>
        </div>

        <div class="media-container">
            <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                 alt="Person analyzing their skills and competencies"
                 loading="lazy">
            <p class="caption">Honest self-assessment is the foundation of self-coaching</p>
        </div>

        <h2 class="section-title">4.2. The GROW Model</h2>
        <p>In Chapter 2, we discussed how to use The GROW Model in one-on-one coaching sessions. But you can use it to coach yourself, too.</p>
        <p>The GROW Model can help you to identify a goal and to decide on a plan of action to achieve it. If you use this model, be sure to set aside time each week to "check in" with yourself and assess your progress.</p>

        <!-- GROW Model Action Card -->
        <div class="action-card">
            <h3>ACTION: Use the GROW Model for Self-Coaching</h3>

            <!-- Step 1: Goal -->
            <div class="model-section">
                <h3>Step 1: Identify Your Goal</h3>
                <p>Your first step is to identify the goal that you want to achieve... Make sure your goal is SMART...</p>
                <div class="question-item">
                    <div class="question-text">My SMART Goal:</div>
                    <!-- Replaced contenteditable div, added required-answer and data-question -->
                    <textarea class="editable-answer required-answer" data-question="smart-goal" placeholder="Enter your SMART goal here..."></textarea>
                    <div class="answer-buttons">
                        <button class="save-btn" onclick="saveAnswer('smart-goal')">Save</button>
                        <button class="delete-btn" onclick="deleteAnswer('smart-goal')">Delete</button>
                        <span class="saved-message" id="save-status-smart-goal">✓ Saved</span>
                        <span class="inline-error-message" id="error-smart-goal">Please enter your goal.</span>
                    </div>
                </div>
            </div>

            <!-- Step 2: Reality -->
            <div class="model-section">
                <h3>Step 2: Identify Your Current Reality</h3>
                <p>Next, look at your situation... Examine the factors that might help or hinder...</p>
                <div class="question-item">
                    <div class="question-text">Current Reality Assessment:</div>
                     <!-- Replaced contenteditable div, added required-answer and data-question -->
                    <textarea class="editable-answer required-answer" data-question="current-reality" placeholder="Describe your current situation..."></textarea>
                    <div class="answer-buttons">
                        <button class="save-btn" onclick="saveAnswer('current-reality')">Save</button>
                        <button class="delete-btn" onclick="deleteAnswer('current-reality')">Delete</button>
                        <span class="saved-message" id="save-status-current-reality">✓ Saved</span>
                        <span class="inline-error-message" id="error-current-reality">Please assess your reality.</span>
                    </div>
                </div>
            </div>

            <!-- Step 3: Options -->
            <div class="model-section">
                <h3>Step 3: Explore the Options</h3>
                <p>Now, you need to think about how you will reach your goal. Identify as many different ways as possible...</p>
                <table class="options-table">
                     <thead>
                        <tr>
                            <th>Possible Options</th>
                            <th>Advantages</th>
                            <th>Disadvantages</th>
                        </tr>
                     </thead>
                     <tbody>
                        <!-- Row 1 -->
                        <tr class="orange-row">
                            <td>
                                 <!-- Added required-answer and data-question -->
                                <textarea class="editable-answer required-answer" data-question="option1" placeholder="Option 1..."></textarea>
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('option1')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('option1')">Delete</button>
                                     <span class="saved-message" id="save-status-option1">✓ Saved</span>
                                     <span class="inline-error-message" id="error-option1">Required.</span>
                                 </div>
                            </td>
                            <td>
                                 <!-- Added data-question (optional field) -->
                                <textarea class="editable-answer" data-question="pro1" placeholder="Pros..."></textarea>
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('pro1')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('pro1')">Delete</button>
                                     <span class="saved-message" id="save-status-pro1">✓ Saved</span>
                                 </div>
                            </td>
                            <td>
                                 <!-- Added data-question (optional field) -->
                                <textarea class="editable-answer" data-question="con1" placeholder="Cons..."></textarea>
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('con1')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('con1')">Delete</button>
                                     <span class="saved-message" id="save-status-con1">✓ Saved</span>
                                 </div>
                            </td>
                        </tr>
                        <!-- Row 2 -->
                        <tr class="orange-row">
                            <td>
                                <textarea class="editable-answer" data-question="option2" placeholder="Option 2 (optional)..."></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('option2')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('option2')">Delete</button>
                                     <span class="saved-message" id="save-status-option2">✓ Saved</span>
                                 </div>
                            </td>
                            <td>
                                <textarea class="editable-answer" data-question="pro2" placeholder="Pros..."></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('pro2')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('pro2')">Delete</button>
                                     <span class="saved-message" id="save-status-pro2">✓ Saved</span>
                                 </div>
                            </td>
                            <td>
                                <textarea class="editable-answer" data-question="con2" placeholder="Cons..."></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('con2')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('con2')">Delete</button>
                                     <span class="saved-message" id="save-status-con2">✓ Saved</span>
                                 </div>
                            </td>
                        </tr>
                         <!-- Row 3 -->
                        <tr class="orange-row">
                             <td>
                                <textarea class="editable-answer" data-question="option3" placeholder="Option 3 (optional)..."></textarea>
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('option3')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('option3')">Delete</button>
                                     <span class="saved-message" id="save-status-option3">✓ Saved</span>
                                 </div>
                            </td>
                            <td>
                                <textarea class="editable-answer" data-question="pro3" placeholder="Pros..."></textarea>
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('pro3')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('pro3')">Delete</button>
                                     <span class="saved-message" id="save-status-pro3">✓ Saved</span>
                                 </div>
                            </td>
                            <td>
                                <textarea class="editable-answer" data-question="con3" placeholder="Cons..."></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('con3')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('con3')">Delete</button>
                                     <span class="saved-message" id="save-status-con3">✓ Saved</span>
                                 </div>
                            </td>
                        </tr>
                     </tbody>
                </table>
                 <!-- Removed table-wide save/delete -->
            </div>

            <!-- Step 4: Will -->
            <div class="model-section">
                <h3>Step 4: Establish the Will</h3>
                <p>Create a strategy to achieve your goal... Check your progress regularly.</p>
                <table class="will-table">
                     <thead>
                        <tr>
                            <th>Action Steps</th>
                            <th>Completion Date</th>
                            <th>Success Measures</th>
                        </tr>
                     </thead>
                     <tbody>
                        <!-- Row 1 -->
                        <tr class="orange-row">
                            <td>
                                 <!-- Added required-answer and data-question -->
                                <textarea class="editable-answer required-answer" data-question="action1" placeholder="Action step 1..."></textarea>
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('action1')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('action1')">Delete</button>
                                     <span class="saved-message" id="save-status-action1">✓ Saved</span>
                                     <span class="inline-error-message" id="error-action1">Required.</span>
                                 </div>
                            </td>
                            <td>
                                 <!-- Added required-answer and data-question -->
                                <input type="date" class="editable-answer required-answer" data-question="date1">
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('date1')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('date1')">Delete</button>
                                     <span class="saved-message" id="save-status-date1">✓ Saved</span>
                                     <span class="inline-error-message" id="error-date1">Required.</span>
                                 </div>
                            </td>
                            <td>
                                 <!-- Added required-answer and data-question -->
                                <textarea class="editable-answer required-answer" data-question="measure1" placeholder="How will you measure success?"></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('measure1')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('measure1')">Delete</button>
                                     <span class="saved-message" id="save-status-measure1">✓ Saved</span>
                                     <span class="inline-error-message" id="error-measure1">Required.</span>
                                 </div>
                            </td>
                        </tr>
                         <!-- Row 2 -->
                        <tr class="orange-row">
                             <td>
                                <textarea class="editable-answer" data-question="action2" placeholder="Action step 2 (optional)..."></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('action2')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('action2')">Delete</button>
                                     <span class="saved-message" id="save-status-action2">✓ Saved</span>
                                 </div>
                            </td>
                            <td>
                                <input type="date" class="editable-answer" data-question="date2">
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('date2')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('date2')">Delete</button>
                                     <span class="saved-message" id="save-status-date2">✓ Saved</span>
                                 </div>
                            </td>
                            <td>
                                <textarea class="editable-answer" data-question="measure2" placeholder="How will you measure success?"></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('measure2')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('measure2')">Delete</button>
                                     <span class="saved-message" id="save-status-measure2">✓ Saved</span>
                                 </div>
                            </td>
                        </tr>
                         <!-- Row 3 -->
                        <tr class="orange-row">
                            <td>
                                <textarea class="editable-answer" data-question="action3" placeholder="Action step 3 (optional)..."></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('action3')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('action3')">Delete</button>
                                     <span class="saved-message" id="save-status-action3">✓ Saved</span>
                                 </div>
                            </td>
                            <td>
                                <input type="date" class="editable-answer" data-question="date3">
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('date3')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('date3')">Delete</button>
                                     <span class="saved-message" id="save-status-date3">✓ Saved</span>
                                 </div>
                            </td>
                            <td>
                                <textarea class="editable-answer" data-question="measure3" placeholder="How will you measure success?"></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('measure3')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('measure3')">Delete</button>
                                     <span class="saved-message" id="save-status-measure3">✓ Saved</span>
                                 </div>
                            </td>
                        </tr>
                     </tbody>
                </table>
                 <!-- Removed table-wide save/delete -->
            </div>
        </div>

        <div class="highlight-section">
            <p>TIP: Schedule regular "check-in" sessions with yourself (weekly or bi-weekly) to review your progress. Treat these sessions as seriously as you would a coaching session with someone else - put them in your calendar and prepare for them.</p>
        </div>

         <!-- General Warning Message (for Next Button click) -->
        <div class="warning-message" id="generalWarningMessage">
            <strong>Action Required:</strong> Please complete all required fields before proceeding.
            Required fields are highlighted.
        </div>

        <!-- Navigation Buttons -->
        <div class="button-container">
             <!-- Updated back button link -->
            <a href="coaching-team.html" class="button back" id="backButton">← Back to Team Coaching</a>
             <!-- Next button triggers validation and modal -->
            <button type="button" class="button" id="nextButton">Next: Coaching Action Plan →</button>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal-overlay">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">×</button>
            <h3>Section Complete!</h3>
            <p>All required answers for this section have been saved.</p>
            <p>You can now proceed to the next section.</p>
            <button class="modal-button" onclick="redirectToNextPage()">CONTINUE TO ACTION PLAN</button>
        </div>
    </div>

    <script>
        // --- Configuration ---
        const formspreeEndpoint = 'https://formspree.io/f/xzzeqvea'; // YOUR Formspree Endpoint
        const localStorageKey = 'allUserAnswers_selfCoaching'; // Specific key for THIS page
        const userEmailKey = 'userEmail';
        const currentUserKey = 'currentUser';

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', function() {
            const userEmail = getUserEmail();
            if (!userEmail) {
                alert('User session not found. Please log in again.');
                window.location.href = 'login.html';
                return;
            }

            displayUserInfo(userEmail);
            loadUserAnswers(userEmail);
            setupEventListeners(userEmail);
        });

        // --- User Info & Authentication ---
        function getUserEmail() {
            const userData = JSON.parse(localStorage.getItem(currentUserKey));
            return userData?.email || localStorage.getItem(userEmailKey);
        }

        function displayUserInfo(userEmail) {
            const userData = JSON.parse(localStorage.getItem(currentUserKey)) || {};
            document.getElementById('userName').textContent = `Welcome, ${userData.name || 'User'}`;
            document.getElementById('userEmail').textContent = userEmail;
        }

        function logout() {
            localStorage.removeItem('loggedIn');
            localStorage.removeItem(currentUserKey);
            localStorage.removeItem(userEmailKey);
            window.location.href = 'login.html';
        }

        // --- Answer Handling (Local Storage) ---
        function loadUserAnswers(userEmail) {
            const allAnswers = JSON.parse(localStorage.getItem(localStorageKey)) || {};
            const userPageAnswers = allAnswers[userEmail] || {};

             // Select all elements that can hold answers
            document.querySelectorAll('.editable-answer[data-question]').forEach(field => {
                 const questionId = field.getAttribute('data-question');
                 const statusId = `save-status-${questionId}`;
                 const statusElement = document.getElementById(statusId);

                 if (userPageAnswers[questionId] !== undefined) {
                    field.value = userPageAnswers[questionId]; // Works for textarea, input[text], input[date]
                    if (field.classList.contains('required-answer')) {
                        field.classList.remove('required-field');
                    }
                    if (userPageAnswers[questionId].trim() !== '' && statusElement) {
                         statusElement.textContent = '✓ Saved';
                         statusElement.style.display = 'inline';
                    } else if (statusElement) {
                        statusElement.style.display = 'none';
                    }
                 } else {
                    field.value = '';
                    if (statusElement) statusElement.style.display = 'none';
                 }
            });

            // Show overall table saved statuses (optional, removed table-wide buttons)
            // showTableSaveStatus('swot', userPageAnswers);
            // showTableSaveStatus('options', userPageAnswers);
            // showTableSaveStatus('action-plan', userPageAnswers);
        }

        // Helper to show overall table status (can be removed if not needed)
        // function showTableSaveStatus(tableType, userPageAnswers) {
        //     const statusId = `saved-${tableType}`;
        //     const statusElement = document.getElementById(statusId);
        //     if (!statusElement) return;

        //     let prefixes = [];
        //     if (tableType === 'swot') prefixes = ['strength', 'weakness'];
        //     else if (tableType === 'options') prefixes = ['option', 'pro', 'con'];
        //     else if (tableType === 'action-plan') prefixes = ['action', 'date', 'measure'];
        //     else return;

        //     let hasSavedData = false;
        //     for (let i = 1; i <= 3; i++) {
        //         for (const prefix of prefixes) {
        //             if (userPageAnswers[`${prefix}${i}`]?.trim()) {
        //                 hasSavedData = true;
        //                 break;
        //             }
        //         }
        //         if (hasSavedData) break;
        //     }
        //     statusElement.style.display = hasSavedData ? 'inline' : 'none';
        // }

        function saveAnswerToStorage(userEmail, questionId, answer) {
            const allAnswers = JSON.parse(localStorage.getItem(localStorageKey)) || {};
            if (!allAnswers[userEmail]) {
                allAnswers[userEmail] = {};
            }
            allAnswers[userEmail][questionId] = answer;
            localStorage.setItem(localStorageKey, JSON.stringify(allAnswers));
            console.log(`Saved locally: ${questionId}`);
        }

        function deleteAnswerFromStorage(userEmail, questionId) {
            const allAnswers = JSON.parse(localStorage.getItem(localStorageKey)) || {};
            if (allAnswers[userEmail]) {
                delete allAnswers[userEmail][questionId];
                if (Object.keys(allAnswers[userEmail]).length === 0) {
                    delete allAnswers[userEmail];
                }
            }
            localStorage.setItem(localStorageKey, JSON.stringify(allAnswers));
            console.log(`Deleted locally: ${questionId}`);
        }

        // --- Event Listeners Setup ---
        function setupEventListeners(userEmail) {
             // Auto-remove required styling on input/change for required fields
             document.querySelectorAll('.required-answer').forEach(field => {
                 const eventType = (field.tagName === 'SELECT') ? 'change' : 'input'; // Though no selects are required here
                 field.addEventListener(eventType, function() {
                     const questionId = this.getAttribute('data-question');
                     const errorId = `error-${questionId}`;
                     const errorElement = document.getElementById(errorId);

                     if (this.value.trim() !== '') {
                         this.classList.remove('required-field');
                         if (errorElement) errorElement.style.display = 'none';
                     }
                 });
             });

            // Next button validation & modal trigger
            document.getElementById('nextButton').addEventListener('click', function(e) {
                if (!validateAllAnswers()) {
                    e.preventDefault();
                    showGeneralWarningMessage();
                } else {
                    e.preventDefault();
                    showSuccessModal();
                }
            });
        }


        // --- UI Feedback & Validation ---

        function validateAllAnswers() {
            let allValid = true;

             // Check all directly required fields first
            document.querySelectorAll('.required-answer').forEach(field => {
                const questionId = field.getAttribute('data-question');
                const errorId = `error-${questionId}`;
                const errorElement = document.getElementById(errorId);
                 hideMessages(null, errorId, field); // Clear previous error

                 if (field.value.trim() === '') {
                    allValid = false;
                    showError(errorId, field, 'This field is required.');
                }
            });

             // Optionally add table validation if needed (e.g., if row 1 is required)
             // For now, only the explicitly marked fields are checked

            return allValid;
        }


        function showGeneralWarningMessage() {
            const warningElement = document.getElementById('generalWarningMessage');
            if (!warningElement) return;
            warningElement.style.display = 'block';
            warningElement.style.animation = 'fadeIn 0.3s ease-in-out';

            const firstEmptyField = document.querySelector('.required-field');
            if (firstEmptyField) {
                firstEmptyField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                setTimeout(() => firstEmptyField.focus(), 100);
            }

            setTimeout(() => {
                warningElement.style.animation = 'fadeOut 0.5s ease-in-out forwards';
                 setTimeout(() => {
                      warningElement.style.display = 'none';
                      warningElement.style.animation = '';
                 }, 500);
            }, 4000);
        }

         function showSaveStatus(statusId, message = '✓ Saved') {
             const statusElement = document.getElementById(statusId);
             if (!statusElement) return;
             statusElement.textContent = message;
             statusElement.style.display = 'inline';
             setTimeout(() => {
                 statusElement.style.display = 'none';
             }, 2500);
        }

        function showError(errorId, field, message = 'Required field.') {
             const errorElement = document.getElementById(errorId);
             if (!errorElement) return;
             errorElement.textContent = message;
             errorElement.style.display = 'inline';
             if (field) {
                 field.classList.add('required-field');
                 // Don't autofocus for general table errors
                 if (!errorId.includes('teamRoles') && !errorId.includes('teamCharter')) {
                      // Small delay before focus can help
                     setTimeout(() => field.focus(), 50);
                 }
             }
        }

        function hideMessages(statusId, errorId, field) {
             const statusElement = statusId ? document.getElementById(statusId) : null;
             const errorElement = errorId ? document.getElementById(errorId) : null;
             if (statusElement) statusElement.style.display = 'none';
             if (errorElement) errorElement.style.display = 'none';
             // Don't remove required-field class here automatically
             // if (field) field.classList.remove('required-field');
        }

        // --- Actions (Save/Delete Single Fields) ---
        function saveAnswer(questionId) {
             const userEmail = getUserEmail();
             if (!userEmail) return;

             const field = document.querySelector(`[data-question="${questionId}"]`);
             if (!field) { console.error(`Field not found for ${questionId}`); return; }

             const statusId = `save-status-${questionId}`;
             const errorId = `error-${questionId}`;
             const answer = field.value; // Get value directly (works for textarea, input)

             hideMessages(statusId, errorId, field);

             // Validate only if it's a required field
             if (field.classList.contains('required-answer') && answer.trim() === '') {
                 showError(errorId, field, 'This field is required.');
                 return;
             }

             saveAnswerToStorage(userEmail, questionId, answer);
             submitToFormspree(userEmail, questionId, answer); // Submit even if optional and filled
             showSaveStatus(statusId);
             field.classList.remove('required-field'); // Remove red border on successful save
        }

        function deleteAnswer(questionId) {
            const userEmail = getUserEmail();
            if (!userEmail) return;

            const field = document.querySelector(`[data-question="${questionId}"]`);
             if (!field) { console.error(`Field not found for ${questionId}`); return; }

             const statusId = `save-status-${questionId}`;
             const errorId = `error-${questionId}`;

             hideMessages(statusId, errorId, field);
             field.value = ''; // Clear field
             deleteAnswerFromStorage(userEmail, questionId);
             showSaveStatus(statusId, '✓ Deleted');
             // Do not add 'required-field' on delete, let validation handle it
             // field.classList.add('required-field'); // No - only add on validation fail
        }

        // --- Removed Table-Wide Save/Delete Functions ---
        // Individual save/delete buttons per field handle table data now


        // --- Formspree Submission ---
        function submitToFormspree(userEmail, questionId, answer) {
             // Submit even optional fields if they have content
            if (answer === null || answer === undefined || answer.trim() === '') {
                console.log(`Skipping Formspree submission for empty answer: ${questionId}`);
                return;
            }

            const formData = new FormData();
            formData.append('email', userEmail);
            formData.append('page', document.title);
            formData.append('question_id', questionId);
            formData.append('answer_text', answer);

            fetch(formspreeEndpoint, {
                method: 'POST',
                body: formData,
                headers: { 'Accept': 'application/json' }
            })
            .then(response => {
                if (response.ok) {
                    console.log(`Answer submitted to Formspree: ${questionId}`);
                } else {
                     response.json().then(data => {
                         console.error(`Formspree error for ${questionId}:`, data.errors ? data.errors.map(e => e.message).join(', ') : `Status ${response.status}`);
                    }).catch(() => console.error(`Formspree non-JSON error for ${questionId}. Status: ${response.status}`));
                }
            })
            .catch(error => console.error(`Network error submitting to Formspree for ${questionId}:`, error));
        }

        // --- Modal Handling ---
        function showSuccessModal() {
             const modal = document.getElementById('successModal');
             if(modal) modal.style.display = 'flex';
        }

        function closeModal() {
            const modal = document.getElementById('successModal');
            if(modal) modal.style.display = 'none';
        }

        function redirectToNextPage() {
            window.location.href = 'coaching-action-plan.html'; // Update this if needed
        }

    </script>
</body>
</html>
