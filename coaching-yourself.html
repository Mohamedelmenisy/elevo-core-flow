<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self Coaching</title>
    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <style>
        /* --- Global Styles (Consistent) --- */
        * {
            margin: 0; padding: 0; box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        html { scroll-behavior: smooth; }
        body {
            margin: 0; padding: 0; line-height: 1.7;
            background-color: #f9f9f9; color: #333;
        }

        /* --- User Bar Styles (Consistent) --- */
        .user-bar {
            background-color: #34495e; padding: 10px 20px; display: flex;
            justify-content: space-between; align-items: center; color: white;
            font-size: 14px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .user-info { display: flex; align-items: center; gap: 12px; }
        .user-info svg { opacity: 0.8; }
        .user-details { display: flex; flex-direction: column; }
        .user-name { font-weight: 600; font-size: 14px; }
        .user-email { font-size: 12px; opacity: 0.8; }
        .logout-button {
            background-color: #e74c3c; color: white; border: none; padding: 8px 15px;
            border-radius: 6px; cursor: pointer; font-weight: 500;
            transition: all 0.3s ease; display: flex; align-items: center;
            gap: 6px; font-size: 13px;
        }
        .logout-button:hover { background-color: #c0392b; transform: translateY(-1px); }
        .logout-button:active { transform: translateY(0); }

        /* --- Navigation Tabs (Consistent) --- */
        .nav-tab {
            background-color: #2c3e50; padding: 12px 10px; text-align: center;
            position: sticky; top: 0; z-index: 100; overflow-x: auto;
            white-space: nowrap; -webkit-overflow-scrolling: touch;
            scrollbar-width: thin; scrollbar-color: #556a80 #2c3e50;
        }
        .nav-tab::-webkit-scrollbar { height: 6px; }
        .nav-tab::-webkit-scrollbar-track { background: #2c3e50; }
        .nav-tab::-webkit-scrollbar-thumb { background-color: #556a80; border-radius: 10px; border: 1px solid #2c3e50; }
        .nav-tab a {
            color: white; text-decoration: none; margin: 0 8px; padding: 8px 12px;
            border-radius: 6px; transition: background-color 0.3s, color 0.3s;
            font-size: 14px; display: inline-block;
        }
        .nav-tab a:hover, .nav-tab a.active { background-color: #34495e; color: #fff; }

        /* --- Main Content Styles (Consistent) --- */
        h1 {
            color: #fff; background-color: #e67e22; padding: 20px;
            border-radius: 8px; text-align: center; margin: 25px auto;
            max-width: 800px; font-size: 26px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        h1 + p { /* Subtitle */
            text-align: center; margin-top: -15px; margin-bottom: 25px;
            color: #555; font-size: 15px;
        }
        .container {
            max-width: 800px; margin: 0 auto 30px; background: white;
            padding: 30px; box-shadow: 0 0 10px rgba(0,0,0,0.1); border-radius: 8px;
        }
        .section-title {
            color: #e67e22; font-size: 1.6em; margin: 30px 0 15px 0;
            border-bottom: 2px solid #e67e22; padding-bottom: 8px; font-weight: 600;
        }
        .highlight-section {
            background-color: rgba(230, 126, 34, 0.07); padding: 20px;
            border-left: 5px solid #e67e22; border-radius: 6px; margin: 25px 0;
        }
        .action-card {
            background-color: #e67e22; color: white; padding: 20px;
            border-radius: 6px; margin: 25px 0; border-left: 5px solid #d35400;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .action-card > p, .action-card > h3 { color: white; }
        .media-container { text-align: center; margin: 30px 0; }
        .media-container img {
            max-width: 100%; height: auto; border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .caption { color: #555; margin-top: 10px; font-size: 14px; }

        .question-item { /* Standard light bg, blue border */
            background-color: rgba(52, 152, 219, 0.08); padding: 20px;
            border-radius: 6px; margin: 20px 0; border-left: 4px solid #3498db;
        }
        .question-text {
            color: #34495e; font-weight: 600; margin-bottom: 15px; font-size: 1.1em;
        }
        .question-text .required-star { color: #e74c3c; font-weight: bold; margin-left: 3px; }

        /* Question items INSIDE action cards need different styling */
        .action-card .question-item { /* Used for GROW steps inside action card */
            background-color: rgba(255, 255, 255, 0.9); border-left: 4px solid #ffffff;
            padding: 15px; margin: 15px 0; /* Reduced margin inside card */
        }
        .action-card .question-item .question-text { color: #333; }
        .action-card .model-section { /* Remove outer section style if nested */
             background: none; border: none; padding: 0; margin: 15px 0;
        }
        .action-card .model-section h3 { color: white; margin-bottom: 10px; }
        .action-card .model-section p { color: #eee; }


        /* Unified class for all answer fields (Consistent) */
        .editable-answer {
            width: 100%; padding: 12px; border: 1px solid #ddd;
            border-radius: 4px; margin-top: 8px; margin-bottom: 10px;
            background-color: white; min-height: 45px; line-height: 1.6;
            display: block; color: #333; font-size: 15px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        textarea.editable-answer { min-height: 80px; resize: vertical; }
        .editable-answer:focus {
            outline: none; border-color: #e67e22;
            box-shadow: 0 0 0 3px rgba(230, 126, 34, 0.2);
        }
        .editable-answer::placeholder { color: #aaa; opacity: 1; }
         /* Inputs inside orange rows */
         .orange-row .editable-answer {
            margin: 5px 0; color: #333; background-color: white;
            border: 1px solid #ccc; padding: 8px 10px; font-size: 14px;
         }
         .orange-row input.editable-answer::placeholder { color: #888; }


        /* Save/Delete Buttons (Consistent) */
        .save-btn, .delete-btn {
            color: white; border: none; padding: 8px 15px; border-radius: 4px;
            cursor: pointer; transition: all 0.3s ease; font-size: 14px; font-weight: 500;
        }
        .save-btn { background-color: #27ae60; margin-right: 8px; } /* Green */
        .delete-btn { background-color: #e74c3c; } /* Red */
        .save-btn:hover { background-color: #2ecc71; transform: translateY(-1px); }
        .delete-btn:hover { background-color: #c0392b; transform: translateY(-1px); }
        .save-btn:active, .delete-btn:active { transform: translateY(0); }

        .saved-message { /* Consistent Green */
            color: #27ae60; font-size: 13px; margin-left: 5px;
            display: none; font-weight: 500;
        }
        .saved-message.deleted { color: #6c757d; }
        .inline-error-message { /* Consistent Red */
            color: #e74c3c; font-size: 13px; margin-left: 5px;
            display: none; font-weight: 500;
        }
        /* Feedback messages inside action cards */
        .action-card .saved-message { color: #d1e7dd; } /* Light green */
        .action-card .saved-message.deleted { color: #e9ecef; } /* Light grey */
        .action-card .inline-error-message { color: #f8d7da; } /* Light red */


        /* General table styles (Consistent) */
        table { width: 100%; border-collapse: collapse; margin: 25px 0; font-size: 14px; }
        table, th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background-color: #f2f2f2; font-weight: 600; color: #333; }

        /* Instruction Table Style (Consistent) */
        .action-table {
            width: 100%; margin: 20px 0; background-color: #f8f9fa;
            border-radius: 6px; overflow: hidden; border: 1px solid #ddd;
        }
        .action-table th { background-color: #34495e; color: white; text-align: center; }
        .action-table td { vertical-align: top; color: #333; }

        /* Table rows inside action cards */
        .action-card table {
             background-color: transparent; /* Make table transparent inside card */
             border: 1px solid rgba(255, 255, 255, 0.3); /* Light border inside card */
             border-radius: 4px;
        }
         .action-card table th, .action-card table td {
             border-color: rgba(255, 255, 255, 0.3);
         }
         .action-card thead th { color: white; } /* White text for headers */

        /* Light orange for data rows in tables inside action cards */
        .orange-row td {
             background-color: rgba(255, 255, 255, 0.8); /* Light background inside action card */
             vertical-align: top;
        }


        /* Button Container (Bottom Navigation) (Consistent) */
        .button-container {
            display: flex; justify-content: space-between; margin-top: 40px;
            gap: 20px; border-top: 1px solid #eee; padding-top: 25px;
        }
        .button {
            text-decoration: none; padding: 12px 20px; color: white; border-radius: 4px;
            font-weight: 600; flex: 1; text-align: center; transition: all 0.3s ease;
            font-size: 15px; border: none; cursor: pointer;
        }
        .button.back { background-color: #6c757d; } /* Grey back */
        .button#nextButton { background-color: #e67e22; } /* Orange next */
        .button:hover { transform: translateY(-1px); filter: brightness(110%); }
        .button:active { transform: translateY(0); filter: brightness(100%); }

        /* Warning Message (Bottom) (Consistent) */
        .warning-message {
            background-color: #fff8e1; border-left: 4px solid #ffc107; padding: 15px;
            margin: 20px 0; color: #333; display: none; font-size: 14px;
            line-height: 1.6; border-radius: 4px; font-weight: 500;
        }

        /* Required Field Style (Consistent) */
        .required-field {
            border: 2px solid #e74c3c !important; background-color: #fff2f1 !important;
            box-shadow: none !important;
        }

        /* Section specific styles (Consistent BG/Borders) */
        .model-section, .trust-section, .rapport-section, .informal-tips {
            padding: 20px; border-radius: 6px; margin: 25px 0;
            border-left-width: 5px; border-left-style: solid;
        }
        .model-section { background-color: rgba(52, 152, 219, 0.1); border-left-color: #3498db; } /* Blue */
        .trust-section { background-color: rgba(46, 204, 113, 0.1); border-left-color: #2ecc71; } /* Green */
        .rapport-section { background-color: rgba(155, 89, 182, 0.1); border-left-color: #9b59b6; } /* Purple */
        .informal-tips { background-color: rgba(241, 196, 15, 0.1); border-left-color: #f1c40f; } /* Yellow */

        /* Drawing Together Section (Consistent) */
        .drawing-together {
            display: flex; align-items: center; gap: 20px;
            background-color: rgba(155, 89, 182, 0.1); padding: 20px;
            border-radius: 6px; margin: 25px 0; border-left: 5px solid #9b59b6;
        }
        .drawing-icon { font-size: 28px; color: #9b59b6; flex-shrink: 0; }

        .answer-buttons { /* Consistent */
            display: flex; gap: 8px; align-items: center; margin-top: 10px; flex-wrap: wrap;
        }

        /* Custom styles for the tables */
        .swot-table th:nth-child(1) { background-color: #27ae60 !important; color: white !important; } /* Green */
        .swot-table th:nth-child(2) { background-color: #e74c3c !important; color: white !important; } /* Red */

        .options-table th { color: white !important; text-align: center !important; }
        .options-table th:nth-child(1) { background-color: #3498db !important; } /* Blue */
        .options-table th:nth-child(2) { background-color: #2ecc71 !important; } /* Green */
        .options-table th:nth-child(3) { background-color: #e74c3c !important; } /* Red */

        .will-table th { color: white !important; text-align: center !important; }
        .will-table th:nth-child(1) { background-color: #3498db !important; } /* Blue */
        .will-table th:nth-child(2) { background-color: #9b59b6 !important; } /* Purple */
        .will-table th:nth-child(3) { background-color: #e67e22 !important; } /* Orange */


        /* Modal Styles (Consistent) */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.6); z-index: 1000; justify-content: center; align-items: center;
            animation: modalFadeInBackground 0.3s ease-out;
        }
        @keyframes modalFadeInBackground { from { background: rgba(0,0,0,0); } to { background: rgba(0,0,0,0.6); } }
        .modal-content {
            background: white; padding: 30px 40px; border-radius: 8px; max-width: 450px;
            text-align: center; box-shadow: 0 5px 20px rgba(0,0,0,0.2); position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }
        @keyframes modalSlideIn { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
        .modal-button {
            background-color: #27ae60; color: white; border: none; padding: 12px 25px;
            border-radius: 5px; cursor: pointer; margin-top: 25px; font-weight: bold;
            transition: all 0.3s; font-size: 15px;
        }
        .modal-button:hover { background-color: #219653; transform: translateY(-2px); }
        .close-modal {
            position: absolute; top: 15px; right: 15px; background: none; border: none;
            font-size: 24px; cursor: pointer; color: #aaa; transition: color 0.3s;
        }
        .close-modal:hover { color: #555; }

         /* Required Star Helper */
         .required-star { color: #e74c3c; font-weight: bold; margin-left: 2px; }

         /* Responsive Adjustments */
         @media (max-width: 768px) {
             h1 { font-size: 22px; padding: 15px; margin: 20px 15px; }
             h1 + p { font-size: 14px; margin: -10px 15px 20px; }
             .container { padding: 20px; margin: 0 15px 20px; }
             .user-bar { padding: 10px 15px; font-size: 13px; }
             .user-name { font-size: 13px; }
             .user-email { font-size: 11px; }
             .logout-button { padding: 7px 12px; font-size: 12px; }
             .nav-tab { padding: 10px 5px; }
             .nav-tab a { margin: 0 5px; padding: 7px 10px; font-size: 13px;}
             .section-title { font-size: 1.4em; margin: 25px 0 10px 0; }
              .highlight-section, .action-card, .question-item, .model-section, .trust-section, .rapport-section, .informal-tips, .drawing-together {
                 padding: 15px; margin: 20px 0;
             }
             .editable-answer { font-size: 14px; padding: 10px; }
             textarea.editable-answer { min-height: 80px; }
             .save-btn, .delete-btn { padding: 7px 13px; font-size: 13px; }
             .button-container { flex-direction: column; gap: 15px; padding-top: 20px; margin-top: 30px;}
             .button { font-size: 14px; padding: 12px 15px;}
             .modal-content { max-width: 90%; padding: 20px 25px; }
             .modal-button { padding: 10px 20px; font-size: 14px; }
             .close-modal { top: 10px; right: 10px; font-size: 20px; }
             .warning-message { font-size: 13px; }

              /* Responsive Tables */
             table, thead, tbody, th, td, tr { display: block; }
             thead tr { position: absolute; top: -9999px; left: -9999px; }
             tr { border: 1px solid #ccc; margin-bottom: 10px; border-radius: 4px; }
             /* Special handling for tables inside action cards */
             .action-card tr { border: 1px solid rgba(255,255,255,0.3); }
             td { border: none; border-bottom: 1px solid #eee; position: relative; padding-left: 50%; text-align: right; }
             .action-card td { border-bottom: 1px solid rgba(255,255,255,0.2); }
             td:before { position: absolute; top: 6px; left: 6px; width: 45%; padding-right: 10px; white-space: nowrap; content: attr(data-label); font-weight: bold; text-align: left;}
              .action-card td:before { color: #eee; } /* Label color inside card */
             .action-card .orange-row td { padding-left: 6px; text-align: left;} /* Adjust padding for full width input */
             .action-card .orange-row td:before { display: none; } /* Hide labels for orange rows with full width inputs */
             .action-card .editable-answer { width: 100%; } /* Ensure inputs take full width */

        }

    </style>
</head>
<body>
    <!-- User Info Bar -->
    <div class="user-bar">
        <div class="user-info">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.8;">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <div class="user-details">
                <span class="user-name" id="userName">Welcome back</span>
                <span class="user-email" id="userEmail">user@example.com</span>
            </div>
        </div>
        <button class="logout-button" onclick="logout()">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            Logout
        </button>
    </div>

    <!-- Navigation Tabs -->
    <nav class="nav-tab">
        <a href="index.html">Home</a>
        <a href="article1.html">Article 1</a>
        <a href="coaching-skills.html">Coaching Skills</a>
        <a href="coaching-individuals.html">Coaching Individuals</a>
        <a href="coaching-team.html">Team Coaching</a>
        <a href="coaching-yourself.html" class="active">Self Coaching</a> <!-- Active Tab -->
        <a href="action-plan.html">Action Plan</a>
    </nav>

    <!-- Page Title -->
    <h1>Self Coaching</h1>
    <p>Applying coaching techniques for personal development</p>

    <div class="container">
        <h2 class="section-title">4. Coaching Yourself</h2>

        <div class="highlight-section"> <!-- Orange Highlight -->
            <p>A coach's role is to solve problems, identify goals and put action plans into place. Once you've learned to use these skills, you can apply them to yourself, too.</p>
        </div>

        <p>As we've seen, the coaching process can boost your team members' confidence, build their self- awareness, and help to keep them motivated. So why stop there?</p>
        <p>Using the skills you've learned to coach yourself is a great way to "practice what you preach" with your team. And, as a role model, your people will be inspired to achieve their goals when they see you fulfilling yours.</p>

        <div class="media-container">
            <img src="https://images.unsplash.com/photo-1600880292203-757bb62b4baf?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                 alt="Woman reviewing her personal development plan with coaching techniques"
                 loading="lazy">
            <p class="caption">Applying coaching techniques to your own development</p>
        </div>

        <h2 class="section-title">4.1 Identifying Your Strengths and Weaknesses</h2>
        <p>Before you begin any journey, you need to know your starting point. It's the same with coaching. When you begin to coach yourself, you have to understand your strengths and weaknesses.</p>
        <p>When you know what you're good at, you can use those strengths to achieve your goals. And when you identify your weakest areas, you can come up with strategies to address them, or to minimize their impact.</p>

        <!-- SWOT Analysis Action Card -->
        <div class="action-card"> <!-- Orange Card -->
            <h3>ACTION: Perform a personal SWOT analysis</h3>
            <p>Identify at least one key strength and one key weakness.</p>

             <table class="swot-table"> <!-- Class for specific header colors -->
                 <thead>
                    <tr>
                        <th>My Strengths</th> <!-- Green Header -->
                        <th>My Weaknesses</th> <!-- Red Header -->
                    </tr>
                 </thead>
                 <tbody>
                    <!-- Row 1 -->
                    <tr class="orange-row">
                        <td data-label="Strength">
                            <textarea class="editable-answer required-answer" data-question="strength1" placeholder="Enter your biggest strength..."></textarea>
                             <div class="answer-buttons">
                                <button class="save-btn" onclick="saveAnswer('strength1')">Save</button>
                                <button class="delete-btn" onclick="deleteAnswer('strength1')">Delete</button>
                                <span class="saved-message" id="save-status-strength1"></span>
                                <span class="inline-error-message" id="error-strength1"></span>
                            </div>
                        </td>
                        <td data-label="Weakness">
                            <textarea class="editable-answer required-answer" data-question="weakness1" placeholder="Enter your biggest weakness..."></textarea>
                            <div class="answer-buttons">
                                <button class="save-btn" onclick="saveAnswer('weakness1')">Save</button>
                                <button class="delete-btn" onclick="deleteAnswer('weakness1')">Delete</button>
                                <span class="saved-message" id="save-status-weakness1"></span>
                                <span class="inline-error-message" id="error-weakness1"></span>
                            </div>
                        </td>
                    </tr>
                    <!-- Row 2 -->
                    <tr class="orange-row">
                        <td data-label="Strength">
                            <textarea class="editable-answer" data-question="strength2" placeholder="Enter another strength (optional)..."></textarea>
                              <div class="answer-buttons">
                                <button class="save-btn" onclick="saveAnswer('strength2')">Save</button>
                                <button class="delete-btn" onclick="deleteAnswer('strength2')">Delete</button>
                                <span class="saved-message" id="save-status-strength2"></span>
                            </div>
                        </td>
                        <td data-label="Weakness">
                            <textarea class="editable-answer" data-question="weakness2" placeholder="Enter another weakness (optional)..."></textarea>
                             <div class="answer-buttons">
                                <button class="save-btn" onclick="saveAnswer('weakness2')">Save</button>
                                <button class="delete-btn" onclick="deleteAnswer('weakness2')">Delete</button>
                                <span class="saved-message" id="save-status-weakness2"></span>
                            </div>
                        </td>
                    </tr>
                     <!-- Row 3 -->
                    <tr class="orange-row">
                        <td data-label="Strength">
                            <textarea class="editable-answer" data-question="strength3" placeholder="Enter another strength (optional)..."></textarea>
                            <div class="answer-buttons">
                                <button class="save-btn" onclick="saveAnswer('strength3')">Save</button>
                                <button class="delete-btn" onclick="deleteAnswer('strength3')">Delete</button>
                                <span class="saved-message" id="save-status-strength3"></span>
                             </div>
                        </td>
                        <td data-label="Weakness">
                            <textarea class="editable-answer" data-question="weakness3" placeholder="Enter another weakness (optional)..."></textarea>
                             <div class="answer-buttons">
                                <button class="save-btn" onclick="saveAnswer('weakness3')">Save</button>
                                <button class="delete-btn" onclick="deleteAnswer('weakness3')">Delete</button>
                                <span class="saved-message" id="save-status-weakness3"></span>
                            </div>
                        </td>
                    </tr>
                 </tbody>
            </table>
             <p style="font-size: 0.9em; color: #eee; margin-top: 10px;"><span class="required-star" style="color:#f8d7da;">*</span> First Strength and Weakness are required.</p>
        </div>

        <!-- Reflection Question -->
        <div class="question-item"> <!-- Blue bordered box -->
            <div class="question-text">Reflection: How do these strengths and weaknesses impact your professional development?<span class="required-star">*</span></div>
            <textarea class="editable-answer required-answer" data-question="reflection1" placeholder="Consider how you can leverage strengths and mitigate weaknesses..."></textarea>
            <div class="answer-buttons">
                <button class="save-btn" onclick="saveAnswer('reflection1')">Save</button>
                <button class="delete-btn" onclick="deleteAnswer('reflection1')">Delete</button>
                <span class="saved-message" id="save-status-reflection1"></span>
                <span class="inline-error-message" id="error-reflection1"></span>
            </div>
        </div>

        <div class="media-container">
            <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                 alt="Person analyzing their skills and competencies"
                 loading="lazy">
            <p class="caption">Honest self-assessment is the foundation of self-coaching</p>
        </div>

        <h2 class="section-title">4.2 Using the GROW Model for Self-Coaching</h2>
        <p>In Chapter 2, we discussed how to use The GROW Model in one-on-one coaching sessions. You can effectively apply this same structured approach to coach yourself.</p>
        <p>The GROW Model helps you clarify goals, understand your current situation, explore possibilities, and commit to action. Remember to schedule regular self-check-ins to review progress.</p>

        <!-- GROW Model Action Card -->
        <div class="action-card"> <!-- Orange Card -->
            <h3>ACTION: Use the GROW Model for Self-Coaching</h3>
            <p>Apply the GROW model to a personal or professional goal.</p>

            <!-- Step 1: Goal -->
            <div class="model-section"> <!-- Nested section style (no border/bg) -->
                <h3>Step 1: Identify Your Goal (G)</h3>
                <p>Define what you want to achieve. Ensure your goal is SMART (Specific, Measurable, Achievable, Relevant, Time-bound).</p>
                <div class="question-item"> <!-- Light background box -->
                    <div class="question-text">My SMART Goal:<span class="required-star">*</span></div>
                    <textarea class="editable-answer required-answer" data-question="smart-goal" placeholder="e.g., Improve presentation skills by Q3, Delegate 2 tasks weekly..."></textarea>
                    <div class="answer-buttons">
                        <button class="save-btn" onclick="saveAnswer('smart-goal')">Save</button>
                        <button class="delete-btn" onclick="deleteAnswer('smart-goal')">Delete</button>
                        <span class="saved-message" id="save-status-smart-goal"></span>
                        <span class="inline-error-message" id="error-smart-goal"></span>
                    </div>
                </div>
            </div>

            <!-- Step 2: Reality -->
            <div class="model-section">
                <h3>Step 2: Examine Current Reality (R)</h3>
                <p>Honestly assess your current situation regarding this goal. What factors help or hinder you right now?</p>
                <div class="question-item">
                    <div class="question-text">Current Reality Assessment:<span class="required-star">*</span></div>
                    <textarea class="editable-answer required-answer" data-question="current-reality" placeholder="Describe where you are now relative to the goal, including obstacles and resources..."></textarea>
                    <div class="answer-buttons">
                        <button class="save-btn" onclick="saveAnswer('current-reality')">Save</button>
                        <button class="delete-btn" onclick="deleteAnswer('current-reality')">Delete</button>
                        <span class="saved-message" id="save-status-current-reality"></span>
                        <span class="inline-error-message" id="error-current-reality"></span>
                    </div>
                </div>
            </div>

            <!-- Step 3: Options -->
            <div class="model-section">
                <h3>Step 3: Explore Options (O)</h3>
                <p>Brainstorm different ways you could reach your goal. Consider pros and cons for each (list at least one option).</p>
                <table class="options-table"> <!-- Class for specific header colors -->
                     <thead>
                        <tr>
                            <th>Possible Options</th> <!-- Blue -->
                            <th>Advantages (Pros)</th> <!-- Green -->
                            <th>Disadvantages (Cons)</th> <!-- Red -->
                        </tr>
                     </thead>
                     <tbody>
                        <!-- Row 1 -->
                        <tr class="orange-row">
                            <td data-label="Option">
                                <textarea class="editable-answer required-answer" data-question="option1" placeholder="Option 1..."></textarea>
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('option1')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('option1')">Delete</button>
                                     <span class="saved-message" id="save-status-option1"></span>
                                     <span class="inline-error-message" id="error-option1"></span>
                                 </div>
                            </td>
                            <td data-label="Pros">
                                <textarea class="editable-answer" data-question="pro1" placeholder="Advantages..."></textarea>
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('pro1')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('pro1')">Delete</button>
                                     <span class="saved-message" id="save-status-pro1"></span>
                                 </div>
                            </td>
                            <td data-label="Cons">
                                <textarea class="editable-answer" data-question="con1" placeholder="Disadvantages..."></textarea>
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('con1')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('con1')">Delete</button>
                                     <span class="saved-message" id="save-status-con1"></span>
                                 </div>
                            </td>
                        </tr>
                        <!-- Row 2 -->
                        <tr class="orange-row">
                            <td data-label="Option">
                                <textarea class="editable-answer" data-question="option2" placeholder="Option 2 (optional)..."></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('option2')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('option2')">Delete</button>
                                     <span class="saved-message" id="save-status-option2"></span>
                                 </div>
                            </td>
                            <td data-label="Pros">
                                <textarea class="editable-answer" data-question="pro2" placeholder="Advantages..."></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('pro2')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('pro2')">Delete</button>
                                     <span class="saved-message" id="save-status-pro2"></span>
                                 </div>
                            </td>
                             <td data-label="Cons">
                                <textarea class="editable-answer" data-question="con2" placeholder="Disadvantages..."></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('con2')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('con2')">Delete</button>
                                     <span class="saved-message" id="save-status-con2"></span>
                                 </div>
                            </td>
                        </tr>
                         <!-- Row 3 -->
                        <tr class="orange-row">
                             <td data-label="Option">
                                <textarea class="editable-answer" data-question="option3" placeholder="Option 3 (optional)..."></textarea>
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('option3')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('option3')">Delete</button>
                                     <span class="saved-message" id="save-status-option3"></span>
                                 </div>
                            </td>
                            <td data-label="Pros">
                                <textarea class="editable-answer" data-question="pro3" placeholder="Advantages..."></textarea>
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('pro3')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('pro3')">Delete</button>
                                     <span class="saved-message" id="save-status-pro3"></span>
                                 </div>
                            </td>
                            <td data-label="Cons">
                                <textarea class="editable-answer" data-question="con3" placeholder="Disadvantages..."></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('con3')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('con3')">Delete</button>
                                     <span class="saved-message" id="save-status-con3"></span>
                                 </div>
                            </td>
                        </tr>
                     </tbody>
                </table>
                 <p style="font-size: 0.9em; color: #eee; margin-top: 10px;"><span class="required-star" style="color:#f8d7da;">*</span> First option is required.</p>
            </div>

            <!-- Step 4: Will -->
            <div class="model-section">
                <h3>Step 4: Establish the Will (W)</h3>
                <p>Commit to specific actions. Create a plan with dates and ways to measure success. Schedule regular check-ins.</p>
                <table class="will-table"> <!-- Class for specific header colors -->
                     <thead>
                        <tr>
                            <th>Action Steps</th> <!-- Blue -->
                            <th>Completion Date</th> <!-- Purple -->
                            <th>Success Measures</th> <!-- Orange -->
                        </tr>
                     </thead>
                     <tbody>
                        <!-- Row 1 -->
                        <tr class="orange-row">
                            <td data-label="Action">
                                <textarea class="editable-answer required-answer" data-question="action1" placeholder="Specific action step 1..."></textarea>
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('action1')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('action1')">Delete</button>
                                     <span class="saved-message" id="save-status-action1"></span>
                                     <span class="inline-error-message" id="error-action1"></span>
                                 </div>
                            </td>
                            <td data-label="Date">
                                <input type="date" class="editable-answer required-answer" data-question="date1">
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('date1')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('date1')">Delete</button>
                                     <span class="saved-message" id="save-status-date1"></span>
                                     <span class="inline-error-message" id="error-date1"></span>
                                 </div>
                            </td>
                            <td data-label="Measure">
                                <textarea class="editable-answer required-answer" data-question="measure1" placeholder="How will you know it's done/successful?"></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('measure1')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('measure1')">Delete</button>
                                     <span class="saved-message" id="save-status-measure1"></span>
                                     <span class="inline-error-message" id="error-measure1"></span>
                                 </div>
                            </td>
                        </tr>
                         <!-- Row 2 -->
                        <tr class="orange-row">
                             <td data-label="Action">
                                <textarea class="editable-answer" data-question="action2" placeholder="Action step 2 (optional)..."></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('action2')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('action2')">Delete</button>
                                     <span class="saved-message" id="save-status-action2"></span>
                                 </div>
                            </td>
                            <td data-label="Date">
                                <input type="date" class="editable-answer" data-question="date2">
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('date2')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('date2')">Delete</button>
                                     <span class="saved-message" id="save-status-date2"></span>
                                 </div>
                            </td>
                            <td data-label="Measure">
                                <textarea class="editable-answer" data-question="measure2" placeholder="How will you know it's done/successful?"></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('measure2')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('measure2')">Delete</button>
                                     <span class="saved-message" id="save-status-measure2"></span>
                                 </div>
                            </td>
                        </tr>
                         <!-- Row 3 -->
                        <tr class="orange-row">
                            <td data-label="Action">
                                <textarea class="editable-answer" data-question="action3" placeholder="Action step 3 (optional)..."></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('action3')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('action3')">Delete</button>
                                     <span class="saved-message" id="save-status-action3"></span>
                                 </div>
                            </td>
                            <td data-label="Date">
                                <input type="date" class="editable-answer" data-question="date3">
                                 <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('date3')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('date3')">Delete</button>
                                     <span class="saved-message" id="save-status-date3"></span>
                                 </div>
                            </td>
                            <td data-label="Measure">
                                <textarea class="editable-answer" data-question="measure3" placeholder="How will you know it's done/successful?"></textarea>
                                <div class="answer-buttons">
                                     <button class="save-btn" onclick="saveAnswer('measure3')">Save</button>
                                     <button class="delete-btn" onclick="deleteAnswer('measure3')">Delete</button>
                                     <span class="saved-message" id="save-status-measure3"></span>
                                 </div>
                            </td>
                        </tr>
                     </tbody>
                </table>
                 <p style="font-size: 0.9em; color: #eee; margin-top: 10px;"><span class="required-star" style="color:#f8d7da;">*</span> First Action Step, Date, and Measure are required.</p>
            </div>
        </div>

        <div class="highlight-section"> <!-- Orange Highlight -->
            <p><strong>TIP:</strong> Schedule regular "check-in" sessions with yourself (weekly or bi-weekly) to review your progress on your GROW plan. Treat these sessions as seriously as you would a coaching session with someone else - put them in your calendar and prepare for them.</p>
        </div>

         <!-- General Warning Message (for Next Button click) -->
        <div class="warning-message" id="generalWarningMessage">
            <strong>Action Required:</strong> Please complete all required fields (marked with <span class="required-star">*</span>) before proceeding.
        </div>

        <!-- Navigation Buttons -->
        <div class="button-container">
            <a href="coaching-team.html" class="button back">← Back to Team Coaching</a>
            <button type="button" class="button" id="nextButton">Next: Action Plan →</button>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal-overlay">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">×</button>
            <h3 style="color: #27ae60;">Section Complete!</h3> <!-- Consistent Green -->
            <p>All required answers for this section have been saved.</p>
            <p>You can now proceed to the next section.</p>
            <button class="modal-button" onclick="redirectToNextPage()">CONTINUE TO ACTION PLAN</button>
        </div>
    </div>

    <script>
        // --- Configuration ---
        const formspreeEndpoint = 'https://formspree.io/f/xzzeqvea'; // YOUR Formspree Endpoint
        const localStorageKey = 'allUserAnswers_selfCoaching'; // Specific key for THIS page
        const currentUserKey = 'currentUser'; // Key for storing the whole user object

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = getCurrentUser();
            if (!currentUser || !currentUser.email) {
                console.error("User not logged in or email missing. Redirecting...");
                window.location.href = `login.html?redirect=${encodeURIComponent(window.location.pathname)}`;
                return;
            }
            displayUserInfo(currentUser);
            loadUserAnswers(currentUser.email);
            setupEventListeners(currentUser.email);
            highlightActiveNav();
            addRequiredStars();
            setupMobileTableLabels();
        });

        // --- User Info & Authentication ---
        function getCurrentUser() { /* ... Consistent ... */
            try { const data = localStorage.getItem(currentUserKey); return data ? JSON.parse(data) : null; }
            catch (e) { console.error("Error parsing user data:", e); return null; }
        }
        function displayUserInfo(user) { /* ... Consistent ... */
            document.getElementById('userName').textContent = `Welcome, ${user.name || 'User'}`;
            document.getElementById('userEmail').textContent = user.email;
        }
        function logout() { /* ... Consistent ... */
            localStorage.removeItem('loggedIn'); localStorage.removeItem(currentUserKey);
            window.location.href = 'login.html';
        }
        function highlightActiveNav() { /* ... Consistent ... */
             const currentPath = window.location.pathname.split('/').pop() || 'index.html';
             document.querySelectorAll('.nav-tab a').forEach(link => {
                 link.classList.toggle('active', link.getAttribute('href') === currentPath);
             });
         }
         function addRequiredStars() { /* ... Consistent ... */
              document.querySelectorAll('.required-answer').forEach(field => {
                   let labelElement = field.closest('.question-item')?.querySelector('.question-text') ||
                                      field.closest('td')?.closest('table')?.querySelector(`th:nth-child(${field.closest('td').cellIndex + 1})`) || // Find header for table cells
                                      field.previousElementSibling; // Fallback

                    // Special case for SWOT table headers
                    if(field.closest('.swot-table')) {
                         labelElement = field.closest('td').closest('table').querySelector(`th:nth-child(${field.closest('td').cellIndex + 1})`);
                    }


                   if (labelElement && !labelElement.querySelector('.required-star')) {
                       labelElement.insertAdjacentHTML('beforeend', '<span class="required-star">*</span>');
                   }
               });
                // Hide redundant paragraph notes
               document.querySelectorAll('p:has(.required-star)').forEach(note => note.style.display = 'none');
         }
          function setupMobileTableLabels() { /* ... Consistent ... */
             document.querySelectorAll('table tbody tr').forEach(row => {
                 const headers = Array.from(row.closest('table').querySelectorAll('thead th')).map(th => th.textContent.replace('*','').trim());
                 row.querySelectorAll('td').forEach((td, index) => {
                     td.setAttribute('data-label', headers[index] || '');
                 });
             });
         }

        // --- Answer Handling (Local Storage) ---
        function loadUserAnswers(userEmail) { /* ... Consistent ... */
            if (!userEmail) return;
            let allAnswers = {};
            try {
                 const storedData = localStorage.getItem(localStorageKey);
                 if (storedData) { allAnswers = JSON.parse(storedData) || {}; }
            } catch(e) { console.error("Error parsing stored answers:", e); }
            const userPageAnswers = allAnswers[userEmail] || {};

            // Load all editable fields
            document.querySelectorAll('.editable-answer[data-question]').forEach(field => {
                 loadFieldState(field, field.dataset.question, userPageAnswers);
            });
        }

        function loadFieldState(field, questionId, userAnswers, showStatus = true) { /* ... Consistent ... */
             const statusId = `save-status-${questionId}`;
            const statusElement = document.getElementById(statusId);

            if (userAnswers[questionId] !== undefined) {
                field.value = userAnswers[questionId];
                 if (field.classList.contains('required-answer')) field.classList.remove('required-field');
                if (showStatus && userAnswers[questionId].trim() !== '' && statusElement) {
                     statusElement.textContent = '✓ Saved'; statusElement.style.display = 'inline';
                     setTimeout(() => { if (statusElement?.textContent === '✓ Saved') statusElement.style.display = 'none'; }, 3000);
                } else if (showStatus && statusElement) { statusElement.style.display = 'none'; }
            } else {
                field.value = ''; // Reset field
                 if (showStatus && statusElement) statusElement.style.display = 'none';
            }
        }

        function saveAnswerToStorage(userEmail, questionId, answer) { /* ... Consistent ... */
            if (!userEmail) return false;
             let allAnswers = {};
             try {
                 const storedData = localStorage.getItem(localStorageKey); if (storedData) { allAnswers = JSON.parse(storedData) || {}; }
             } catch(e) { console.error("Error parsing answers before save:", e); allAnswers = {}; }
            if (!allAnswers[userEmail]) { allAnswers[userEmail] = {}; }
            allAnswers[userEmail][questionId] = answer;
            try { localStorage.setItem(localStorageKey, JSON.stringify(allAnswers)); console.log(`Saved locally: ${questionId}`); return true; }
            catch (error) { console.error("Error saving to localStorage:", error); return false; }
        }

        function deleteAnswerFromStorage(userEmail, questionId) { /* ... Consistent ... */
            if (!userEmail) return false;
             let allAnswers = {};
              try { const storedData = localStorage.getItem(localStorageKey); if (storedData) { allAnswers = JSON.parse(storedData) || {}; } else { return false; } }
             catch(e) { console.error("Error parsing answers before delete:", e); return false; }
             let updated = false;
             if (allAnswers[userEmail]?.[questionId] !== undefined) {
                 delete allAnswers[userEmail][questionId]; updated = true;
                 if (Object.keys(allAnswers[userEmail]).length === 0) { delete allAnswers[userEmail]; }
             }
             if(updated) {
                try { localStorage.setItem(localStorageKey, JSON.stringify(allAnswers)); console.log(`Deleted locally: ${questionId}`); return true; }
                catch (error) { console.error("Error saving after delete:", error); return false; }
             }
             return false;
        }


        // --- Event Listeners Setup ---
        function setupEventListeners(userEmail) { /* ... Consistent ... */
            // Input listeners to clear validation errors
             document.querySelectorAll('.required-answer').forEach(field => {
                 const eventType = (field.type === 'date') ? 'change' : 'input'; // Use change for date input
                 field.addEventListener(eventType, function() {
                     const errorId = `error-${this.dataset.question}`;
                     if (this.value.trim() !== '') { // Date input value is never just whitespace
                         this.classList.remove('required-field');
                         hideError(errorId);
                     }
                 });
             });
            // Next button
            const nextButton = document.getElementById('nextButton');
            if (nextButton) { nextButton.addEventListener('click', handleNextButtonClick); }
        }

         function handleNextButtonClick(e) { /* ... Consistent ... */
              if (!validateAllAnswers(true)) {
                  e.preventDefault(); showGeneralWarningMessage();
              } else {
                  e.preventDefault(); showSuccessModal();
              }
        }


        // --- UI Feedback & Validation ---
        function validateAllAnswers(showErrors = false) { /* ... Consistent ... */
            let allValid = true;
            let firstInvalidField = null;

            document.querySelectorAll('.required-answer').forEach(field => {
                const questionId = field.dataset.question;
                const errorId = `error-${questionId}`;
                hideError(errorId); // Clear previous error

                if (field.value.trim() === '') {
                    allValid = false;
                    if (!firstInvalidField) firstInvalidField = field;
                    if (showErrors) {
                         field.classList.add('required-field');
                         showError(errorId, null, 'This field is required.');
                    }
                } else {
                    field.classList.remove('required-field'); // Explicitly remove if valid
                }
            });

            // Scroll to first error
            if (!allValid && showErrors && firstInvalidField) {
                firstInvalidField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                setTimeout(() => { try { firstInvalidField.focus({ preventScroll: true }); } catch (e) {} }, 400);
            }
            return allValid;
        }

        function showGeneralWarningMessage() { /* ... Consistent ... */
            const warningElement = document.getElementById('generalWarningMessage');
            if (!warningElement) return;
            warningElement.style.animation = 'none'; void warningElement.offsetWidth;
            warningElement.style.display = 'block';
            warningElement.style.animation = 'slideDownFadeIn 0.4s ease-out';
            clearTimeout(warningElement.timer);
            warningElement.timer = setTimeout(() => {
                warningElement.style.animation = 'fadeOutUp 0.5s ease-out forwards';
                 setTimeout(() => { if (warningElement.style.animationName === 'fadeOutUp') { warningElement.style.display = 'none'; warningElement.style.animation = ''; } }, 500);
            }, 4000);
        }
        function showSaveStatus(statusId, message = '✓ Saved') { /* ... Consistent ... */
             const statusElement = document.getElementById(statusId);
             if (!statusElement) return;
             statusElement.textContent = message;
             statusElement.classList.remove('deleted');
             statusElement.style.color = ''; // Reset color
             const actionCard = statusElement.closest('.action-card');
             if (actionCard) statusElement.style.color = '#d1e7dd'; else statusElement.style.color = '#27ae60';
             if (message.includes('Deleted')) {
                 statusElement.classList.add('deleted');
                  if (actionCard) statusElement.style.color = '#e9ecef'; else statusElement.style.color = '#6c757d';
             }
             statusElement.style.display = 'inline-block';
             clearTimeout(statusElement.timer);
             statusElement.timer = setTimeout(() => { statusElement.style.display = 'none'; }, 3000);
        }
        function showError(errorId, fieldToFocus, message = 'Required field.') { /* ... Consistent ... */
             const errorElement = document.getElementById(errorId);
             if (!errorElement) return;
             errorElement.textContent = message;
             const actionCard = errorElement.closest('.action-card');
             if (actionCard) errorElement.style.color = '#f8d7da'; else errorElement.style.color = '#e74c3c';
             errorElement.style.display = 'inline-block';
        }
        function hideError(errorId) { /* ... Consistent ... */
             const errorElement = document.getElementById(errorId); if (errorElement) errorElement.style.display = 'none';
        }
        function hideMessages(statusId, errorId, field) { /* ... Consistent ... */
             hideError(errorId);
             const statusElement = statusId ? document.getElementById(statusId) : null;
             if (statusElement) statusElement.style.display = 'none';
             if (field) field.classList.remove('required-field');
        }

        // --- Actions (Save/Delete Single Fields) ---
        function saveAnswer(questionId) { /* ... Consistent ... */
             const currentUser = getCurrentUser(); if (!currentUser?.email) return;
             const field = document.querySelector(`[data-question="${questionId}"]`); if (!field) return;
             const statusId = `save-status-${questionId}`; const errorId = `error-${questionId}`;
             const answer = field.value; const trimmedAnswer = answer.trim();
             const isRequired = field.classList.contains('required-answer');
             hideMessages(statusId, errorId, field);
             if (isRequired && !trimmedAnswer) { showError(errorId, field, 'This field is required.'); return; }
             if (saveAnswerToStorage(currentUser.email, questionId, answer)) {
                 if (trimmedAnswer) submitToFormspree(currentUser.email, questionId, answer);
                 showSaveStatus(statusId); field.classList.remove('required-field');
             }
        }
        function deleteAnswer(questionId) { /* ... Consistent ... */
            const currentUser = getCurrentUser(); if (!currentUser?.email) return;
            const field = document.querySelector(`[data-question="${questionId}"]`); if (!field) return;
            const statusId = `save-status-${questionId}`; const errorId = `error-${questionId}`;
            hideMessages(statusId, errorId, field); field.value = '';
            if (deleteAnswerFromStorage(currentUser.email, questionId)) { showSaveStatus(statusId, '✓ Deleted'); }
            field.classList.remove('required-field');
        }


        // --- Formspree Submission ---
        function submitToFormspree(userEmail, questionId, answer) { /* ... Consistent ... */
            if (!answer?.trim()) return;
            if (!formspreeEndpoint) { console.warn("Formspree endpoint not configured."); return; }
            if (!userEmail) { console.warn("No user email for Formspree."); return; }
            const formData = new FormData();
            formData.append('email', userEmail);
            formData.append('page', document.title);
            formData.append('page_key', 'selfCoaching'); // Page identifier
            formData.append('question_id', questionId);
            formData.append('answer_text', answer);
            const currentUser = getCurrentUser();
            if (currentUser?.name) formData.append('user_name', currentUser.name);
            // Add Context
             const fieldElement = document.querySelector(`[data-question="${questionId}"]`);
             let context = `Q-ID: ${questionId}`;
             if(fieldElement) {
                 const qItem = fieldElement.closest('.question-item');
                 const table = fieldElement.closest('table');
                 const card = fieldElement.closest('.action-card');
                 if(qItem?.querySelector('.question-text')) context = qItem.querySelector('.question-text').textContent.replace('*','').trim();
                 else if (card?.querySelector('h3')) context = `${card.querySelector('h3').textContent} - ${questionId}`;
                 else if (table) context = `Table Field - ${questionId}`;
             }
              formData.append('question_context', context);
            fetch(formspreeEndpoint, { method: 'POST', body: formData, headers: { 'Accept': 'application/json' } })
            .then(response => {
                if (response.ok) { console.log(`Formspree: ${questionId} submitted.`); }
                else { response.json().then(data => console.error(`Formspree error (${questionId}):`, data.errors?.map(e=>e.message).join(', ') || `Status ${response.status}`)).catch(()=>console.error(`Formspree non-JSON error (${questionId}). Status: ${response.status}`)); }
            })
            .catch(error => console.error(`Network error submitting (${questionId}):`, error));
        }

        // --- Modal Handling ---
        function showSuccessModal() { /* ... Consistent ... */
             const modal = document.getElementById('successModal'); if(modal) modal.style.display = 'flex';
        }
        function closeModal() { /* ... Consistent ... */
            const modal = document.getElementById('successModal'); if(modal) modal.style.display = 'none';
        }
        function redirectToNextPage() { /* ... Consistent ... */
            window.location.href = 'action-plan.html'; // UPDATE to correct next page
        }

    </script>
</body>
</html>
