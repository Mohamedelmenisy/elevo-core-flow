<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self Coaching</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            margin: 0;
            padding: 0;
            line-height: 1.6;
            background-color: #f9f9f9;
            color: #333;
        }

        /* User Bar Styles */
        .user-bar {
            background-color: #34495e;
            padding: 10px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            font-size: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            font-size: 15px;
        }

        .user-email {
            font-size: 13px;
            opacity: 0.8;
        }

        .logout-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .logout-button:hover {
            background-color: #c0392b;
            transform: translateY(-1px);
        }

        .logout-button:active {
            transform: translateY(0);
        }

        /* Navigation Tabs */
        .nav-tab {
            background-color: #2c3e50;
            padding: 10px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav-tab a {
            color: white;
            text-decoration: none;
            margin: 0 10px;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .nav-tab a:hover {
            background-color: #34495e;
        }
        
        /* Main Content Styles */
        header {
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        .section-title {
            color: #3498db;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
            border-bottom: 2px solid #3498db;
            padding-bottom: 8px;
        }
        
        .highlight-section {
            background-color: rgba(230, 126, 34, 0.1);
            padding: 15px;
            border-left: 4px solid #e67e22;
            border-radius: 0 4px 4px 0;
            margin: 15px 0;
        }
        
        .action-card {
            background-color: #e67e22;
            color: white;
            padding: 20px;
            border-radius: 6px;
            margin: 20px 0;
        }
        
        .media-container {
            text-align: center;
            margin: 20px 0;
        }
        
        .media-container img {
            max-width: 100%;
            height: auto;
            border-radius: 6px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .caption {
            font-style: italic;
            color: #777;
            margin-top: 8px;
        }
        
        .question-item {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }
        
        .question-text {
            color: #2c3e50;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .editable-answer {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 10px 0;
            background-color: white;
        }
        
        .editable-answer:empty:before {
            content: attr(placeholder);
            color: #aaa;
        }
        
        .save-btn {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-right: 5px;
        }
        
        .delete-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .save-btn:hover {
            background-color: #219653;
        }
        
        .delete-btn:hover {
            background-color: #c0392b;
        }
        
        .saved-message {
            color: #27ae60;
            font-size: 14px;
            margin-left: 10px;
            display: none;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 14px;
        }
        
        table, th, td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        
        th {
            background-color: #f2f2f2;
        }
        
        .action-table {
            width: 100%;
            margin: 20px 0;
            background-color: #f8f9fa;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .action-table th {
            background-color: #3498db;
            color: white;
        }
        
        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 20px;
        }
        
        .button {
            background-color: #3498db;
            color: white;
            padding: 12px 20px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: bold;
            border: none;
            cursor: pointer;
            flex: 1;
            text-align: center;
            transition: background-color 0.3s;
        }
        
        .button:hover {
            background-color: #2980b9;
        }
        
        .button.back {
            background-color: #95a5a6;
        }
        
        .button.back:hover {
            background-color: #7f8c8d;
        }
        
        .warning-message {
            background-color: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            color: #333;
            display: none;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .required-field {
            border: 2px solid #e74c3c !important;
            background-color: #ffeeee !important;
            animation: pulse 1s infinite alternate;
        }
        
        @keyframes pulse {
            from { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.4); }
            to { box-shadow: 0 0 0 6px rgba(231, 76, 60, 0); }
        }
        
        @media (max-width: 600px) {
            .button-container {
                flex-direction: column;
            }
        }
        
        .model-section {
            background-color: rgba(52, 152, 219, 0.1);
            padding: 20px;
            border-left: 4px solid #3498db;
            border-radius: 6px;
            margin: 20px 0;
        }
        
        .trust-section {
            background-color: rgba(46, 204, 113, 0.1);
            padding: 20px;
            border-left: 4px solid #2ecc71;
            border-radius: 6px;
            margin: 20px 0;
        }
        
        .rapport-section {
            background-color: rgba(155, 89, 182, 0.1);
            padding: 20px;
            border-left: 4px solid #9b59b6;
            border-radius: 6px;
            margin: 20px 0;
        }
        
        .informal-tips {
            background-color: rgba(241, 196, 15, 0.1);
            padding: 20px;
            border-left: 4px solid #f1c40f;
            border-radius: 6px;
            margin: 20px 0;
        }
        
        .orange-header {
            background-color: #e67e22;
            color: #2c3e50;
            padding: 10px;
            text-align: center;
            border-radius: 4px 4px 0 0;
            font-size: 14px;
            font-weight: bold;
        }
        
        .orange-row {
            background-color: rgba(230, 126, 34, 0.1);
        }
        
        .orange-row input, .orange-row select {
            width: 90%;
            padding: 5px;
            font-size: 13px;
        }
        
        .orange-row .save-btn {
            padding: 5px 8px;
            font-size: 12px;
        }
        
        .orange-row .delete-btn {
            padding: 5px 8px;
            font-size: 12px;
        }
        
        .drawing-together {
            display: flex;
            align-items: center;
            gap: 20px;
            background-color: rgba(155, 89, 182, 0.1);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #9b59b6;
        }
        
        .drawing-icon {
            font-size: 40px;
            color: #9b59b6;
            flex-shrink: 0;
        }
        
        .answer-buttons {
            display: flex;
            gap: 5px;
        }
        
        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 8px;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }
        
        .modal-button {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #777;
        }
    </style>
</head>
<body>
    <!-- User Info Bar -->
    <div class="user-bar">
        <div class="user-info">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.8;">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <div class="user-details">
                <span class="user-name" id="userName">Welcome back</span>
                <span class="user-email" id="userEmail">user@example.com</span>
            </div>
        </div>
        <button class="logout-button" onclick="logout()">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            Logout
        </button>
    </div>

    <!-- Navigation Tabs -->
    <nav class="nav-tab">
        <a href="index.html">Home</a>
        <a href="article1.html">Article 1</a>
        <a href="coaching-skills.html">Coaching Skills</a>
        <a href="coaching-individuals.html">Coaching Individuals</a>
        <a href="coaching-team.html">Team Coaching</a>
        <a href="coaching-yourself.html">Self Coaching</a>
    </nav>

    <header>
        <h1>Self Coaching</h1>
        <p>Applying coaching techniques for personal development</p>
    </header>

    <div class="container">
        <h2 class="section-title">4. Coaching Yourself</h2>
        
        <div class="highlight-section">
            <p>A coach's role is to solve problems, identify goals and put action plans into place. Once you've learned to use these skills, you can apply them to yourself, too.</p>
        </div>
        
        <p>As we've seen, the coaching process can boost your team members' confidence, build their self- awareness, and help to keep them motivated. So why stop there?</p>
        
        <p>Using the skills you've learned to coach yourself is a great way to "practice what you preach" with your team. And, as a role model, your people will be inspired to achieve their goals when they see you fulfilling yours.</p>
        
        <div class="media-container">
            <img src="https://images.unsplash.com/photo-1600880292203-757bb62b4baf?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" 
                 alt="Woman reviewing her personal development plan with coaching techniques" 
                 loading="lazy">
            <p class="caption">Applying coaching techniques to your own development</p>
        </div>

        <h2 class="section-title">4.1. Identifying Your Strengths and Weaknesses</h2>
        
        <p>Before you begin any journey, you need to know your starting point. It's the same with coaching. When you begin to coach yourself, you have to understand your strengths and weaknesses.</p>
        
        <p>When you know what you're good at, you can use those strengths to achieve your goals. And when you identify your weakest areas, you can come up with strategies to address them, or to minimize their impact.</p>
        
        <div class="action-card">
            <h3>ACTION: Perform a personal SWOT analysis</h3>
            
            <table>
                <tr>
                    <th style="background-color: #27ae60; color: white;">My Strengths</th>
                    <th style="background-color: #e74c3c; color: white;">My Weaknesses</th>
                </tr>
                <tr class="orange-row">
                    <td>
                        <textarea class="editable-answer" id="strength1" placeholder="Enter your biggest strength"></textarea>
                        <button class="delete-btn" onclick="deleteAnswer('strength1')">Delete</button>
                    </td>
                    <td>
                        <textarea class="editable-answer" id="weakness1" placeholder="Enter your biggest weakness"></textarea>
                        <button class="delete-btn" onclick="deleteAnswer('weakness1')">Delete</button>
                    </td>
                </tr>
                <tr class="orange-row">
                    <td>
                        <textarea class="editable-answer" id="strength2" placeholder="Enter another strength"></textarea>
                        <button class="delete-btn" onclick="deleteAnswer('strength2')">Delete</button>
                    </td>
                    <td>
                        <textarea class="editable-answer" id="weakness2" placeholder="Enter another weakness"></textarea>
                        <button class="delete-btn" onclick="deleteAnswer('weakness2')">Delete</button>
                    </td>
                </tr>
                <tr class="orange-row">
                    <td>
                        <textarea class="editable-answer" id="strength3" placeholder="Enter another strength"></textarea>
                        <button class="delete-btn" onclick="deleteAnswer('strength3')">Delete</button>
                    </td>
                    <td>
                        <textarea class="editable-answer" id="weakness3" placeholder="Enter another weakness"></textarea>
                        <button class="delete-btn" onclick="deleteAnswer('weakness3')">Delete</button>
                    </td>
                </tr>
            </table>
            
            <div class="answer-buttons">
                <button class="save-btn" onclick="saveSwotAnalysis()">Save Analysis</button>
                <button class="delete-btn" onclick="deleteSwotAnalysis()">Delete All</button>
                <span class="saved-message" id="saved-swot">✓ Saved</span>
            </div>
        </div>
        
        <div class="question-item">
            <div class="question-text">Reflection Questions: How do these strengths and weaknesses impact your professional development?</div>
            <div class="editable-answer" contenteditable="true" id="reflection1" placeholder="Enter your reflection here..."></div>
            <div class="answer-buttons">
                <button class="save-btn" onclick="saveAnswer('reflection1')">Save Answer</button>
                <button class="delete-btn" onclick="deleteAnswer('reflection1')">Delete Answer</button>
            </div>
            <span class="saved-message" id="saved-reflection1">✓ Saved</span>
        </div>
        
        <div class="media-container">
            <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" 
                 alt="Person analyzing their skills and competencies" 
                 loading="lazy">
            <p class="caption">Honest self-assessment is the foundation of self-coaching</p>
        </div>

        <h2 class="section-title">4.2. The GROW Model</h2>
        
        <p>In Chapter 2, we discussed how to use The GROW Model in one-on-one coaching sessions. But you can use it to coach yourself, too.</p>
        
        <p>The GROW Model can help you to identify a goal and to decide on a plan of action to achieve it. If you use this model, be sure to set aside time each week to "check in" with yourself and assess your progress.</p>
        
        <div class="action-card">
            <h3>ACTION: Use the GROW Model for Self-Coaching</h3>
            
            <div class="model-section">
                <h3>Step 1: Identify Your Goal</h3>
                <p>Your first step is to identify the goal that you want to achieve. This could be a behavior that you want to change, or a new skill that you want to develop.</p>
                <p>Make sure your goal is SMART: Specific, Measurable, Attainable, Relevant, and Time-Bound.</p>
                
                <div class="question-item">
                    <div class="question-text">My SMART Goal:</div>
                    <div class="editable-answer" contenteditable="true" id="smart-goal" placeholder="Enter your SMART goal here..."></div>
                    <div class="answer-buttons">
                        <button class="save-btn" onclick="saveAnswer('smart-goal')">Save Goal</button>
                        <button class="delete-btn" onclick="deleteAnswer('smart-goal')">Delete Goal</button>
                    </div>
                    <span class="saved-message" id="saved-smart-goal">✓ Saved</span>
                </div>
            </div>
            
            <div class="model-section">
                <h3>Step 2: Identify Your Current Reality</h3>
                <p>Next, look at your situation. This is your starting point. Examine the factors that might help or hinder your progress toward this goal.</p>
                
                <div class="question-item">
                    <div class="question-text">Current Reality Assessment:</div>
                    <div class="editable-answer" contenteditable="true" id="current-reality" placeholder="Describe your current situation..."></div>
                    <div class="answer-buttons">
                        <button class="save-btn" onclick="saveAnswer('current-reality')">Save Assessment</button>
                        <button class="delete-btn" onclick="deleteAnswer('current-reality')">Delete Assessment</button>
                    </div>
                    <span class="saved-message" id="saved-current-reality">✓ Saved</span>
                </div>
            </div>
            
            <div class="model-section">
                <h3>Step 3: Explore the Options</h3>
                <p>Now, you need to think about how you will reach your goal. Identify as many different ways as possible to do so.</p>
                
                <table>
                    <tr>
                        <th>Possible Options</th>
                        <th>Advantages</th>
                        <th>Disadvantages</th>
                    </tr>
                    <tr class="orange-row">
                        <td>
                            <textarea class="editable-answer" id="option1" placeholder="Option 1"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('option1')">Delete</button>
                        </td>
                        <td>
                            <textarea class="editable-answer" id="pro1" placeholder="Pros"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('pro1')">Delete</button>
                        </td>
                        <td>
                            <textarea class="editable-answer" id="con1" placeholder="Cons"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('con1')">Delete</button>
                        </td>
                    </tr>
                    <tr class="orange-row">
                        <td>
                            <textarea class="editable-answer" id="option2" placeholder="Option 2"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('option2')">Delete</button>
                        </td>
                        <td>
                            <textarea class="editable-answer" id="pro2" placeholder="Pros"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('pro2')">Delete</button>
                        </td>
                        <td>
                            <textarea class="editable-answer" id="con2" placeholder="Cons"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('con2')">Delete</button>
                        </td>
                    </tr>
                    <tr class="orange-row">
                        <td>
                            <textarea class="editable-answer" id="option3" placeholder="Option 3"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('option3')">Delete</button>
                        </td>
                        <td>
                            <textarea class="editable-answer" id="pro3" placeholder="Pros"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('pro3')">Delete</button>
                        </td>
                        <td>
                            <textarea class="editable-answer" id="con3" placeholder="Cons"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('con3')">Delete</button>
                        </td>
                    </tr>
                </table>
                
                <div class="answer-buttons">
                    <button class="save-btn" onclick="saveOptions()">Save Options</button>
                    <button class="delete-btn" onclick="deleteOptions()">Delete All</button>
                    <span class="saved-message" id="saved-options">✓ Saved</span>
                </div>
            </div>
            
            <div class="model-section">
                <h3>Step 4: Establish the Will</h3>
                <p>Create a strategy to achieve your goal. Having a plan of action will boost your confidence and motivation. Check your progress regularly.</p>
                
                <table>
                    <tr>
                        <th>Action Steps</th>
                        <th>Completion Date</th>
                        <th>Success Measures</th>
                    </tr>
                    <tr class="orange-row">
                        <td>
                            <textarea class="editable-answer" id="action1" placeholder="Action step 1"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('action1')">Delete</button>
                        </td>
                        <td>
                            <input type="date" class="editable-answer" id="date1">
                            <button class="delete-btn" onclick="deleteAnswer('date1')">Delete</button>
                        </td>
                        <td>
                            <textarea class="editable-answer" id="measure1" placeholder="How will you measure success?"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('measure1')">Delete</button>
                        </td>
                    </tr>
                    <tr class="orange-row">
                        <td>
                            <textarea class="editable-answer" id="action2" placeholder="Action step 2"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('action2')">Delete</button>
                        </td>
                        <td>
                            <input type="date" class="editable-answer" id="date2">
                            <button class="delete-btn" onclick="deleteAnswer('date2')">Delete</button>
                        </td>
                        <td>
                            <textarea class="editable-answer" id="measure2" placeholder="How will you measure success?"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('measure2')">Delete</button>
                        </td>
                    </tr>
                    <tr class="orange-row">
                        <td>
                            <textarea class="editable-answer" id="action3" placeholder="Action step 3"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('action3')">Delete</button>
                        </td>
                        <td>
                            <input type="date" class="editable-answer" id="date3">
                            <button class="delete-btn" onclick="deleteAnswer('date3')">Delete</button>
                        </td>
                        <td>
                            <textarea class="editable-answer" id="measure3" placeholder="How will you measure success?"></textarea>
                            <button class="delete-btn" onclick="deleteAnswer('measure3')">Delete</button>
                        </td>
                    </tr>
                </table>
                
                <div class="answer-buttons">
                    <button class="save-btn" onclick="saveActionPlan()">Save Action Plan</button>
                    <button class="delete-btn" onclick="deleteActionPlan()">Delete All</button>
                    <span class="saved-message" id="saved-action-plan">✓ Saved</span>
                </div>
            </div>
        </div>

        <div class="highlight-section">
            <p>TIP: Schedule regular "check-in" sessions with yourself (weekly or bi-weekly) to review your progress. Treat these sessions as seriously as you would a coaching session with someone else - put them in your calendar and prepare for them.</p>
        </div>

        <div class="warning-message" id="warningMessage">
            <strong>Action Required:</strong> Please complete all questions before proceeding. 
            Unanswered questions are highlighted in red.
        </div>

        <div class="button-container">
            <button type="button" class="button back" id="backButton">← Back to Team Coaching</button>
            <button type="button" class="button" id="nextButton">Next: Coaching Action Plan →</button>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal-overlay">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">×</button>
            <h3>Thank You for Your Submission!</h3>
            <p>We appreciate you taking the time to complete this section. Your answers have been saved.</p>
            <p>You can now proceed to the next section or review your answers.</p>
            <button class="modal-button" onclick="redirectToNextPage()">CONTINUE TO NEXT SECTION</button>
        </div>
    </div>

    <script>
        // Initialize userAnswers object if it doesn't exist
        if (!localStorage.getItem('allUserAnswers')) {
            localStorage.setItem('allUserAnswers', JSON.stringify({}));
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Get user data from localStorage
            const userData = JSON.parse(localStorage.getItem('currentUser')) || {};
            const userEmail = userData.email || localStorage.getItem('userEmail');
            
            if (!userEmail) {
                alert('Please login to access this page.');
                window.location.href = 'login.html';
                return;
            }

            // Display user info in the header
            document.getElementById('userName').textContent = `Welcome, ${userData.name || 'User'}`;
            document.getElementById('userEmail').textContent = userEmail;
            
            // Load user's answers
            loadUserAnswers(userEmail);
            
            // Auto-save when user types in a field
            document.querySelectorAll('.editable-answer').forEach(field => {
                field.addEventListener('input', function() {
                    const questionId = this.id;
                    const answer = this.hasAttribute('contenteditable') ? this.innerHTML : this.value;
                    saveAnswerToStorage(userEmail, questionId, answer);
                    
                    // Remove required field styling if content exists
                    if ((this.hasAttribute('contenteditable') && this.innerHTML.trim() !== '') || 
                        (!this.hasAttribute('contenteditable') && this.value.trim() !== '')) {
                        this.classList.remove('required-field');
                    }
                });
            });
            
            // Save buttons
            document.querySelectorAll('.save-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    const questionId = this.getAttribute('onclick').match(/'([^']+)'/)[1];
                    const field = document.getElementById(questionId);
                    const answer = field.hasAttribute('contenteditable') ? field.innerHTML : field.value;
                    
                    if (answer.trim() === '') {
                        field.classList.add('required-field');
                        return;
                    }
                    
                    saveAnswerToStorage(userEmail, questionId, answer);
                    field.classList.remove('required-field');
                    
                    // Show saved message
                    let savedMsg;
                    if (questionId.startsWith('strength') || questionId.startsWith('weakness')) {
                        savedMsg = document.getElementById('saved-swot');
                    } else if (questionId.startsWith('option') || questionId.startsWith('pro') || questionId.startsWith('con')) {
                        savedMsg = document.getElementById('saved-options');
                    } else if (questionId.startsWith('action') || questionId.startsWith('date') || questionId.startsWith('measure')) {
                        savedMsg = document.getElementById('saved-action-plan');
                    } else {
                        savedMsg = document.getElementById(`saved-${questionId.replace('1', '').replace('2', '').replace('3', '')}`);
                    }
                    
                    if (savedMsg) {
                        savedMsg.style.display = 'inline';
                        setTimeout(() => savedMsg.style.display = 'none', 2000);
                    }
                });
            });
            
            // Delete buttons
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    const questionId = this.getAttribute('onclick').match(/'([^']+)'/)[1];
                    const field = document.getElementById(questionId);
                    
                    if (field.hasAttribute('contenteditable')) {
                        field.innerHTML = '';
                    } else {
                        field.value = '';
                    }
                    
                    deleteAnswerFromStorage(userEmail, questionId);
                    field.classList.add('required-field');
                    
                    // Show deleted message
                    let savedMsg;
                    if (questionId.startsWith('strength') || questionId.startsWith('weakness')) {
                        savedMsg = document.getElementById('saved-swot');
                    } else if (questionId.startsWith('option') || questionId.startsWith('pro') || questionId.startsWith('con')) {
                        savedMsg = document.getElementById('saved-options');
                    } else if (questionId.startsWith('action') || questionId.startsWith('date') || questionId.startsWith('measure')) {
                        savedMsg = document.getElementById('saved-action-plan');
                    } else {
                        savedMsg = document.getElementById(`saved-${questionId.replace('1', '').replace('2', '').replace('3', '')}`);
                    }
                    
                    if (savedMsg) {
                        savedMsg.textContent = '✓ Deleted';
                        savedMsg.style.display = 'inline';
                        setTimeout(() => {
                            savedMsg.style.display = 'none';
                            savedMsg.textContent = '✓ Saved';
                        }, 2000);
                    }
                });
            });
            
            // Navigation buttons
            document.getElementById('backButton').addEventListener('click', function() {
                window.location.href = 'coaching-team.html';
            });
            
            document.getElementById('nextButton').addEventListener('click', function(e) {
                const allFields = [
                    'strength1', 'weakness1', 'reflection1',
                    'smart-goal', 'current-reality',
                    'option1', 'pro1', 'con1',
                    'action1', 'date1', 'measure1'
                ];
                let allAnswered = true;
                
                // Check all fields and mark empty ones
                allFields.forEach(id => {
                    const field = document.getElementById(id);
                    if ((field.hasAttribute('contenteditable') && field.innerHTML.trim() === '') || 
                        (!field.hasAttribute('contenteditable') && field.value.trim() === '')) {
                        allAnswered = false;
                        field.classList.add('required-field');
                    }
                });
                
                if (!allAnswered) {
                    e.preventDefault();
                    const warningMessage = document.getElementById('warningMessage');
                    
                    // Show warning message
                    warningMessage.style.display = 'block';
                    
                    // Scroll to first empty field
                    const firstEmpty = Array.from(document.querySelectorAll('.editable-answer, input')).find(el => 
                        (el.hasAttribute('contenteditable') && el.innerHTML.trim() === '') || 
                        (el.tagName === 'INPUT' && el.value.trim() === '')
                    );
                    if (firstEmpty) {
                        firstEmpty.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        firstEmpty.focus();
                    }
                } else {
                    // Show success modal
                    document.getElementById('successModal').style.display = 'flex';
                }
            });
        });

        function loadUserAnswers(userEmail) {
            const allAnswers = JSON.parse(localStorage.getItem('allUserAnswers'));
            const userAnswers = allAnswers[userEmail] || {};
            
            // Load answers into fields
            ['strength1', 'strength2', 'strength3',
             'weakness1', 'weakness2', 'weakness3',
             'reflection1', 'smart-goal', 'current-reality',
             'option1', 'option2', 'option3',
             'pro1', 'pro2', 'pro3',
             'con1', 'con2', 'con3',
             'action1', 'action2', 'action3',
             'date1', 'date2', 'date3',
             'measure1', 'measure2', 'measure3'].forEach(id => {
                if (userAnswers[id]) {
                    const element = document.getElementById(id);
                    if (element) {
                        if (element.hasAttribute('contenteditable')) {
                            element.innerHTML = userAnswers[id];
                        } else {
                            element.value = userAnswers[id];
                        }
                    }
                }
            });
        }

        function saveSwotAnalysis() {
            const userEmail = localStorage.getItem('userEmail') || JSON.parse(localStorage.getItem('currentUser')).email;
            if (!userEmail) {
                alert('Please login to save your answers.');
                return;
            }

            const allAnswers = JSON.parse(localStorage.getItem('allUserAnswers'));
            const userAnswers = allAnswers[userEmail] || {};

            for (let i = 1; i <= 3; i++) {
                userAnswers[`strength${i}`] = document.getElementById(`strength${i}`).value;
                userAnswers[`weakness${i}`] = document.getElementById(`weakness${i}`).value;
            }

            allAnswers[userEmail] = userAnswers;
            localStorage.setItem('allUserAnswers', JSON.stringify(allAnswers));

            const savedMsg = document.getElementById('saved-swot');
            savedMsg.style.display = 'inline';
            setTimeout(() => savedMsg.style.display = 'none', 2000);
        }

        function deleteSwotAnalysis() {
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`strength${i}`).value = '';
                document.getElementById(`weakness${i}`).value = '';
            }

            const userEmail = localStorage.getItem('userEmail') || JSON.parse(localStorage.getItem('currentUser')).email;
            if (userEmail) {
                const allAnswers = JSON.parse(localStorage.getItem('allUserAnswers'));
                const userAnswers = allAnswers[userEmail] || {};

                for (let i = 1; i <= 3; i++) {
                    delete userAnswers[`strength${i}`];
                    delete userAnswers[`weakness${i}`];
                }

                allAnswers[userEmail] = userAnswers;
                localStorage.setItem('allUserAnswers', JSON.stringify(allAnswers));
            }

            const savedMsg = document.getElementById('saved-swot');
            savedMsg.textContent = '✓ Deleted';
            savedMsg.style.display = 'inline';
            setTimeout(() => {
                savedMsg.style.display = 'none';
                savedMsg.textContent = '✓ Saved';
            }, 2000);
        }

        function saveOptions() {
            const userEmail = localStorage.getItem('userEmail') || JSON.parse(localStorage.getItem('currentUser')).email;
            if (!userEmail) {
                alert('Please login to save your answers.');
                return;
            }

            const allAnswers = JSON.parse(localStorage.getItem('allUserAnswers'));
            const userAnswers = allAnswers[userEmail] || {};

            for (let i = 1; i <= 3; i++) {
                userAnswers[`option${i}`] = document.getElementById(`option${i}`).value;
                userAnswers[`pro${i}`] = document.getElementById(`pro${i}`).value;
                userAnswers[`con${i}`] = document.getElementById(`con${i}`).value;
            }

            allAnswers[userEmail] = userAnswers;
            localStorage.setItem('allUserAnswers', JSON.stringify(allAnswers));

            const savedMsg = document.getElementById('saved-options');
            savedMsg.style.display = 'inline';
            setTimeout(() => savedMsg.style.display = 'none', 2000);
        }

        function deleteOptions() {
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`option${i}`).value = '';
                document.getElementById(`pro${i}`).value = '';
                document.getElementById(`con${i}`).value = '';
            }

            const userEmail = localStorage.getItem('userEmail') || JSON.parse(localStorage.getItem('currentUser')).email;
            if (userEmail) {
                const allAnswers = JSON.parse(localStorage.getItem('allUserAnswers'));
                const userAnswers = allAnswers[userEmail] || {};

                for (let i = 1; i <= 3; i++) {
                    delete userAnswers[`option${i}`];
                    delete userAnswers[`pro${i}`];
                    delete userAnswers[`con${i}`];
                }

                allAnswers[userEmail] = userAnswers;
                localStorage.setItem('allUserAnswers', JSON.stringify(allAnswers));
            }

            const savedMsg = document.getElementById('saved-options');
            savedMsg.textContent = '✓ Deleted';
            savedMsg.style.display = 'inline';
            setTimeout(() => {
                savedMsg.style.display = 'none';
                savedMsg.textContent = '✓ Saved';
            }, 2000);
        }

        function saveActionPlan() {
            const userEmail = localStorage.getItem('userEmail') || JSON.parse(localStorage.getItem('currentUser')).email;
            if (!userEmail) {
                alert('Please login to save your answers.');
                return;
            }

            const allAnswers = JSON.parse(localStorage.getItem('allUserAnswers'));
            const userAnswers = allAnswers[userEmail] || {};

            for (let i = 1; i <= 3; i++) {
                userAnswers[`action${i}`] = document.getElementById(`action${i}`).value;
                userAnswers[`date${i}`] = document.getElementById(`date${i}`).value;
                userAnswers[`measure${i}`] = document.getElementById(`measure${i}`).value;
            }

            allAnswers[userEmail] = userAnswers;
            localStorage.setItem('allUserAnswers', JSON.stringify(allAnswers));

            const savedMsg = document.getElementById('saved-action-plan');
            savedMsg.style.display = 'inline';
            setTimeout(() => savedMsg.style.display = 'none', 2000);
        }

        function deleteActionPlan() {
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`action${i}`).value = '';
                document.getElementById(`date${i}`).value = '';
                document.getElementById(`measure${i}`).value = '';
            }

            const userEmail = localStorage.getItem('userEmail') || JSON.parse(localStorage.getItem('currentUser')).email;
            if (userEmail) {
                const allAnswers = JSON.parse(localStorage.getItem('allUserAnswers'));
                const userAnswers = allAnswers[userEmail] || {};

                for (let i = 1; i <= 3; i++) {
                    delete userAnswers[`action${i}`];
                    delete userAnswers[`date${i}`];
                    delete userAnswers[`measure${i}`];
                }

                allAnswers[userEmail] = userAnswers;
                localStorage.setItem('allUserAnswers', JSON.stringify(allAnswers));
            }

            const savedMsg = document.getElementById('saved-action-plan');
            savedMsg.textContent = '✓ Deleted';
            savedMsg.style.display = 'inline';
            setTimeout(() => {
                savedMsg.style.display = 'none';
                savedMsg.textContent = '✓ Saved';
            }, 2000);
        }

        function saveAnswerToStorage(userEmail, questionId, answer) {
            const allAnswers = JSON.parse(localStorage.getItem('allUserAnswers'));
            const userAnswers = allAnswers[userEmail] || {};
            
            userAnswers[questionId] = answer;
            allAnswers[userEmail] = userAnswers;
            localStorage.setItem('allUserAnswers', JSON.stringify(allAnswers));
        }
        
        function deleteAnswerFromStorage(userEmail, questionId) {
            const allAnswers = JSON.parse(localStorage.getItem('allUserAnswers'));
            const userAnswers = allAnswers[userEmail] || {};
            
            delete userAnswers[questionId];
            allAnswers[userEmail] = userAnswers;
            localStorage.setItem('allUserAnswers', JSON.stringify(allAnswers));
        }

        function closeModal() {
            document.getElementById('successModal').style.display = 'none';
        }

        function redirectToNextPage() {
            window.location.href = 'coaching-action-plan.html';
        }

        function logout() {
            // Clear user session
            localStorage.removeItem('loggedIn');
            localStorage.removeItem('currentUser');
            localStorage.removeItem('userEmail');
            
            // Redirect to login page
            window.location.href = 'login.html';
        }
    </script>
</body>
</html>
