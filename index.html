<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coaching & Leadership Course</title>
    <style>
        /* Your existing styles here */
    </style>
</head>
<body>
    <div class="header">Coaching & Leadership Course</div>
    <div class="container">
        <h2>Welcome to the Coaching & Leadership Course!</h2>
        <p>This course is provided by Mohamed Elmenisy and includes articles, images, and interactive questions.</p>
        
        <div class="author-info">
            <p>"Great leaders don't set out to be leaders. They set out to make a difference. It's never about the role - always about the goal."</p>
            <p>- Mohamed Elmenisy, Learning and Development</p>
        </div>
        
        <h3>First Article: Introduction to Coaching & Leadership</h3>
        
        <div class="article-container">
            <div class="lock-message" id="lockMessage">Complete the question below to unlock this content</div>
            <a href="article1.html" id="articleLink" class="article-link">READ THE FULL ARTICLE</a>
        </div>
        
        <img src="Man-Speaking-in-a-Business-Meeting-800x449.jpg" alt="Course Image" class="course-image">
        
        <div class="question">
            <h3>Interactive Question</h3>
            <p>What is your goal for taking this Coaching & Leadership course?</p>
            <input type="text" id="name" class="input-field" placeholder="Enter your name">
            <textarea id="answer" class="input-field" placeholder="Write your answer here" rows="4"></textarea>
            <p id="error-message" class="error-message">Please enter both your name and your answer.</p>
            <button class="submit-button" onclick="submitAnswer()" id="submitBtn">Submit</button>
        </div>
    </div>
    <div class="footer">&copy; 2025 Elmenisy Leadership Coaching - All Rights Reserved</div>
    
    <div id="successModal" class="modal-overlay">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">Ã—</button>
            <h3>Thank You for Your Submission!</h3>
            <p>We appreciate you taking the time to share your goals with us. Your insights are valuable to your leadership journey.</p>
            <p>You now have full access to the article. We hope you find it informative and relevant to your objectives.</p>
            <button class="modal-button" onclick="redirectToArticle()">ACCESS ARTICLE</button>
        </div>
    </div>
    
    <script>
        // Check if user is logged in
        if (!localStorage.getItem('loggedIn')) {
            window.location.href = 'login.html';  // Redirect to login if not logged in
        }

        // Store answers in localStorage
        function storeAnswers(name, answer) {
            localStorage.setItem('userName', name);
            localStorage.setItem('userAnswer', answer);
        }
        
        // Submit answer function
        function submitAnswer() {
            let name = document.getElementById('name').value.trim();
            let answer = document.getElementById('answer').value.trim();
            let errorMessage = document.getElementById('error-message');
            
            if (name && answer) {
                // Store answers
                storeAnswers(name, answer);
                
                // Unlock content
                document.getElementById('lockMessage').style.display = 'none';
                document.getElementById('articleLink').style.pointerEvents = 'auto';
                document.getElementById('articleLink').style.opacity = '1';
                document.getElementById('successModal').style.display = 'flex';
                
                // Hide error message if shown
                errorMessage.style.display = "none";
            } else {
                errorMessage.style.display = "block";
            }
        }
        
        // Close modal function
        function closeModal() {
            document.getElementById('successModal').style.display = 'none';
        }
        
        // Redirect to article
        function redirectToArticle() {
            window.location.href = "article1.html";
        }
        
        // Handle Enter key press
        function handleKeyPress(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                document.getElementById('submitBtn').click();
            }
        }
        
        // Handle ESC key to close modal
        function handleKeyDown(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        }
        
        // Initialize the page
        function init() {
            // Disable article link initially
            document.getElementById('articleLink').style.pointerEvents = 'none';
            document.getElementById('articleLink').style.opacity = '0.7';
            
            // Add keyboard event listeners
            document.getElementById('name').addEventListener('keypress', handleKeyPress);
            document.getElementById('answer').addEventListener('keypress', handleKeyPress);
            document.addEventListener('keydown', handleKeyDown);
            
            // Add click event for the article link to show warning if clicked while locked
            document.getElementById('articleLink').addEventListener('click', function(e) {
                if (this.style.pointerEvents === 'none') {
                    e.preventDefault();
                    document.getElementById('lockMessage').style.animation = 'none';
                    void document.getElementById('lockMessage').offsetWidth; // Trigger reflow
                    document.getElementById('lockMessage').style.animation = 'pulse 0.5s 3';
                    setTimeout(() => {
                        document.getElementById('lockMessage').style.animation = 'pulse 2s infinite';
                    }, 1500);
                }
            });
        }
        
        // Run initialization when page loads
        window.onload = init;
    </script>
</body>
</html>
