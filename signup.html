<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - Coaching & Leadership Course</title>
    <!-- Favicon links -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <style>
        /* --- Your Existing CSS --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            background-image: linear-gradient(135deg, #f5f7fa 0%, #e4e8eb 100%);
        }

        .signup-container {
            width: 100%;
            max-width: 450px;
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            padding: 40px;
            animation: fadeIn 0.5s ease-in-out;
            position: relative;
            overflow: hidden;
        }

        .signup-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #3498db, #2ecc71);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- NEW: Logo Section Styles (Copied from Login) --- */
        .logo {
            text-align: center;
            margin-bottom: 25px; /* Adjusted spacing */
        }
        .logo svg { /* Style the icon */
            width: 48px;  /* Icon size */
            height: 48px;
            stroke: #3498db; /* Icon color (using the blue from gradient) */
            stroke-width: 1.5; /* Slightly thinner lines */
            margin-bottom: 10px; /* Space between icon and text */
            display: block; /* Center the icon properly */
            margin-left: auto;
            margin-right: auto;
        }
        .logo h2 { /* Style for text under logo */
            color: #2c3e50;
            font-size: 20px; /* Slightly smaller text */
            font-weight: 600; /* Less bold */
            letter-spacing: 0.5px;
            margin-top: 0; /* Remove default margin */
        }
        /* --- End Logo Section Styles --- */

        .signup-header {
            text-align: center;
            margin-bottom: 30px;
            margin-top: 0; /* Adjust spacing if needed after logo */
        }

        .signup-header h2 {
            color: #2c3e50;
            /* Keep original size or make slightly smaller if desired */
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px; /* Adjust spacing */
        }

        .signup-header p {
            color: #7f8c8d;
            font-size: 15px;
        }

        .input-group {
            margin-bottom: 20px;
            position: relative; /* Needed for password toggle */
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #34495e;
            font-size: 14px;
        }

        .input-group input[type="text"],
        .input-group input[type="email"],
        .input-group input[type="password"] { /* Target specific types */
            width: 100%;
            padding: 14px 15px;
            padding-right: 40px;
            border: 1px solid #e0e4e7;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s;
            background-color: #f9fafb;
        }
        .input-group input[type="text"],
        .input-group input[type="email"] {
             padding-right: 15px;
        }
        .input-group input:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
            background-color: #fff;
        }
        .password-toggle {
            position: absolute;
            top: 68%; /* Adjust vertical position */
            right: 15px;
            transform: translateY(-50%);
            cursor: pointer;
            color: #95a5a6;
            font-size: 18px;
            user-select: none; /* Prevent text selection */
        }
        .password-toggle:hover { color: #7f8c8d; }
        .password-toggle svg { width: 20px; height: 20px; vertical-align: middle; }

        .signup-button {
            width: 100%; padding: 14px;
            background: linear-gradient(90deg, #3498db, #2980b9);
            color: white; border: none; border-radius: 8px; font-size: 16px;
            font-weight: 600; cursor: pointer; transition: all 0.3s; margin-top: 10px;
            box-shadow: 0 4px 6px rgba(52, 152, 219, 0.1);
        }
        .signup-button:hover:not(:disabled) {
            background: linear-gradient(90deg, #2980b9, #3498db);
            box-shadow: 0 6px 8px rgba(52, 152, 219, 0.15); transform: translateY(-1px);
        }
        .signup-button:active:not(:disabled) { transform: translateY(0); }
        .signup-button:disabled {
            background: #bdc3c7; cursor: not-allowed; box-shadow: none; transform: none;
        }
        .login-link {
            text-align: center; margin-top: 25px; font-size: 14px; color: #7f8c8d;
        }
        .login-link a {
            color: #3498db; text-decoration: none; margin: 0 5px;
            transition: color 0.3s; font-weight: 500;
        }
        .login-link a:hover { color: #2c3e50; text-decoration: underline; }
        .error-message {
            color: #e74c3c; font-size: 13px; margin-top: 8px; display: none; font-weight: 500;
        }
        .success-message {
            color: #27ae60; font-size: 13px; margin-top: 8px; display: none; font-weight: 500;
        }
        .password-strength {
            margin-top: 8px; font-size: 13px; color: #7f8c8d;
        }
        .strength-weak { color: #e74c3c; } .strength-medium { color: #f39c12; } .strength-strong { color: #27ae60; }
        .terms {
            display: flex; align-items: flex-start; margin-bottom: 20px;
            font-size: 14px; color: #7f8c8d;
        }
        .terms input[type="checkbox"] {
            margin-top: 2px; margin-right: 8px; flex-shrink: 0;
        }
        .terms label {
           font-weight: normal; color: #7f8c8d; margin-bottom: 0;
           font-size: 14px; display: inline;
        }
        .terms a { color: #3498db; text-decoration: none; cursor: pointer; }
        .terms a:hover { text-decoration: underline; }
        .terms .error-message { margin-top: 5px; margin-left: 25px; }
        /* --- Modal Styles --- */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); animation: fadeInModal 0.3s ease-out; }
        .modal-content { background-color: #fefefe; margin: 10vh auto; padding: 30px 40px; border-radius: 8px; max-width: 800px; max-height: 80vh; overflow-y: auto; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.2); animation: slideInModal 0.3s ease-out; }
        .modal-close { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; line-height: 1; cursor: pointer; transition: color 0.2s; }
        .modal-close:hover, .modal-close:focus { color: #333; text-decoration: none; }
        .modal-content h2 { color: #2c3e50; border-bottom: 1px solid #e0e4e7; padding-bottom: 10px; margin-top: 15px; margin-bottom: 20px; font-size: 22px; }
        .modal-content h1 { text-align: center; color: #2c3e50; font-size: 26px; margin-bottom: 25px; }
        .modal-content p, .modal-content li { margin-bottom: 15px; color: #555; font-size: 15px; line-height: 1.6; }
        .modal-content strong { font-weight: 600; color: #34495e; }
        .modal-content ul { padding-left: 25px; margin-bottom: 15px; }
        .modal-content .modal-date { text-align: right; font-style: italic; color: #7f8c8d; margin-bottom: 20px; font-size: 13px; }
        .modal-content a { color: #3498db; text-decoration: none; }
        .modal-content a:hover { text-decoration: underline; }
        @keyframes fadeInModal { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideInModal { from { transform: translateY(-30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        body.modal-open { overflow: hidden; }
        /* --- End of Modal Styles --- */
    </style>
</head>
<body>
    <div class="signup-container">
        <!-- ==== LOGO SECTION ==== -->
        <div class="logo">
             <!-- Simple Compass SVG Icon -->
             <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <circle cx="12" cy="12" r="10"></circle>
                <polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>
            </svg>
            <h2>Coaching & Leadership</h2> <!-- Optional: Can remove if title below is enough -->
        </div>
        <!-- ==== END LOGO SECTION ==== -->

        <div class="signup-header">
            <h2>Create Your Account</h2>
            <p>Start your leadership journey today</p>
        </div>

        <!-- Use novalidate to disable default browser validation and rely on JS -->
        <form id="signupForm" novalidate>
            <div class="input-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" name="name" required placeholder="John Doe" aria-describedby="nameError">
                <div id="nameError" class="error-message">Please enter your full name</div>
            </div>

            <div class="input-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" name="email" required placeholder="your@email.com" aria-describedby="emailError signupError">
                <div id="emailError" class="error-message">Please enter a valid email address</div>
            </div>

            <div class="input-group">
                <label for="password">Password</label>
                <input type="password" id="password" name="password" minlength="6" required placeholder="••••••••" aria-describedby="passwordError passwordStrength">
                <span class="password-toggle" aria-label="Show password" role="button" tabindex="0">
                     <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                </span>
                <div class="password-strength" id="passwordStrength"></div>
                <div id="passwordError" class="error-message">Password must be at least 6 characters</div>
            </div>

            <div class="input-group">
                <label for="confirmPassword">Confirm Password</label>
                <input type="password" id="confirmPassword" name="confirmPassword" required placeholder="••••••••" aria-describedby="confirmError">
                 <span class="password-toggle" aria-label="Show password" role="button" tabindex="0">
                     <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                 </span>
                <div id="confirmError" class="error-message">Passwords don't match</div>
            </div>

            <div class="terms">
                <input type="checkbox" id="terms" name="terms" required aria-describedby="termsError">
                <div>
                    <label for="terms">I agree to the <a href="#" data-modal-target="termsModal">Terms of Service</a> and <a href="#" data-modal-target="privacyModal">Privacy Policy</a></label>
                    <div id="termsError" class="error-message">You must agree to the terms</div>
                </div>
            </div>

            <div id="signupError" class="error-message">Email already registered (Demo)</div>
            <div id="signupSuccess" class="success-message">Registration successful! Redirecting...</div>

            <button type="submit" class="signup-button" id="submitButton">Create Account</button>
        </form>

        <div class="login-link">
            Already have an account? <a href="login.html">Log in</a>
        </div>
    </div>

    <!-- MODALS -->
    <div id="termsModal" class="modal">
        <!-- ... Modal content ... -->
         <div class="modal-content">
            <span class="modal-close" data-modal-close>×</span>
            <h1>Terms of Service</h1>
            <p class="modal-date">Last Updated: 20/4/2025</p>
            <p>Welcome! I'm Mohamed, and I'm excited to have you consider joining the Coaching & Leadership Course. These Terms of Service ("Terms") outline the rules and guidelines for using the signup process and accessing your account related to my course.</p>
            <p>By checking the box on the signup form and creating an account, you agree to be bound by these Terms. Please read them carefully.</p>
            <h2>1. The Service</h2>
            <p>I provide an online platform for you to sign up for and potentially access materials related to the Coaching & Leadership Course ("Service"). This includes creating and managing your user account.</p>
            <h2>2. Your Account</h2>
            <ul><li><strong>Accuracy:</strong> You agree to provide accurate, current, and complete information during the signup process (your name and email).</li><li><strong>Security:</strong> You are responsible for safeguarding your password and for any activities or actions under your account. Please notify me immediately if you suspect any unauthorized use of your account. Use a strong password!</li><li><strong>Eligibility:</strong> You must be at least 18 years old to create an account and use this Service.</li></ul>
            <h2>3. Use of the Service</h2>
            <p>You agree to use the Service only for its intended purpose – signing up for and participating in the Coaching & Leadership Course. You agree not to:</p>
            <ul><li>Use the Service for any illegal or unauthorized purpose.</li><li>Interfere with or disrupt the Service or servers/networks connected to the Service.</li><li>Attempt to gain unauthorized access to other user accounts or course materials.</li><li>Share your account credentials with others.</li></ul>
            <h2>4. Course Content (If Applicable)</h2>
            <p>All materials provided as part of the Coaching & Leadership Course, including text, videos, graphics, and resources, are my property or the property of my licensors and are protected by copyright. Your access grants you a limited, non-exclusive license to use the materials for your personal learning journey, not for redistribution or commercial use.</p>
            <h2>5. Disclaimer</h2>
            <p>While I strive to provide valuable coaching and leadership insights, the Service and course materials are provided "as is" without warranties of any kind. I don't guarantee specific results from participating in the course, as success depends heavily on individual effort and application.</p>
            <h2>6. Limitation of Liability</h2>
            <p>To the fullest extent permitted by law, I (Mohamed) shall not be liable for any indirect, incidental, special, consequential, or punitive damages, or any loss of profits or revenues, whether incurred directly or indirectly, arising from your access to or use of the Service or course content.</p>
            <h2>7. Changes to Terms</h2>
            <p>I may update these Terms from time to time. If I make significant changes, I will notify you, likely via the email address associated with your account or by posting a notice on the platform. Your continued use of the Service after such changes constitutes your acceptance of the new Terms.</p>
            <h2>8. Termination</h2>
            <p>I reserve the right to suspend or terminate your account and access to the Service at my discretion, without notice, if you breach these Terms or engage in conduct that I deem harmful to the Service or other users.</p>
            <h2>9. Governing Law</h2>
            <p>These Terms shall be governed by and construed in accordance with the laws of [Your Country/State, e.g., Egypt], without regard to its conflict of law provisions.</p> <!-- REMEMBER TO UPDATE JURISDICTION -->
            <h2>10. Contact Me</h2>
            <p>If you have any questions about these Terms, please feel free to reach out to me at: <strong>mmenisy17@gmail.com</strong></p>
            <p>Thank you for taking the time to read this. I look forward to potentially working with you!</p>
            <p><em>- Mohamed</em></p>
        </div>
    </div>
    <div id="privacyModal" class="modal">
        <!-- ... Modal content ... -->
         <div class="modal-content">
            <span class="modal-close" data-modal-close>×</span>
            <h1>Privacy Policy</h1>
            <p class="modal-date">Last Updated: 20/4/2025</p>
            <p>Hello! This is Mohamed. Your privacy is important to me as you engage with the Coaching & Leadership Course ("Service"). This Privacy Policy explains how I collect, use, and protect your personal information when you sign up and use the related account services.</p>
            <h2>1. Information I Collect</h2>
            <p>When you sign up, I collect the following personal information directly from you:</p>
            <ul><li><strong>Full Name:</strong> To personalize your experience and communications.</li><li><strong>Email Address:</strong> To create your account, communicate with you about the course (updates, information, support), and for password recovery.</li></ul>
            <p>I may also collect technical information automatically, such as IP address or browser type, for security and analytical purposes (e.g., to understand how the signup page is used), but this is generally not linked directly to your personal identity unless needed for security investigations.</p>
            <p><strong>Note on Passwords:</strong> While you create a password, I store it using secure hashing methods. This means I cannot see your actual password, only verify it when you log in.</p>
            <h2>2. How I Use Your Information</h2>
            <p>I use the information I collect primarily to:</p>
            <ul><li>Create and manage your account for the Service.</li><li>Communicate with you regarding your account, course updates, support requests, and other relevant information about the Coaching & Leadership Course.</li><li>Provide, maintain, and improve the Service.</li><li>Ensure the security of the platform and prevent fraud or abuse.</li><li>Comply with legal obligations.</li></ul>
            <h2>3. How I Share Your Information</h2>
            <p>Your privacy is paramount. <strong>I do not sell your personal information to third parties.</strong></p>
            <p>I may share your information only in the following limited circumstances:</p>
            <ul><li><strong>Service Providers:</strong> I might use third-party companies to help operate the Service (e.g., hosting providers, email services). These providers only have access to the information necessary to perform their tasks and are obligated not to disclose or use it for other purposes.</li><li><strong>Legal Requirements:</strong> If required by law, subpoena, or other legal process, or if I have a good faith belief that disclosure is necessary to protect my rights, your safety, or the safety of others, or to investigate fraud.</li></ul>
            <h2>4. Data Security</h2>
            <p>I take reasonable technical and organizational measures to protect your personal information from unauthorized access, use, alteration, or destruction. This includes using secure connections (HTTPS) and hashing passwords. However, please understand that no method of transmission over the internet or electronic storage is 100% secure.</p>
            <h2>5. Data Retention</h2>
            <p>I will retain your personal information (name and email) for as long as your account is active or as needed to provide you with the Service and fulfill the purposes outlined in this policy. I may also retain certain information as required by law or for legitimate business purposes (like record-keeping or security).</p>
            <h2>6. Your Privacy Rights</h2>
            <p>Depending on your location, you may have certain rights regarding your personal information, such as:</p>
            <ul><li><strong>Access:</strong> Requesting a copy of the personal information I hold about you.</li><li><strong>Correction:</strong> Requesting correction of inaccurate information.</li><li><strong>Deletion:</strong> Requesting deletion of your personal information, subject to certain exceptions (e.g., legal requirements).</li></ul>
            <p>To exercise these rights, please contact me directly using the email address provided below. I will respond to your request within a reasonable timeframe.</p>
            <h2>7. Children's Privacy</h2>
            <p>This Service is not intended for individuals under the age of 18. I do not knowingly collect personal information from children under 18. If you believe I have inadvertently collected such information, please contact me so I can remove it.</p>
            <h2>8. Changes to This Policy</h2>
            <p>I may update this Privacy Policy occasionally. If I make significant changes, I will notify you via the email associated with your account or by posting a notice on the platform before the change becomes effective. I encourage you to review this policy periodically.</p>
            <h2>9. Contact Me</h2>
            <p>If you have any questions or concerns about this Privacy Policy or how I handle your data, please don't hesitate to contact me:</p>
            <p><strong>Mohamed</strong><br>Email: <strong>mmenisy17@gmail.com</strong></p>
            <p>Thank you for trusting me with your information.</p>
        </div>
    </div>

    <!-- Your existing JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- ALL YOUR EXISTING DOM Elements and Functions ---
            const signupForm = document.getElementById('signupForm');
            const nameInput = document.getElementById('name');
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const confirmInput = document.getElementById('confirmPassword');
            const termsCheckbox = document.getElementById('terms');
            const submitButton = document.getElementById('submitButton');
            const passwordToggles = document.querySelectorAll('.password-toggle');
            const nameError = document.getElementById('nameError');
            const emailError = document.getElementById('emailError');
            const passwordError = document.getElementById('passwordError');
            const confirmError = document.getElementById('confirmError');
            const termsError = document.getElementById('termsError');
            const signupError = document.getElementById('signupError'); // General signup error (like email exists)
            const signupSuccess = document.getElementById('signupSuccess');
            const passwordStrength = document.getElementById('passwordStrength');

            // --- Your Existing Utility Functions (showError, hideError, etc.) ---
             function showError(element, message) {
                if(element){ element.textContent = message; element.style.display = 'block';}
            }

            function hideError(element) {
                 if(element) element.style.display = 'none';
            }

            function updatePasswordStrength(password) {
                let strength = 0; let strengthText = ''; let strengthClass = 'password-strength';
                if (password.length >= 6) strength++; if (password.length >= 8) strength++; if (/[A-Z]/.test(password)) strength++;
                if (/[0-9]/.test(password)) strength++; if (/[^A-Za-z0-9]/.test(password)) strength++; // Special character

                if (password.length === 0) { strengthText = ''; }
                else if (password.length < 6) { strengthText = 'Too short'; strengthClass += ' strength-weak'; passwordError.style.display = 'block'; }
                else {
                     passwordError.style.display = 'none'; // Hide length error if >= 6
                     if (strength <= 2) { strengthText = 'Weak'; strengthClass += ' strength-weak'; }
                     else if (strength <= 4) { strengthText = 'Medium'; strengthClass += ' strength-medium'; }
                     else { strengthText = 'Strong'; strengthClass += ' strength-strong'; }
                }
                if(passwordStrength){ passwordStrength.textContent = strengthText; passwordStrength.className = strengthClass; passwordStrength.style.display = strengthText ? 'block' : 'none';}
            }

            function togglePasswordVisibility(toggleButton) {
                 const input = toggleButton.previousElementSibling; if(!input) return;
                 const svg = toggleButton.querySelector('svg'); const isPassword = input.type === 'password';
                 input.type = isPassword ? 'text' : 'password';
                 toggleButton.setAttribute('aria-label', isPassword ? 'Hide password' : 'Show password');
                 const circle = svg?.querySelector('circle'); if (circle) circle.style.display = isPassword ? 'none' : 'block';
            }

            // --- Your Existing Event Listeners (password input, confirm input, toggles) ---
            if(passwordInput) {
                passwordInput.addEventListener('input', function() {
                    updatePasswordStrength(this.value);
                    if (confirmInput && confirmInput.value) {
                         if (this.value !== confirmInput.value) { showError(confirmError, "Passwords don't match"); } else { hideError(confirmError); }
                    }
                });
            }
            if(confirmInput) {
                confirmInput.addEventListener('input', function() {
                     if (passwordInput && this.value !== passwordInput.value) { showError(confirmError, "Passwords don't match"); } else { hideError(confirmError); }
                 });
            }

            passwordToggles.forEach(toggle => {
                toggle.addEventListener('click', () => togglePasswordVisibility(toggle));
                toggle.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); togglePasswordVisibility(toggle); } });
            });

            // --- Your Existing Form Submit Listener ---
            if(signupForm) {
                signupForm.addEventListener('submit', function(e) {
                    e.preventDefault();

                    [nameError, emailError, passwordError, confirmError, termsError, signupError, signupSuccess].forEach(hideError);
                    if(submitButton) {submitButton.disabled = true; submitButton.textContent = 'Creating Account...';}

                    const name = nameInput?.value.trim();
                    const email = emailInput?.value.trim().toLowerCase();
                    const password = passwordInput?.value;
                    const confirmPassword = confirmInput?.value;
                    const termsAgreed = termsCheckbox?.checked;

                    let isValid = true;
                    if (!name) { showError(nameError, "Please enter your full name"); isValid = false; }
                    if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { showError(emailError, "Please enter a valid email address"); isValid = false; }
                    if (!password || password.length < 6) { showError(passwordError, "Password must be at least 6 characters"); isValid = false; }
                    if (password !== confirmPassword) { showError(confirmError, "Passwords don't match"); isValid = false; }
                    if (!termsAgreed) { showError(termsError, "You must agree to the terms"); isValid = false; }

                    // Check if email exists (DEMO simulation)
                    let users = [];
                    try { users = JSON.parse(localStorage.getItem('users')) || []; } catch { /* Ignore parsing errors */ }
                    if (!Array.isArray(users)) users = []; // Ensure it's an array
                    const emailExists = users.some(user => user && user.email === email);

                    if (emailExists) { showError(signupError, "Email already registered (Demo)"); isValid = false; }

                    // Handle Validation Result
                    if (!isValid) {
                        if(submitButton) { submitButton.disabled = false; submitButton.textContent = 'Create Account'; }
                        const firstError = signupForm.querySelector('.error-message[style*="display: block"]');
                        if (firstError) {
                            const inputId = firstError.id.replace('Error','');
                            const inputElement = document.getElementById(inputId);
                            if(inputElement) inputElement.focus();
                        }
                        return; // Stop submission
                    }

                    // If valid (Simulate Success)
                    // **IMPORTANT SECURITY NOTE:** DO NOT STORE PLAINTEXT PASSWORD in production!
                    // This demo *might* store it if you adapted the login to check it, but the original signup code didn't.
                    // We will stick to the original safer approach: DON'T STORE PASSWORD in localStorage.
                    const newUser = {
                        id: Date.now().toString(),
                        name: name,
                        email: email,
                        // password: password, // <<<--- DO NOT STORE PASSWORD
                        createdAt: new Date().toISOString()
                    };
                    users.push(newUser);
                     try {
                        localStorage.setItem('users', JSON.stringify(users));
                    } catch (storageError) {
                         console.error("Error saving to localStorage:", storageError);
                         showError(signupError, "Could not save user data. Storage might be full.");
                         if(submitButton) { submitButton.disabled = false; submitButton.textContent = 'Create Account'; }
                         return;
                    }

                    if(signupSuccess) signupSuccess.style.display = 'block';

                    setTimeout(function() {
                        window.location.href = 'login.html?email=' + encodeURIComponent(email) + '&signedup=true';
                    }, 1500);
                });
            }
            // --- Modal Handling Logic ---
            const modalTriggers = document.querySelectorAll('[data-modal-target]');
            const modalCloses = document.querySelectorAll('[data-modal-close]');
            const modals = document.querySelectorAll('.modal');

            function openModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) { modal.style.display = 'block'; document.body.classList.add('modal-open'); }
            }
            function closeModal(modal) {
                if (modal) { modal.style.display = 'none'; document.body.classList.remove('modal-open'); }
            }
            modalTriggers.forEach(trigger => {
                trigger.addEventListener('click', (e) => { e.preventDefault(); const modalId = trigger.getAttribute('data-modal-target'); openModal(modalId); });
            });
            modalCloses.forEach(button => {
                button.addEventListener('click', () => { const modal = button.closest('.modal'); closeModal(modal); });
            });
            modals.forEach(modal => {
                modal.addEventListener('click', (e) => { if (e.target === modal) { closeModal(modal); } });
            });
             document.addEventListener('keydown', (e) => {
                if (e.key === "Escape") { modals.forEach(modal => { if (modal.style.display === 'block') { closeModal(modal); } }); }
            });

            // Auto-focus the first input field when the page loads
            if(nameInput) nameInput.focus();
        });
    </script>
</body>
</html>
