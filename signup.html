<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Confirmation</title>
    <!-- You can link to a shared CSS file or add basic styles here -->
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            padding: 20px;
             background-image: linear-gradient(135deg, #f5f7fa 0%, #e4e8eb 100%);
        }
        .confirmation-box {
            background: #ffffff;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            max-width: 500px;
            width: 100%;
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 24px;
        }
         h2 {
            color: #27ae60; /* Success color */
            margin-bottom: 15px;
            font-size: 20px;
        }
         h2.error {
             color: #e74c3c; /* Error color */
         }
        p {
            color: #555;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 25px;
        }
        a.button {
             display: inline-block;
             padding: 12px 25px;
             background-color: #3498db;
             color: white;
             text-decoration: none;
             border-radius: 8px;
             font-weight: 600;
             transition: background-color 0.3s ease;
        }
         a.button:hover {
             background-color: #2980b9;
         }
    </style>
</head>
<body>
    <div class="confirmation-box">
        <h1>Email Confirmation</h1>
        <div id="confirmationMessage">
            <p>Verifying your confirmation link...</p>
            <!-- Message will be inserted here by JavaScript -->
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const confirmationMessageDiv = document.getElementById('confirmationMessage');
            const urlParams = new URLSearchParams(window.location.search);
            const email = urlParams.get('email'); // Get the email from the ?email= parameter

            if (email) {
                // Basic validation: check if email looks somewhat valid (doesn't guarantee existence)
                if (/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                     console.log(`Email parameter found and looks valid: ${email}`);
                    confirmationMessageDiv.innerHTML = `
                        <h2 style="color: #27ae60;">✅ Email Confirmed Successfully!</h2>
                        <p>Thank you for confirming your email address: <strong>${decodeURIComponent(email)}</strong>.</p>
                        <p>You can now proceed to log in.</p>
                        <a href="login.html" class="button">Go to Login</a>
                    `;
                    // Optional: You could add a step here to call your backend/Supabase
                    // to update the user's status to 'confirmed' if needed.
                } else {
                     console.warn(`Invalid email format found in parameter: ${email}`);
                    confirmationMessageDiv.innerHTML = `
                        <h2 class="error">❌ Invalid Email Format</h2>
                        <p>The email address found in the confirmation link seems invalid.</p>
                        <p>Please ensure you copied the entire link correctly or request a new confirmation email if possible.</p>
                    `;
                }
            } else {
                console.error("Email parameter missing from URL.");
                confirmationMessageDiv.innerHTML = `
                    <h2 class="error">❌ Invalid or Missing Confirmation Link</h2>
                    <p>We couldn't find the necessary information in the link you used.</p>
                    <p>Please double-check the confirmation link in your email or try signing up again.</p>
                `;
            }
        });
    </script>
</body>
</html>
