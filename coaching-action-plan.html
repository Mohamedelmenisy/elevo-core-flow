<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coaching Action Plan | Leadership Coaching</title>
    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://cdn-icons-png.flaticon.com/512/3281/3281289.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            margin: 0;
            padding: 0;
            line-height: 1.6;
            background-color: #f9f9f9;
            color: #333;
        }

        /* User Bar Styles */
        .user-bar {
            background-color: #34495e;
            padding: 10px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            font-size: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            font-size: 15px;
        }

        .user-email {
            font-size: 13px;
            opacity: 0.8;
        }

        .logout-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .logout-button:hover {
            background-color: #c0392b;
            transform: translateY(-1px);
        }

        .logout-button:active {
            transform: translateY(0);
        }

        /* Navigation Tabs */
        .nav-tab {
            background-color: #2c3e50;
            padding: 10px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-tab a {
            color: white;
            text-decoration: none;
            margin: 0 10px;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        .nav-tab a:hover {
            background-color: #34495e;
        }

        /* Main Content Styles */
        h1 {
            color: white;
            background-color: #e67e22;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            margin: 20px auto;
            max-width: 800px;
        }

        h2 {
            color: white;
            background-color: #3498db;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            margin: 30px 0 20px;
        }

        h3 {
            color: #e67e22;
            margin: 20px 0 15px;
            text-align: center;
        }

        .container {
            max-width: 800px;
            margin: 20px auto 30px;
            background: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }

        .highlight-section {
            background-color: rgba(230, 126, 34, 0.1);
            padding: 15px;
            border-left: 4px solid #e67e22;
            border-radius: 0 4px 4px 0;
            margin: 15px 0;
        }

        .image-container {
            text-align: center;
            margin: 20px 0;
        }

        .image-container img {
            max-width: 100%;
            height: auto;
            border-radius: 6px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .caption {
            font-style: italic;
            color: #777;
            margin-top: 8px;
            font-size: 14px;
        }

        .question-box {
            background-color: #f8f9fa;
            padding: 20px; /* Increased padding */
            border-radius: 8px; /* More rounded */
            margin: 20px 0; /* Increased margin */
            border: 1px solid #e9ecef; /* Subtle border */
            border-left: 5px solid #3498db; /* Thicker accent */
        }
        .question-box h4 {
             margin-top: 0;
             margin-bottom: 10px;
             color: #34495e;
        }


        textarea, input[type="text"], input[type="date"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 5px 0 10px 0; /* Consistent margin */
            resize: vertical;
            min-height: 40px; /* Base height */
            font-size: 14px;
            line-height: 1.5;
            display: block;
        }
        textarea { min-height: 80px; }

        textarea:focus, input[type="text"]:focus, input[type="date"]:focus {
             outline: none;
             border-color: #3498db;
             box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        ol, ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        li { margin-bottom: 8px; }
        /* Remove min-height for textareas within li */
        ol textarea, ul textarea {
             min-height: 40px;
        }


        .save-button {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 8px 15px; /* Slightly more padding */
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 14px; /* Slightly larger font */
        }

        .delete-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-left: 8px; /* Space between buttons */
            font-size: 14px;
        }

        .save-button:hover { background-color: #219653; }
        .delete-button:hover { background-color: #c0392b; }

        .button-group {
            display: flex;
            align-items: center;
            margin-top: 15px; /* More space above button group */
            flex-wrap: wrap; /* Allow wrapping */
        }

        .save-status {
            font-size: 13px; /* Slightly larger status */
            color: #27ae60;
            margin-left: 15px; /* More space */
            display: none;
            font-style: italic;
        }

        .section-warning { /* For section validation errors */
            background-color: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 12px;
            margin: 10px 0 15px 0; /* Add margin */
            color: #333;
            display: none;
            text-align: left; /* Align left */
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
        }

        .required-field {
            border: 2px solid #e74c3c !important;
            background-color: #fff2f2 !important;
            animation: pulse 1.5s infinite alternate ease-in-out;
        }

        @keyframes pulse {
            from { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.3); }
            to { box-shadow: 0 0 0 5px rgba(231, 76, 60, 0); }
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 20px;
        }

        .navigation-buttons a, .navigation-buttons button { /* Style both links and buttons */
            text-decoration: none;
            padding: 12px 20px;
            color: white;
            background-color: #e67e22;
            border-radius: 4px;
            font-weight: bold;
            flex: 1;
            text-align: center;
            transition: all 0.3s;
            font-size: 15px;
            border: none; /* Reset button border */
            cursor: pointer;
        }

        .navigation-buttons a:hover, .navigation-buttons button:hover {
            background-color: #d35400;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
         .navigation-buttons a:active, .navigation-buttons button:active {
             transform: translateY(0);
             box-shadow: none;
         }

        .navigation-buttons .back { background-color: #95a5a6; }
        .navigation-buttons .back:hover { background-color: #7f8c8d; }


        .floating-warning { /* General page warning */
            background-color: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 12px 20px;
            color: #333;
            display: none;
            position: fixed;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            border-radius: 4px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            animation: fadeIn 0.3s ease-in-out;
            font-weight: 500;
        }
        @keyframes fadeIn { from { opacity: 0; top: 50px; } to { opacity: 1; top: 70px; } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }

        .completion-message {
            background-color: rgba(39, 174, 96, 0.1);
            padding: 25px; /* More padding */
            border-left: 5px solid #27ae60; /* Thicker border */
            border-radius: 8px;
            margin: 30px 0; /* More margin */
            text-align: center;
            display: none; /* Hidden initially */
            border: 1px solid #c3e6cb; /* Subtle border */
        }
        .completion-message h3 {
             color: #155724; /* Dark green */
             margin-bottom: 15px;
        }
         .completion-message p {
             color: #155724;
             margin-bottom: 10px;
         }


        /* Modal Styles */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.6); z-index: 1000; justify-content: center; align-items: center;
            animation: modalFadeInBackground 0.3s ease-out;
        }
        @keyframes modalFadeInBackground { from { background: rgba(0,0,0,0); } to { background: rgba(0,0,0,0.6); } }
        .modal-content {
            background: white; padding: 30px 40px; border-radius: 8px; max-width: 450px;
            text-align: center; box-shadow: 0 5px 20px rgba(0,0,0,0.2); position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }
        @keyframes modalSlideIn { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
        .modal-button {
            background-color: #27ae60; color: white; border: none; padding: 12px 25px;
            border-radius: 5px; cursor: pointer; margin-top: 25px; font-weight: bold;
            transition: all 0.3s; font-size: 15px;
        }
        .modal-button:hover { background-color: #219653; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
        .close-modal {
            position: absolute; top: 15px; right: 15px; background: none; border: none;
            font-size: 24px; cursor: pointer; color: #aaa; transition: color 0.3s;
        }
        .close-modal:hover { color: #555; }

        /* Inline error for required fields */
         .inline-error-message {
             color: #e74c3c;
             font-size: 12px;
             margin-left: 10px;
             display: none;
             font-style: italic;
             font-weight: 500;
        }

        /* Make ol textareas slightly less tall */
        ol textarea.editable-answer {
             min-height: 50px;
        }

        @media (max-width: 600px) {
            .button-container { flex-direction: column; }
             h1 { font-size: 1.8em; }
             h2 { font-size: 1.4em; }
             .container { padding: 15px; }
             .question-box { padding: 15px; }
             textarea, input[type="text"], input[type="date"] { padding: 8px; }
        }

    </style>
</head>
<body>
    <!-- User Info Bar -->
    <div class="user-bar">
        <div class="user-info">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.8;">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <div class="user-details">
                <span class="user-name" id="userName">Welcome back</span>
                <span class="user-email" id="userEmail">user@example.com</span>
            </div>
        </div>
        <button class="logout-button" onclick="logout()">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            Logout
        </button>
    </div>

    <!-- Navigation Tabs -->
    <nav class="nav-tab">
        <a href="index.html">Home</a>
        <a href="article1.html">Article 1</a>
        <a href="coaching-skills.html">Coaching Skills</a>
        <a href="coaching-individuals.html">Coaching Individuals</a>
        <a href="coaching-team.html">Team Coaching</a>
        <a href="coaching-yourself.html">Self Coaching</a>
        <!-- Current page link could be styled differently if needed -->
        <a href="coaching-action-plan.html" style="background-color: #34495e;">Action Plan</a>
    </nav>

    <h1>Your Coaching Action Plan</h1>

    <div class="floating-warning" id="generalWarningMessage">
        <strong>Action Required:</strong> Please complete all required fields before proceeding.
    </div>

    <div class="container">
        <div class="highlight-section">
            <p>You've covered a lot of ground in this toolkit – well done! But what practical difference will it make to you and your team?</p>
            <p>We've seen that coaching can vary from a quick exchange in the moment, through regular one-on-ones, or a substantial series of team sessions. But, in all cases, you'll need to be able and willing to give it the time and thought it deserves.</p>
        </div>

        <div class="image-container">
            <img src="https://images.unsplash.com/photo-1573164713988-8665fc963095?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80"
                 alt="Team creating action plan on whiteboard"
                 onerror="this.onerror=null; this.src='https://via.placeholder.com/800x450/ffa726/ffffff?text=Team+Planning';"
                 loading="lazy">
            <p class="caption">Creating an effective coaching action plan with your team</p>
        </div>

        <!-- Section 5.1 -->
        <h2>5.1. Your Coaching Motivation</h2>
        <p>Before implementing your coaching plan, it's important to clarify your personal motivation and the benefits you expect from coaching.</p>
        <div class="question-box">
            <h3>ACTION: Complete Your Coaching Motivation Statement</h3>
            <div class="section-warning" id="warning-motivation">
                Please complete all questions in this section before saving.
            </div>
            <h4>Coaching excites me because...</h4>
            <textarea placeholder="What about coaching energizes and motivates you?" class="required-answer" data-question="excitement"></textarea>
            <span class="inline-error-message" id="error-excitement">Required.</span>

            <h4>I could personally gain...</h4>
            <textarea placeholder="What personal benefits do you anticipate from coaching?" class="required-answer" data-question="personal-gain"></textarea>
            <span class="inline-error-message" id="error-personal-gain">Required.</span>

            <h4>It's worthwhile investing time and energy in coaching my team, because...</h4>
            <textarea placeholder="Why is coaching valuable for your team?" class="required-answer" data-question="team-benefits"></textarea>
             <span class="inline-error-message" id="error-team-benefits">Required.</span>

            <div class="button-group">
                <button class="save-button" onclick="saveSection(['excitement', 'personal-gain', 'team-benefits'], 'motivation')">Save Motivation Section</button>
                <button class="delete-button" onclick="deleteSection(['excitement', 'personal-gain', 'team-benefits'], 'motivation')">Clear Motivation Section</button>
                <span class="save-status" id="save-status-motivation">✓ Saved</span>
            </div>
        </div>

        <!-- Section 5.2 -->
        <div class="image-container">
            <img src="https://images.unsplash.com/photo-1521791055366-0d553872125f?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80"
                 alt="Manager practicing active listening with team member"
                 onerror="this.onerror=null; this.src='https://via.placeholder.com/800x450/3498db/ffffff?text=Active+Listening';"
                 loading="lazy">
            <p>Developing active listening skills is foundational to effective coaching</p>
        </div>
        <h2>5.2. Making Time for Coaching</h2>
        <p>You'll likely need to make some changes to your day-to-day schedule to find time for coaching. Be honest with yourself about your situation.</p>
        <div class="question-box">
            <h3>ACTION: Identify Time Management Changes</h3>
            <div class="section-warning" id="warning-time">
                Please complete all questions in this section before saving.
            </div>
            <h4>I need to give more time to coaching my people, so the habit or process that I need to stop or change first, is...</h4>
            <textarea placeholder="What current habits or processes are limiting your coaching time?" class="required-answer" data-question="habits-to-change"></textarea>
             <span class="inline-error-message" id="error-habits-to-change">Required.</span>

            <h4>The blockers to change that I might have to deal with are...</h4>
            <textarea placeholder="What obstacles might prevent you from making these changes?" class="required-answer" data-question="blockers"></textarea>
             <span class="inline-error-message" id="error-blockers">Required.</span>

            <h4>...and my first step to tackling them is to...</h4>
            <textarea placeholder="What concrete action will you take to overcome these blockers?" class="required-answer" data-question="first-step"></textarea>
             <span class="inline-error-message" id="error-first-step">Required.</span>

            <h4>I need the support of...</h4>
            <textarea placeholder="Who can help you implement these changes?" class="required-answer" data-question="support-needed"></textarea>
             <span class="inline-error-message" id="error-support-needed">Required.</span>

            <h4>to make and sustain changes, I'm going to discuss this with them by...</h4>
            <textarea placeholder="How and when will you approach this person?" class="required-answer" data-question="discussion-plan"></textarea>
             <span class="inline-error-message" id="error-discussion-plan">Required.</span>

            <h4>The Time Management resource(s) that might help me the most is/are...</h4>
            <textarea placeholder="Which specific resources could support your time management?" class="required-answer" data-question="resources"></textarea>
             <span class="inline-error-message" id="error-resources">Required.</span>

            <div class="button-group">
                <button class="save-button" onclick="saveSection(['habits-to-change', 'blockers', 'first-step', 'support-needed', 'discussion-plan', 'resources'], 'time')">Save Time Section</button>
                <button class="delete-button" onclick="deleteSection(['habits-to-change', 'blockers', 'first-step', 'support-needed', 'discussion-plan', 'resources'], 'time')">Clear Time Section</button>
                <span class="save-status" id="save-status-time">✓ Saved</span>
            </div>
        </div>

        <!-- Section 5.3 -->
        <h2>5.3. Developing Your Coaching Skills</h2>
        <p>In Chapter 1, we focused on the key skills that make a great coach. Summarize your findings and actions by completing these statements.</p>
        <div class="question-box">
            <h3>ACTION: Assess and Develop Your Coaching Skills</h3>
            <div class="section-warning" id="warning-skills">
                 Please complete all questions in this section before saving.
            </div>
            <h4>Listening well is crucial to good coaching. My strongest skill in this area is...</h4>
            <textarea placeholder="What aspect of listening are you particularly good at?" class="required-answer" data-question="listening-strength"></textarea>
             <span class="inline-error-message" id="error-listening-strength">Required.</span>

            <h4>I'll develop my active listening, empathic listening, or mindful listening by applying these top two tips in my next one-on-one...</h4>
            <ol>
                <li><textarea placeholder="First listening technique to implement" class="required-answer" data-question="listening-tip1"></textarea> <span class="inline-error-message" id="error-listening-tip1">Required.</span></li>
                <li><textarea placeholder="Second listening technique to implement" class="required-answer" data-question="listening-tip2"></textarea> <span class="inline-error-message" id="error-listening-tip2">Required.</span></li>
            </ol>

            <h4>When I notice myself making an assumption about what my coachee means, I'll...</h4>
            <textarea placeholder="What will you do to check your assumptions?" class="required-answer" data-question="assumption-plan"></textarea>
            <span class="inline-error-message" id="error-assumption-plan">Required.</span>

            <h4>I'll add new, non-leading questions to my usual list, including...</h4>
            <ol>
                <li><textarea placeholder="First new question to ask" class="required-answer" data-question="question1"></textarea> <span class="inline-error-message" id="error-question1">Required.</span></li>
                <li><textarea placeholder="Second new question to ask" class="required-answer" data-question="question2"></textarea> <span class="inline-error-message" id="error-question2">Required.</span></li>
            </ol>

            <h4>Sometimes I find my coachees' emotions difficult to deal with. When they express... or... I feel...</h4>
            <textarea placeholder="Which emotions challenge you most and how do they make you feel?" class="required-answer" data-question="emotion-challenge"></textarea>
             <span class="inline-error-message" id="error-emotion-challenge">Required.</span>

            <h4>And my own preoccupations or mood can get in the way of an open conversation. I'm often thinking about/feeling...</h4>
            <textarea placeholder="What personal thoughts or feelings might interfere with your coaching?" class="required-answer" data-question="own-mood"></textarea>
            <span class="inline-error-message" id="error-own-mood">Required.</span>

            <h4>So, I'll start managing such situations better by...</h4>
            <textarea placeholder="What strategies will you use to manage these challenges?" class="required-answer" data-question="improvement-plan"></textarea>
             <span class="inline-error-message" id="error-improvement-plan">Required.</span>

            <h4>My coaching will be more effective if my coachees trust me. I can help to build trust by...</h4>
            <textarea placeholder="What specific actions will build trust with your coachees?" class="required-answer" data-question="trust-building"></textarea>
             <span class="inline-error-message" id="error-trust-building">Required.</span>

            <h4>My particular strengths at work are... and... I can apply these to my coaching by...</h4>
            <textarea placeholder="How will you leverage your professional strengths in coaching?" class="required-answer" data-question="strengths-application"></textarea>
             <span class="inline-error-message" id="error-strengths-application">Required.</span>

            <div class="button-group">
                <button class="save-button" onclick="saveSection(['listening-strength', 'listening-tip1', 'listening-tip2', 'assumption-plan', 'question1', 'question2', 'emotion-challenge', 'own-mood', 'improvement-plan', 'trust-building', 'strengths-application'], 'skills')">Save Skills Section</button>
                <button class="delete-button" onclick="deleteSection(['listening-strength', 'listening-tip1', 'listening-tip2', 'assumption-plan', 'question1', 'question2', 'emotion-challenge', 'own-mood', 'improvement-plan', 'trust-building', 'strengths-application'], 'skills')">Clear Skills Section</button>
                <span class="save-status" id="save-status-skills">✓ Saved</span>
            </div>
        </div>

        <!-- Section 5.4 -->
        <h2>5.4. Implementing Coaching Models</h2>
        <p>You'll make best use of your and your coachee's valuable time if you follow a structured approach. Compare the three coaching models described in Chapter 2 and consider which you could apply first, and how.</p>
        <div class="question-box">
            <h3>ACTION: Plan Your Coaching Model Implementation</h3>
             <div class="section-warning" id="warning-model">
                 Please complete all questions in this section before saving.
            </div>
            <h4>I plan to use the... model one-on-one with...</h4>
            <textarea placeholder="Which coaching model will you use first and with whom?" class="required-answer" data-question="model-choice"></textarea>
            <span class="inline-error-message" id="error-model-choice">Required.</span>

            <h4>Because...</h4>
            <textarea placeholder="Why is this the right model for this situation?" class="required-answer" data-question="model-reason"></textarea>
             <span class="inline-error-message" id="error-model-reason">Required.</span>

            <h4>I'll need to prepare by...</h4>
            <textarea placeholder="What preparation does this model require?" class="required-answer" data-question="preparation"></textarea>
             <span class="inline-error-message" id="error-preparation">Required.</span>

            <div class="image-container">
                <img src="https://images.unsplash.com/photo-1552664730-d307ca884978?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80"
                     alt="Manager evaluating different coaching approaches"
                     onerror="this.onerror=null; this.src='https://via.placeholder.com/800x450/9b59b6/ffffff?text=Coaching+Models';"
                     loading="lazy">
                <p>Choosing the right coaching model for each situation</p>
            </div>

            <h4>I can show my coachee that I have his or her best interests in mind by...</h4>
            <textarea placeholder="How will you demonstrate your commitment to their development?" class="required-answer" data-question="best-interests"></textarea>
             <span class="inline-error-message" id="error-best-interests">Required.</span>

            <h4>I will demonstrate my integrity and humility as a coach by...</h4>
            <textarea placeholder="What behaviors will show your coaching values?" class="required-answer" data-question="integrity"></textarea>
             <span class="inline-error-message" id="error-integrity">Required.</span>

            <h4>Tips from successful coaches in my organization that I'd feel comfortable applying include...</h4>
            <ol>
                <li><textarea placeholder="First coaching tip to adopt" class="required-answer" data-question="tip1"></textarea> <span class="inline-error-message" id="error-tip1">Required.</span></li>
                <li><textarea placeholder="Second coaching tip to adopt" class="required-answer" data-question="tip2"></textarea> <span class="inline-error-message" id="error-tip2">Required.</span></li>
            </ol>

            <div class="button-group">
                <button class="save-button" onclick="saveSection(['model-choice', 'model-reason', 'preparation', 'best-interests', 'integrity', 'tip1', 'tip2'], 'model')">Save Models Section</button>
                <button class="delete-button" onclick="deleteSection(['model-choice', 'model-reason', 'preparation', 'best-interests', 'integrity', 'tip1', 'tip2'], 'model')">Clear Models Section</button>
                <span class="save-status" id="save-status-model">✓ Saved</span>
            </div>
        </div>

        <!-- Section 5.5 -->
        <h2>5.5. Informal and Team Coaching</h2>
        <p>Remember that you can also coach informally, day to day, as the need arises. But your success will depend on your awareness of your team members' workload and their preferred learning styles, as well as being sensitive to the wider working environment and culture.</p>
        <div class="question-box">
            <h3>ACTION: Plan Informal and Team Coaching</h3>
            <div class="section-warning" id="warning-team">
                 Please complete all questions in this section before saving.
            </div>
            <h4>I'll avoid being isolated from life on the shop floor by...</h4>
            <textarea placeholder="How will you stay connected with daily operations?" class="required-answer" data-question="shop-floor"></textarea>
             <span class="inline-error-message" id="error-shop-floor">Required.</span>

            <div class="image-container">
                <img src="https://images.unsplash.com/photo-1521791136064-7986c2920216?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80"
                     alt="Manager having informal discussion with team members"
                     onerror="this.onerror=null; this.src='https://via.placeholder.com/800x450/3498db/ffffff?text=Informal+Coaching';"
                     loading="lazy">
                <p>Staying connected with daily operations enables effective informal coaching</p>
            </div>

            <h4>I can improve my judgment about when to intervene by...</h4>
            <textarea placeholder="What will help you better judge coaching opportunities?" class="required-answer" data-question="intervention"></textarea>
            <span class="inline-error-message" id="error-intervention">Required.</span>

            <h4>I plan to use coaching with this team/group...</h4>
            <textarea placeholder="Which team or group will you coach?" class="required-answer" data-question="team-group"></textarea>
             <span class="inline-error-message" id="error-team-group">Required.</span>

            <h4>to help it to work on this topic or issue...</h4>
            <textarea placeholder="What specific issue will you address?" class="required-answer" data-question="team-issue"></textarea>
            <span class="inline-error-message" id="error-team-issue">Required.</span>

            <h4>I'll prepare by finding out about team members' personality styles using the following model or test...</h4>
            <textarea placeholder="Which assessment tool will you use?" class="required-answer" data-question="personality-test"></textarea>
            <span class="inline-error-message" id="error-personality-test">Required.</span>

            <h4>and by helping people to appreciate one another's strengths and preferences</h4>
            <textarea placeholder="How will you facilitate this appreciation?" class="required-answer" data-question="strengths-appreciation"></textarea>
            <span class="inline-error-message" id="error-strengths-appreciation">Required.</span>

            <h4>Together, we'll draw up a team charter so that we can work effectively toward a common goal. The steps that we'll follow are...</h4>
            <textarea placeholder="Outline your process for creating a team charter" class="required-answer" data-question="charter-steps"></textarea>
             <span class="inline-error-message" id="error-charter-steps">Required.</span>

            <h4>I will discuss conflicting priorities with...</h4>
            <textarea placeholder="Who will you involve in resolving priority conflicts?" class="required-answer" data-question="conflict-resolution"></textarea>
             <span class="inline-error-message" id="error-conflict-resolution">Required.</span>

            <h4>I plan to try out the POSITIVE model at this upcoming meeting...</h4>
            <textarea placeholder="Which meeting will use the POSITIVE model?" class="required-answer" data-question="positive-model"></textarea>
             <span class="inline-error-message" id="error-positive-model">Required.</span>

            <h4>and the PRACTICE model in this session...</h4>
            <textarea placeholder="Which session will use the PRACTICE model?" class="required-answer" data-question="practice-model"></textarea>
             <span class="inline-error-message" id="error-practice-model">Required.</span>

            <div class="button-group">
                <button class="save-button" onclick="saveSection(['shop-floor', 'intervention', 'team-group', 'team-issue', 'personality-test', 'strengths-appreciation', 'charter-steps', 'conflict-resolution', 'positive-model', 'practice-model'], 'team')">Save Team Section</button>
                <button class="delete-button" onclick="deleteSection(['shop-floor', 'intervention', 'team-group', 'team-issue', 'personality-test', 'strengths-appreciation', 'charter-steps', 'conflict-resolution', 'positive-model', 'practice-model'], 'team')">Clear Team Section</button>
                <span class="save-status" id="save-status-team">✓ Saved</span>
            </div>
        </div>

        <!-- Section 5.6 -->
        <h2>5.6. Self-Reflection and Review</h2>
        <p>Helping people to explore their ideas, goals, strengths, and weaknesses will likely inspire you to think about your own situation, too. In fact, you'll need to demonstrate that you're willing and able to do this if you are to be a good role model.</p>
        <div class="question-box">
            <h3>ACTION: Complete Your Self-Reflection</h3>
            <div class="section-warning" id="warning-reflection">
                 Please complete all questions in this section before saving.
            </div>
            <h4>My SWOT analysis highlighted...</h4>
            <textarea placeholder="What were the key findings from your SWOT analysis?" class="required-answer" data-question="swot-highlights"></textarea>
            <span class="inline-error-message" id="error-swot-highlights">Required.</span>

            <h4>As a result, I will...</h4>
            <textarea placeholder="What actions will you take based on your SWOT?" class="required-answer" data-question="swot-actions"></textarea>
            <span class="inline-error-message" id="error-swot-actions">Required.</span>

            <h4>The goal I'm working toward using GROW is...</h4>
            <textarea placeholder="What is your personal GROW goal?" class="required-answer" data-question="grow-goal"></textarea>
             <span class="inline-error-message" id="error-grow-goal">Required.</span>

            <h4>and my first action is...</h4>
            <textarea placeholder="What's the first step toward this goal?" class="required-answer" data-question="first-grow-action"></textarea>
            <span class="inline-error-message" id="error-first-grow-action">Required.</span>

            <h4>I've set myself a reminder to look back at this toolkit on...</h4>
            <input type="date" class="required-answer" data-question="review-date">
            <span class="inline-error-message" id="error-review-date">Required.</span>

            <h4>Changes that I've seen in myself and my work include...</h4>
            <textarea placeholder="What personal changes have you observed?" class="required-answer" data-question="self-changes"></textarea>
             <span class="inline-error-message" id="error-self-changes">Required.</span>

            <h4>Changes that I've seen in my team's behavior and performance include...</h4>
            <textarea placeholder="What team changes have you observed?" class="required-answer" data-question="team-changes"></textarea>
             <span class="inline-error-message" id="error-team-changes">Required.</span>

            <div class="image-container">
                <img src="https://images.unsplash.com/photo-1542744173-8e7e53415bb0?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80"
                     alt="Team reviewing progress and celebrating success"
                     onerror="this.onerror=null; this.src='https://via.placeholder.com/800x450/2ecc71/ffffff?text=Team+Review';"
                     loading="lazy">
                <p>Regular review helps sustain coaching benefits</p>
            </div>

            <div class="button-group">
                <button class="save-button" onclick="saveSection(['swot-highlights', 'swot-actions', 'grow-goal', 'first-grow-action', 'review-date', 'self-changes', 'team-changes'], 'reflection')">Save Reflection Section</button>
                <button class="delete-button" onclick="deleteSection(['swot-highlights', 'swot-actions', 'grow-goal', 'first-grow-action', 'review-date', 'self-changes', 'team-changes'], 'reflection')">Clear Reflection Section</button>
                <span class="save-status" id="save-status-reflection">✓ Saved</span>
            </div>
        </div>

        <!-- Completion Message -->
        <div class="completion-message" id="completionMessage">
            <h3>Congratulations on Completing Your Coaching Action Plan!</h3>
            <p>Thank you for taking the time to thoughtfully complete this action plan. You've taken important steps toward becoming a more effective coach for your team.</p>
            <p>Remember to review your plan regularly and adjust as needed. Consistent application of these strategies will help you see the best results.</p>
        </div>

        <!-- Navigation Buttons -->
        <div class="navigation-buttons">
             <!-- Updated back button link -->
            <a href="coaching-yourself.html" class="button back" id="backButton">← Back to Self Coaching</a>
             <!-- Complete button triggers final validation and completion state -->
            <button type="button" class="button" id="completeButton">Complete Action Plan →</button>
        </div>
    </div>

    <script>
        // --- Configuration ---
        const formspreeEndpoint = 'https://formspree.io/f/xzzeqvea'; // YOUR Formspree Endpoint
        const localStorageKey = 'allUserAnswers_actionPlan'; // Specific key for THIS page
        const userEmailKey = 'userEmail';
        const currentUserKey = 'currentUser';

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', function() {
            const userEmail = getUserEmail();
            if (!userEmail) {
                alert('User session not found. Please log in again.');
                window.location.href = 'login.html';
                return;
            }

            displayUserInfo(userEmail);
            loadUserAnswers(userEmail);
            setupEventListeners(userEmail);
            checkCompletionState(userEmail); // Check if already completed on load
        });

        // --- User Info & Authentication ---
        function getUserEmail() {
            const userData = JSON.parse(localStorage.getItem(currentUserKey));
            return userData?.email || localStorage.getItem(userEmailKey);
        }

        function displayUserInfo(userEmail) {
            const userData = JSON.parse(localStorage.getItem(currentUserKey)) || {};
            document.getElementById('userName').textContent = `Welcome, ${userData.name || 'User'}`;
            document.getElementById('userEmail').textContent = userEmail;
        }

        function logout() {
            localStorage.removeItem('loggedIn');
            localStorage.removeItem(currentUserKey);
            localStorage.removeItem(userEmailKey);
            // Optionally remove completion status
            localStorage.removeItem(`${localStorageKey}_completed_${getUserEmail()}`);
            window.location.href = 'login.html';
        }

        // --- Answer Handling (Local Storage) ---
        function loadUserAnswers(userEmail) {
            const allAnswers = JSON.parse(localStorage.getItem(localStorageKey)) || {};
            const userPageAnswers = allAnswers[userEmail] || {};

             // Select all elements that can hold answers
            document.querySelectorAll('.required-answer[data-question]').forEach(field => {
                 const questionId = field.getAttribute('data-question');
                 const statusId = `save-status-${getSectionIdFromQuestionId(questionId)}`; // Find section status ID
                 const statusElement = document.getElementById(statusId);

                 if (userPageAnswers[questionId] !== undefined) {
                    field.value = userPageAnswers[questionId];
                    field.classList.remove('required-field'); // Remove required style if loaded
                 } else {
                    field.value = '';
                 }
                 // Note: Section-level saved status isn't shown on load, only on save action
                 if(statusElement) statusElement.style.display = 'none';
            });
        }

        // Helper to map question ID to section ID (adjust if needed)
        function getSectionIdFromQuestionId(questionId) {
            if (['excitement', 'personal-gain', 'team-benefits'].includes(questionId)) return 'motivation';
            if (['habits-to-change', 'blockers', 'first-step', 'support-needed', 'discussion-plan', 'resources'].includes(questionId)) return 'time';
            if (['listening-strength', 'listening-tip1', 'listening-tip2', 'assumption-plan', 'question1', 'question2', 'emotion-challenge', 'own-mood', 'improvement-plan', 'trust-building', 'strengths-application'].includes(questionId)) return 'skills';
            if (['model-choice', 'model-reason', 'preparation', 'best-interests', 'integrity', 'tip1', 'tip2'].includes(questionId)) return 'model';
            if (['shop-floor', 'intervention', 'team-group', 'team-issue', 'personality-test', 'strengths-appreciation', 'charter-steps', 'conflict-resolution', 'positive-model', 'practice-model'].includes(questionId)) return 'team';
            if (['swot-highlights', 'swot-actions', 'grow-goal', 'first-grow-action', 'review-date', 'self-changes', 'team-changes'].includes(questionId)) return 'reflection';
            return null; // Should not happen if all fields are mapped
        }

        function saveAnswerToStorage(userEmail, questionId, answer) {
            const allAnswers = JSON.parse(localStorage.getItem(localStorageKey)) || {};
            if (!allAnswers[userEmail]) {
                allAnswers[userEmail] = {};
            }
            allAnswers[userEmail][questionId] = answer;
            localStorage.setItem(localStorageKey, JSON.stringify(allAnswers));
            console.log(`Saved locally: ${questionId}`);
        }

        function deleteAnswerFromStorage(userEmail, questionIds) {
            const allAnswers = JSON.parse(localStorage.getItem(localStorageKey)) || {};
            if (allAnswers[userEmail]) {
                 if (Array.isArray(questionIds)) {
                      questionIds.forEach(id => { delete allAnswers[userEmail][id]; });
                 } else {
                      delete allAnswers[userEmail][questionIds]; // Single ID case
                 }

                if (Object.keys(allAnswers[userEmail]).length === 0) {
                    delete allAnswers[userEmail];
                }
            }
            localStorage.setItem(localStorageKey, JSON.stringify(allAnswers));
            console.log(`Deleted locally: ${Array.isArray(questionIds) ? questionIds.join(', ') : questionIds}`);
        }

        // --- Event Listeners Setup ---
        function setupEventListeners(userEmail) {
             // Auto-remove required styling on input/change for required fields
             document.querySelectorAll('.required-answer').forEach(field => {
                 const eventType = (field.tagName === 'SELECT') ? 'change' : 'input';
                 field.addEventListener(eventType, function() {
                     const questionId = this.getAttribute('data-question');
                     const errorId = `error-${questionId}`;
                     const errorElement = document.getElementById(errorId);
                     const sectionId = getSectionIdFromQuestionId(questionId);
                     const sectionWarningElement = document.getElementById(`warning-${sectionId}`);

                     if (this.value.trim() !== '') {
                         this.classList.remove('required-field');
                         if (errorElement) errorElement.style.display = 'none';

                         // Check if all fields in the section are now filled to hide section warning
                         const sectionFields = document.querySelectorAll(`.question-box[data-section="${sectionId}"] .required-answer`); // Requires adding data-section to question-box
                         let sectionComplete = true;
                         sectionFields.forEach(f => {
                             if (f.value.trim() === '') sectionComplete = false;
                         });
                         if (sectionComplete && sectionWarningElement) {
                             sectionWarningElement.style.display = 'none';
                         }

                     }
                 });
             });

             // Add data-section attribute to question-boxes for easier section validation feedback
             document.querySelectorAll('.question-box').forEach(qb => {
                  const firstField = qb.querySelector('[data-question]');
                  if (firstField) {
                      const sectionId = getSectionIdFromQuestionId(firstField.getAttribute('data-question'));
                      if (sectionId) qb.setAttribute('data-section', sectionId);
                  }
             });


            // Complete button validation & completion state trigger
            document.getElementById('completeButton').addEventListener('click', function(e) {
                e.preventDefault();
                if (!validateAllAnswers(true)) { // Pass true to show general warning
                    showGeneralWarningMessage();
                } else {
                    // All required fields completed - Mark as complete and show message
                    markPlanAsComplete(userEmail);
                }
            });
        }


        // --- UI Feedback & Validation ---

        function validateAllAnswers(isFinalCheck = false) {
            let allValid = true;

            // Check all directly required fields
            document.querySelectorAll('.required-answer').forEach(field => {
                const questionId = field.getAttribute('data-question');
                const errorId = `error-${questionId}`;
                const errorElement = document.getElementById(errorId);
                hideMessages(null, errorId, field); // Clear previous error

                 if (field.value.trim() === '') {
                    allValid = false;
                    if (isFinalCheck) { // Only show inline errors on final check
                        showError(errorId, field, 'This field is required.');
                    } else { // Otherwise, just mark the field
                         field.classList.add('required-field');
                    }
                }
            });
            return allValid;
        }


        function showGeneralWarningMessage() {
            const warningElement = document.getElementById('generalWarningMessage');
            if (!warningElement) return;
            warningElement.textContent = "Action Required: Please complete all required fields before completing the plan. Required fields are highlighted.";
            warningElement.style.display = 'block';
            warningElement.style.animation = 'fadeIn 0.3s ease-in-out';

            const firstEmptyField = document.querySelector('.required-field');
            if (firstEmptyField) {
                firstEmptyField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                setTimeout(() => firstEmptyField.focus(), 100);
            }

            setTimeout(() => {
                warningElement.style.animation = 'fadeOut 0.5s ease-in-out forwards';
                 setTimeout(() => {
                      warningElement.style.display = 'none';
                      warningElement.style.animation = '';
                 }, 500);
            }, 4000);
        }

         function showSaveStatus(statusId, message = '✓ Saved') {
             const statusElement = document.getElementById(statusId);
             if (!statusElement) return;
             statusElement.textContent = message;
             statusElement.style.display = 'inline';
             setTimeout(() => {
                 statusElement.style.display = 'none';
             }, 2500);
        }

        function showError(errorId, field, message = 'Required field.') {
             const errorElement = document.getElementById(errorId);
             if (!errorElement) return;
             errorElement.textContent = message;
             errorElement.style.display = 'inline';
             if (field) {
                 field.classList.add('required-field');
                 // Don't auto-focus if it's the final check, let scroll handle it
                 // setTimeout(() => field.focus(), 50);
             }
        }

         function hideMessages(statusId, errorId, field) {
             const statusElement = statusId ? document.getElementById(statusId) : null;
             const errorElement = errorId ? document.getElementById(errorId) : null;
             if (statusElement) statusElement.style.display = 'none';
             if (errorElement) errorElement.style.display = 'none';
             // Don't remove required-field class here automatically
             // if (field) field.classList.remove('required-field');
        }

        // --- Section-Based Save/Delete ---
        function saveSection(questionIds, sectionId) {
             const userEmail = getUserEmail();
             if (!userEmail) return;

             const statusId = `save-status-${sectionId}`;
             const warningId = `warning-${sectionId}`;
             const warningElement = document.getElementById(warningId);
             hideMessages(statusId, null, null); // Hide previous save status
             if (warningElement) warningElement.style.display = 'none'; // Hide section warning

             let allSectionFieldsValid = true;
             const dataToSave = {};

             // Validate THIS section and collect data
             questionIds.forEach(id => {
                 const field = document.querySelector(`.required-answer[data-question="${id}"]`);
                 if (field) {
                     const errorId = `error-${id}`;
                     hideMessages(null, errorId, field); // Clear previous inline error

                     if (field.value.trim() === '') {
                         allSectionFieldsValid = false;
                         showError(errorId, field, 'Required.'); // Show inline error
                     } else {
                         dataToSave[id] = field.value; // Collect valid data
                         field.classList.remove('required-field'); // Ensure border is removed
                     }
                 }
             });

             if (!allSectionFieldsValid) {
                 if (warningElement) warningElement.style.display = 'block'; // Show section warning
                  // Scroll to first invalid field *within this section*
                  const firstInvalidInSection = document.querySelector(`.question-box[data-section="${sectionId}"] .required-field`);
                  if(firstInvalidInSection) {
                      firstInvalidInSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                      setTimeout(() => firstInvalidInSection.focus(), 100);
                  }
                 return; // Stop saving if validation failed
             }

             // Save and Submit valid data
             for (const id in dataToSave) {
                 saveAnswerToStorage(userEmail, id, dataToSave[id]);
                 submitToFormspree(userEmail, id, dataToSave[id]);
             }

             showSaveStatus(statusId); // Show section saved status
             checkCompletionState(userEmail); // Check if plan is now complete
        }

        function deleteSection(questionIds, sectionId) {
             const userEmail = getUserEmail();
             if (!userEmail) return;

             if (!confirm(`Are you sure you want to clear all answers for the "${sectionId.toUpperCase()}" section?`)) {
                return;
            }

             const statusId = `save-status-${sectionId}`;
             const warningId = `warning-${sectionId}`;
             hideMessages(statusId, null, null); // Hide save status
             const warningElement = document.getElementById(warningId);
             if(warningElement) warningElement.style.display = 'none'; // Hide warning

             questionIds.forEach(id => {
                 const field = document.querySelector(`.required-answer[data-question="${id}"]`);
                 if (field) {
                     field.value = ''; // Clear field
                     hideMessages(null, `error-${id}`, field); // Clear inline error and border
                 }
             });

             deleteAnswerFromStorage(userEmail, questionIds); // Delete section data
             showSaveStatus(statusId, '✓ Cleared');
             checkCompletionState(userEmail); // Re-check completion state
        }


        // --- Formspree Submission ---
        function submitToFormspree(userEmail, questionId, answer) {
            if (answer === null || answer === undefined || answer.trim() === '') {
                console.log(`Skipping Formspree submission for empty answer: ${questionId}`);
                return;
            }
            const formData = new FormData();
            formData.append('email', userEmail);
            formData.append('page', document.title);
            formData.append('question_id', questionId);
            formData.append('answer_text', answer);

            fetch(formspreeEndpoint, {
                method: 'POST',
                body: formData,
                headers: { 'Accept': 'application/json' }
            })
            .then(response => {
                if (response.ok) {
                    console.log(`Answer submitted to Formspree: ${questionId}`);
                } else {
                     response.json().then(data => {
                         console.error(`Formspree error for ${questionId}:`, data.errors ? data.errors.map(e => e.message).join(', ') : `Status ${response.status}`);
                    }).catch(() => console.error(`Formspree non-JSON error for ${questionId}. Status: ${response.status}`));
                }
            })
            .catch(error => console.error(`Network error submitting to Formspree for ${questionId}:`, error));
        }

        // --- Completion Handling ---
        function markPlanAsComplete(userEmail) {
             console.log('Marking plan as complete');
             localStorage.setItem(`${localStorageKey}_completed_${userEmail}`, 'true'); // Mark as completed for this user
             displayCompletionState();
             document.getElementById('completionMessage')?.scrollIntoView({ behavior: 'smooth' });
             // Optional: Show the success modal as well?
             // showSuccessModal();
        }

        function checkCompletionState(userEmail) {
            const isCompleted = localStorage.getItem(`${localStorageKey}_completed_${userEmail}`) === 'true';
             if (isCompleted) {
                 displayCompletionState();
             }
        }

        function displayCompletionState() {
             console.log('Displaying completion state');
             document.getElementById('completionMessage')?.style.display = 'block';
             document.getElementById('completeButton')?.style.display = 'none'; // Hide complete button
             // Optionally disable all save/delete buttons and fields
             document.querySelectorAll('.save-button, .delete-button, .required-answer').forEach(el => {
                 el.disabled = true;
                 if(el.tagName !== 'BUTTON') el.style.backgroundColor = '#e9ecef'; // Grey out fields
             });
             // Update final navigation button text/action if needed (already handled by original code)
             // const whatsNextBtn = document.getElementById('whatsNextButton');
             // if (whatsNextBtn) whatsNextBtn.style.display = 'inline-block';
        }

        // --- Modal Handling --- (Keep standard functions)
         function showSuccessModal() {
             // This modal might not be needed if the completion message is shown
             // Or it could be repurposed for section saves? For now, keep it unused.
             // const modal = document.getElementById('successModal');
             // if(modal) modal.style.display = 'flex';
             console.log("Success Modal function called (currently inactive)");
        }

        function closeModal() {
            const modal = document.getElementById('successModal');
            if(modal) modal.style.display = 'none';
        }

        function redirectToNextPage() {
             // Since this is the last page, maybe redirect to index or show an alert
             alert('Congratulations! Action Plan Complete.');
             // window.location.href = 'index.html'; // Or redirect elsewhere
        }

    </script>
</body>
</html>
